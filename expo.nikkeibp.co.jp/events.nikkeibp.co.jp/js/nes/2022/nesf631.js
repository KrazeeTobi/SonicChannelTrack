const nesUtils={toArray:function(a){if(a==null||a.length==null){return[]}return Array.prototype.slice.call(a)},exTrim:function(a){return a.replace(/^[\f\n\r\t\v\u0020\u00a0\u2000-\u200b\u2028\u2029\u3000]+|[\f\n\r\t\v\u0020\u00a0\u2000-\u200b\u2028\u2029\u3000]+$/g,"")},sanitize:function(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#x60;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},sanitize_decode:function(a){return a.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&#x60;/g,"`").replace(/&lt;/g,"<").replace(/&gt;/g,">")},stripTags:function(a){return a.replace(/<("[^"]*"|'[^']*'|[^'">])*>/g," ")},attachOwnHostname:function(a){return(window.location.hostname.indexOf(".nikkeibp.co.jp")>-1)?window.location.protocol+"//"+window.location.hostname.match(/(.+)\.nikkeibp\.co\.jp/)[1]+".nikkeibp.co.jp"+a:a},prefixHost:function(){return/^t-/.test(location.hostname)?"t-":(/^s-/.test(location.hostname)?"s-":"")},locationQueryParams:function(){const a=location.search;if(/^\?.+$/.test(a)){return a.substring(1).split("&").reduce(function(d,c){const b=c.split("=");if(b.length>1){d[decodeURIComponent(b[0])]=decodeURIComponent(b[1])}return d},{})}else{return{}}},bpsearchOrigin:function(){return"https://"+this.prefixHost()+"bpsearch.nikkeibp.co.jp"},formatDate:function(a,e,d){if(!d){d="YYYY.MM.DD"}const c=new Date();if(a||e){c.setTime(a?a:e)}d=d.replace(/YYYY/,c.getFullYear());if(d.match(/MM/)){d=d.replace(/MM/,("0"+(c.getMonth()+1)).slice(-2))}else{d=d.replace(/M/,c.getMonth()+1)}if(d.match(/DD/)){d=d.replace(/DD/,("0"+c.getDate()).slice(-2))}else{d=d.replace(/D/,c.getDate())}if(d.match(/HH/)){d=d.replace(/HH/,("0"+c.getHours()).slice(-2))}else{if(d.match(/H/)){d=d.replace(/H/,c.getHours())}}if(d.match(/mm/)){d=d.replace(/mm/,("0"+c.getMinutes()).slice(-2))}else{if(d.match(/m/)){d=d.replace(/m/,c.getMinutes())}}if(d.match(/ss/)){d=d.replace(/ss/,("0"+c.getSeconds()).slice(-2))}else{if(d.match(/s/)){d=d.replace(/s/,c.getSeconds())}}if(d.match(/E/)){const b=["日","月","火","水","木","金","土"];d=d.replace(/E/,b[c.getDay()])}return d},filterInt:function(a){if(/^\d+$/.test(a)){return Number(a)}else{return 1}},getSubstring:function(b,a){let result=b;if(b.length>a){result=b.substring(0,a)}return result},shuffle:function(a){for(let i=a.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));let tmp=a[i];a[i]=a[j];a[j]=tmp}return a},getQueryString:function(b){const e={};e.KEYWORD=b.querySelector('[name="KEYWORD"]').value;if(b.querySelectorAll('[name="period"]').length){const d=[];this.toArray(b.querySelectorAll('[name="period"]:checked')).forEach(function(g){d.push(g.value)});if(d.length){e.period=d.join(",")}}if(b.querySelectorAll('[name="theme"]').length){const c=[];this.toArray(b.querySelectorAll('[name="theme"]:checked')).forEach(function(g){c.push(g.value)});if(c.length){e.theme=c.join(",")}}if(b.querySelectorAll('[name="event"]').length){const a=[];this.toArray(b.querySelectorAll('[name="event"]:checked')).forEach(function(g){a.push(g.value)});if(a.length){e.event=a.join(",")}}const f=Object.keys(e).map(function(g){return g+"="+encodeURIComponent(e[g])}).join("&");return f}};(function(c,a,b){c.addEventListener("DOMContentLoaded",function(){const d=b.toArray(a.querySelectorAll("img.lazyload"));new LazyLoad(d,{rootMargin:"100px 0",threshold:[0,0.5,1]});const e=b.toArray(a.querySelectorAll("form.bpsearch"));e.forEach(function(f){f.addEventListener("submit",function(g){g.preventDefault();let keyword=f.querySelector('[name="KEYWORD"]').value;if(keyword===""){alert("検索ワードを指定してください");return false}const h=b.getQueryString(f);if(h){location.href=f.action+"?"+h}})})})})(window,document,nesUtils);