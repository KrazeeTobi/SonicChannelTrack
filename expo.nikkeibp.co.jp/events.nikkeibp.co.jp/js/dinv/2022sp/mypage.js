(function(){const b={score:"nes_dinv2022sp_score",booth:"nes_dinv2022sp_booth",category:"nes_dinv2022sp_category"};const c={seminars:"セミナー","native-tieups":"ソリューション／事例紹介",docs:"資料ダウンロード",movies:"資料動画",news:"出展社ニュース",novelties:"ノベルティ"};const f=$(".content").data("device");const d=f==="pc"?"26":"18";const e=new Date();const g=String(e.getFullYear())+String(e.getMonth())+String(e.getDate())+String(e.getHours());const a="../../../js/dinv/2022sp/data/shozai11ca.xml?Date="+g;$(function(){if($("#boothList").length>0){$.ajax({url:"/pds/userdb/?MAXCNT=200&service="+b.booth,type:"get",cache:false}).done(function(k){if(k.data.length>0){$.ajax({url:a,type:"get",dataType:"XML"}).done(function(l){k.data.forEach(function(m){h(m.obj.url,m.obj.exhibitid,m.obj.exhibitname,m.id,l)})})}})}function h(l,m,o,n,k){let html="";html+='<section class="l-section">';html+='<div class="l-container">';html+='<div class="mypage_head">';html+='<h2 class="mypage_title"><a href="'+l+'">'+o+"</a></h2>";html+='<button class="delete-btn" type="button" data-did="'+n+'">削除</button>';html+="</div>";html+='<ul class="mypage_list">';$(k).find("items item").each(function(p,q){let type=$(q).find("type").text();let title=$(q).find("title").text();let exhibitName=$(q).find("exhibitName").text();let exhibitId=$(q).find("exhibitId").text();let path=$(q).find("path").text().replace("/sites/events.nikkeibp.co.jp","").replace("index-2.html","");if(exhibitId==m){html+='<li class="mypage_list_item">';html+='<div class="category">';html+='<span class="ico"><img src="/images/dinv/2022sp/ico_'+type+'.svg" alt="" width="'+d+'" height="'+d+'"></span>';html+="<span>"+c[type]+"</span>";html+="</div>";html+='<p class="seminar-title"><a href="'+path+'">'+title+"</a></p>";html+="</li>"}});html+="</div>";html+="</section>";$("#boothList").append(html);$("#boothList .delete-btn").on("click",function(){let n=$(this).attr("data-did");j(n);return false})}function j(k){$.ajax({type:"GET",url:"/pds/userdb/delete/"+k,dataType:"json",data:{chk_token:$('meta[name="bpcmstokenmydata"]').attr("content")}}).done(function(l){if(l.statusCode=="200"){$(document).find('#boothList button[data-did="'+k+'"]').closest("section").remove()}})}});$(function(){const k={cloud:"クラウド／レガシー対策DX",iot:"IoT／産業インフラDX",smartwork:"スマートワーク／業務アプリDX",document:"ペーパレス／文書管理DX",automation:"業務改善／業務自動化DX",ai:"AI／ロボット技術活用DX",security:"セキュリティ／脅威対策DX",data:"データドリブン／意思決定プロセスDX",communication:"通信／コミュニケーションDX",lowcode:"アジャイル／ローコード開発DX",administration:"行政／都市DX",customer:"顧客体験／店舗DX",logistics:"流通／物流DX",maintenance:"保守／フィールドサービスDX",construction:"建設／土木／不動産DX",manufacturing:"製造DX",finance:"金融DX",education:"学校／教育DX",marketing:"マーケティングDX",sales:"オンライン商談／営業支援DX",hrmanagement:"人事DX",management:"総務／労務DX",accounting:"経理／財務DX",digitalhealth:"医療ヘルスケアDX"};if($("#categoryList").length>0){$(".search_list").hide();let section="";Object.keys(k).forEach(function(m){section+='<section class="l-section" data-cate="'+m+'"></section>'});$("#categoryList").append(section);$.ajax({url:a,type:"get",dataType:"XML"}).done(function(m){$.ajax({url:"/pds/userdb/?MAXCNT=5&service="+b.category,type:"get"}).done(function(n){$(".search_list").show();for(let i=0;i<n.data.length;i++){let category=n.data[i].obj.category;$(document).find('.search_list li input[value="'+category+'"]').attr("data-did",n.data[i].id);$(document).find('.search_list li input[value="'+category+'"]').prop("checked",true);j(category,m)}$(".search_list li input").on("change",function(){if($(".search_list li input:checked").length<=5){if($(this).prop("checked")){j($(this).val(),m);h($(this).val(),$(this))}else{l($(this).val(),$(this).attr("data-did"),$(this))}}else{alert("選択できるカテゴリーは5件までです");$(this).prop("checked",false)}})})})}function h(n,m){const p={category:n,site:"NES"};const o={obj:JSON.stringify(p),service:b.category,callback:"",chk_token:$('meta[name="bpcmstokenmydata"]').attr("content")};$.ajax({type:"POST",url:"/pds/userdb/create/",dataType:"json",data:o}).done(function(q){if(q.statusCode=="200"){$(m).attr("data-did",q.data.id)}else{alert("エラーが発生しました");$(m).prop("checked",false)}}).fail(function(){alert("エラーが発生しました");$(m).prop("checked",false)})}function l(o,n,m){$.ajax({type:"GET",url:"/pds/userdb/delete/"+n,dataType:"json",data:{chk_token:$('meta[name="bpcmstokenmydata"]').attr("content")}}).done(function(p){if(p.statusCode=="200"){$(m).prop("checked",false);$(document).find('section [data-cate="'+o+'"]').empty()}else{alert("エラーが発生しました");$(m).prop("checked",true)}})}function j(n,m){let html="";html+='<div class="l-container">';html+='<div class="mypage_head">';html+='<h2 class="mypage_title">'+k[n]+"</h2>";html+="</div>";html+='<ul class="mypage_list">';$(m).find("items item").each(function(o,p){let type=$(p).find("type").text();let title=$(p).find("title").text();let exhibitName=$(p).find("exhibitName").text();let path=$(p).find("path").text().replace("../../../index.html","").replace("index-2.html","");let viewFlag=false;$(p).find("themes theme").each(function(q,r){if($(r).find("id").text()==n){viewFlag=true}});if(viewFlag){html+='<li class="mypage_list_item">';html+='<div class="category">';html+='<span class="ico"><img src="/images/dinv/2022sp/ico_'+type+'.svg" alt="" width="'+d+'" height="'+d+'"></span>';html+="<span>"+c[type]+"</span>";html+="</div>";html+='<p class="seminar-title"><a href="'+path+'"><span class="sub">'+exhibitName+"</span>"+title+"</a></p>";html+="</li>"}});html+="</ul>";html+="</div>";$(document).find('#categoryList section[data-cate="'+n+'"]').html(html)}});$(function(){if($("#scoreList").length>0){const h=100;$.ajax({url:"/pds/userdb/?MAXCNT=1000&service="+b.score,type:"get"}).done(function(k){if(k.data.length>0){const j=k.data.length;let score=0;let html="";k.data.forEach(function(l,m){html+='<li class="mypage_list_item"'+(m>=h?' style="display:none;"':"")+">";html+='<div class="category">';html+='<span class="ico"><img src="/images/dinv/2022sp/ico_'+l.obj.type+'.svg" alt="" width="'+d+'" height="'+d+'"></span>';html+="<span>"+c[l.obj.type]+"</span>";html+="</div>";html+='<p class="seminar-title"><a href="'+l.obj.path.replace("/sites/events.nikkeibp.co.jp","").replace("index-2.html","")+'"><span class="sub">'+l.obj.exhibitName+"</span>"+l.obj.title+"</a></p>";html+="</li>";score=score+Number(l.obj.score)});$(".score_num").text(score);$("#scoreList").html(html);if(j>h){$(".js-moreBtn").show()}let num=h;$(".js-moreBtn").on("click",function(){num+=h;$(this).siblings().find("li:lt("+num+")").show(400);if(j<=num){$(".js-moreBtn").hide(300)}})}})}})})();