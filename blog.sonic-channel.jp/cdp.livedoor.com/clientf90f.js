async function e(e,...t){}async function t(t,o){const n="https://b6.im-apps.net/livedoor";e("dummy request",n,t,o);const r=function(e){return Object.keys(e).map((t=>"object"==typeof e[t]?`${encodeURIComponent(t)}=${encodeURIComponent(JSON.stringify(e[t]))}`:e[t]?`${encodeURIComponent(t)}=${encodeURIComponent(String(e[t]))}`:void 0)).filter(Boolean).join("&")}(o);return fetch(n,{method:t,body:r,mode:"cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}async function o(e){return t("POST",e)}async function n(t,n){if(t.method)switch(e("run",t.method),t.method){case"pageview":e("pageview",t,n),async function(e){o({...e})}({method:"pageview",...n,user:t.userId,data:t.data});break;case"event":if(e("event",t,n),!t.category){console.warn('event "category" param is required');break}!async function(e){o({...e})}({method:"event",...n,user:t.userId,data:t.data,category:t.category,act:t.action,name:t.name,val:t.value})}else e()}var r,i={};function a(e){return localStorage?localStorage.getItem(e):null}function c(e,t){try{localStorage.setItem(e,t)}catch(o){console.error(o)}}function d(e){localStorage&&localStorage.removeItem(e)}r=i,function(){var e={};!function(){var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.imUlid=void 0;var o="0123456789ABCDEFGHJKMNPQRSTVWXYZ";t.imUlid=function(){for(var e,t=Date.now(),n="",r=10;r--;)n=o[e=t%32]+n,t=(t-e)/32;r=16;var i=new Uint8Array(r);("crypto"in window?crypto:msCrypto).getRandomValues(i);for(;r--;)n+=o[31&i[r]];return n}}();var t=r;for(var o in e)t[o]=e[o];e.__esModule&&Object.defineProperty(t,"__esModule",{value:!0})}();var u=function(){return u=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},u.apply(this,arguments)};function s(e,t,o){return void 0===o&&(o={}),function(e){var t=e.url,o=e.method,n=e.responseType,r=e.body,i=void 0===r?null:r,a=e.onLoadSuccess,c=e.onLoadFailure,d=e.onFailure,u=e.onError,s=e.onTimeout,l=e.timeout,p=e.requestHeaders,m=e.withCredentials,f=void 0===m||m,g=e.asynchronous,w=void 0===g||g,v=new XMLHttpRequest;v.open(o,t,w),v.withCredentials=f,"number"==typeof l&&(v.timeout=l),"string"==typeof n&&(v.responseType=n);var y=function(e){var t=p[e];("string"==typeof t?[t]:t).forEach((function(t){v.setRequestHeader(e,t)}))};for(var h in p)y(h);return v.addEventListener("load",(function(){var e=v.status,t=v.statusText,o=v.readyState,n={status:e,statusText:t,readyState:o,response:v.response};e>=200&&e<300&&4===o?a&&a(n):(c&&c(n),d&&d(n))})),v.addEventListener("error",(function(e){d&&d(e),u&&u(e)})),v.addEventListener("timeout",(function(e){d&&d(e),s&&s(e)})),v.send(i),v}(u(u({url:e,method:"GET",responseType:"json",onLoadSuccess:function(e){var o=e.response;t(o)}},o),{requestHeaders:u(u({},o.requestHeaders),{Accept:"application/json"})}))}const l="_im_uid",p="_im_ppid",m="_im_uid_mtime",f="_im_vid",g=18e5;function w(e,t,o){if(!1===o||!e)return;const n=t||location.hostname,r="https"===location.protocol;!function(e,t,o){void 0===o&&(o={});var n=o.path,r=o.domain,i=o.maxAge,a=o.expires,c=o.secure,d=o.sameSite,u="".concat(e,"=").concat(t);n&&(u+=";path=".concat(n)),r&&(u+=";domain=".concat(r)),"number"==typeof i&&(u+=";max-age=".concat(i)),a&&(u+=";expires=".concat(a.toUTCString())),c&&(u+=";secure"),d&&(u+=";samesite=".concat(d)),document.cookie=u}(f,e,{domain:n,path:"/",secure:r,sameSite:r?"none":"lax",expires:new Date(Date.now()+3456e8)})}function v(){return function(e){for(var t="".concat(e,"="),o=t.length,n=document.cookie.split("; "),r=0,i=n.length,a=void 0;r<i;r++)if((a=n[r]).substr(0,o)===t)return a.slice(o);return null}(f)||i.imUlid()}function y(t,o,n,r){s(t,(t=>{try{const{uid:e,ppid:n}=t;return e?(c(`${l}.${o}`,e),n&&c(`${p}.${o}`,n)):function(e){d(`${l}.${e}`),d(`${p}.${e}`),d(`${m}.${e}`)}(o),c(`${m}.${o}`,new Date(Date.now()).toUTCString()),void r({uid:e||"",ppid:n||"",status:"done"})}catch(n){e("imuid module error:",n)}r({uid:"",ppid:"",status:"error"})}),{withCredentials:!0,timeout:n,onTimeout:()=>{r({uid:"",ppid:"",status:"timeout"})},onError:()=>{r({uid:"",ppid:"",status:"error"})}})}function h(e){!function(){if(window.googletag&&"function"==typeof window.googletag.pubads)return!0;return!1}()?(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((()=>{window.googletag.pubads().setPublisherProvidedId(e)}))):window.googletag.pubads().setPublisherProvidedId(e)}e(),function(t){const{apiServer:o="sync6.im-apps.net",callbackTimeout:n=2e3,callback:r=(t=>{e()}),customerId:i=8181,cookieDomain:c}=t,d=v();let u=`https://${o}/${i}/pid`;d&&(u+=`?vid=${d}`,w(d,c));let s=!1;const f=function(e){const t=a(`${m}.${e}`)||"";if(!t)return null;let o=!0;return Date.parse(t)&&Date.now()-new Date(t).getTime()<g&&(o=!1),{uid:a(`${l}.${e}`)||"",ppid:a(`${p}.${e}`)||"",expired:o}}(i);if(f&&(s=!0,r({uid:f.uid,ppid:f.ppid,status:"done"}),!f.expired))return;y(u,i,n,s?()=>{e()}:r)}({customerId:1017406,callback:t=>{e("imuid callback:",t),async function(t,o){const r=o.site;e("init dataLayer:",t,"siteId:",r),Array.isArray(window[t])&&(e("dataLayer is already pushed",window[t]),window[t].map((e=>{n(e,o)})));window[t]={id:r,push:e=>{n(e,o)}}}("livedoorCdpRequest",{url:window.location.href,ref:document.referrer,title:document.title,kw:document.querySelector('meta[name="keywords"]')?.getAttribute("content")??"",desc:document.querySelector('meta[name="description"]')?.getAttribute("content")??"",site:"GKWANY",vid:t.vid,uid:t.uid}),h(t.ppid)}});
