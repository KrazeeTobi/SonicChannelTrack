!function(e){"use strict";var t=document.currentScript,o="https://pdn.adingo.jp/";function r(e,t){var o=e.split("/");o.pop();for(var r=t.split("../"),i=r.length,n=0;n<i-1;n++)o.pop(),r.shift();return o.push(r[0].replace("./","")),o.join("/")}function i(e,t,o){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("link");i.href=e,i.rel="preload",i.as="script",r.appendChild(i);var n=0,p=function(){var i=document.createElement("script");i.async=!0,i.type="text/javascript",i.src=e;var a=function(){t()};i.onload=a,i.onreadystatechange=function(){var e=i.readyState;"loaded"!==e&&"complete"!==e||a()},i.onerror=function(){(n+=1)<3?p():o(new Error("Failed to load module from "+e))},r.appendChild(i)};p()}var n=function(){function e(){this.moduleMap={},this.exportedMap={},this.importQueueMap={},this.define.amd={}}return e.prototype.define=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=e[0];if(!(o in this.moduleMap)&&!(o in this.exportedMap)){var r,i,n=e[1];n instanceof Array?(i=n,r=e[2]):(i=[],r=n);var p={factory:r,dependencies:i},a=this.importQueueMap[o];if(a){for(var u=this.evalModule(o,p),d=0;d<a.length;d++){var c=a[d];c(u)}delete this.importQueueMap[o]}else this.moduleMap[o]=p}},e.prototype.import=function(e){var t=this,o=this.getModule("lib/promise").PromiseLike,r=this.getModule(e);return r?o.resolve(r):new o((function(o,r){t.importQueueMap[e]||(t.loadScript("p/3fd7836/"+e+".js").catch((function(e){return r(e)})),t.importQueueMap[e]=[]),t.importQueueMap[e].push(o)}))},e.prototype.loadScript=function(e){return new(0,this.getModule("lib/promise").PromiseLike)((function(r,n){i(function(){if(!t)return o;if(URL){var e=new URL(t.src);return e.protocol+"//"+e.host+e.pathname.split("/").slice(0,-1).join("/")+"/"}return o}()+e,r,n)}))},e.prototype.popModule=function(e){var t=this.moduleMap[e];return delete this.moduleMap[e],t},e.prototype.getModule=function(e){var t=this.exportedMap[e];if(void 0!==t)return t;var o=this.popModule(e);return void 0!==o?this.evalModule(e,o):void 0},e.prototype.evalModule=function(e,t){for(var o={},i=[],n=0;n<t.dependencies.length;n++){var p=t.dependencies[n];if("exports"!==p){var a=r(e,p);i.push(this.getModule(a))}else i.push(o)}var u=t.factory.apply(t,i)||o;return this.exportedMap[e]=u,u},e}();window.fluctAdScript?window.fluctAdScript.mod||(window.fluctAdScript.mod=new n):window.fluctAdScript={mod:new n},e.ModuleLoader=n}({});
fluctAdScript.mod.define("lib/event_handler",["exports"],(function(e){"use strict";var r=function(){function e(){this.errorHandlers=[],this.renderedHandlers=[]}return e.prototype.addRenderedHandler=function(e){this.renderedHandlers.push(e)},e.prototype.addErrorHandler=function(e){this.errorHandlers.push(e)},e.prototype.handleRenderingFailed=function(e){for(var r=0;r<this.errorHandlers.length;r++)this.errorHandlers[r](e)},e.prototype.handleRendered=function(e){for(var r=0;r<this.renderedHandlers.length;r++)this.renderedHandlers[r](e)},e}(),n=new r;e.EventHandler=r,e.GlobalEventHandler=n}));
fluctAdScript.mod.define("lib/util",["exports"],(function(e){"use strict";var n=document.currentScript;function t(e){return e&&"object"==typeof e&&!Array.isArray(e)}function r(e,n,t){if(window.fetch)window.fetch(t,{method:"GET",mode:"no-cors",credentials:"include",cache:"no-store",keepalive:!0});else{var r=e.createElement("img");r.src=t,r.style.display="none !important",r.style.position="absolute",r.style.border="none",r.style.padding="0",r.style.margin="0",r.width=0,r.height=0,r.border="0",n.appendChild(r)}}function i(e){try{var n=e.parent;return n.document,e.top===n?n:i(n)}catch(n){return e}}function o(e){if(!e)return null;try{var n=e.frameElement;if(!n)return n;for(;n.ownerDocument.defaultView.frameElement;)n=n.ownerDocument.defaultView.frameElement;return n}catch(e){return null}}function u(e,n){return n.querySelector('meta[name="'+e+'"]')}e.canWeUseSandboxIframe=function(e){if(-1!==e.indexOf("Trident"))return!1;if(-1!==e.indexOf("Edge"))return!1;if(-1!==e.indexOf("Firefox"))return!1;var n=e.match(/Chrome\/([^\s]+)/)||e.match(/CriOS\/([^\s]+)/);if(null!==n){var t=n[1].split(".");return!((i=parseInt(t[0],10))<58)}if(-1!==e.indexOf("Safari")){var r=e.match(/Version\/([^\s]+)/);if(null===r)return!1;var i;t=r[1].split(".");return!((i=parseInt(t[0],10))<11)&&(11!==i||!(parseInt(t[1],10)<1))}return!1},e.compose=function(e,n){return function(t){return n(e(t))}},e.createIframe=function(e,n){var t=document.createElement("iframe");return t.style.cssText="width: "+e+"; height: "+n+"; border: 0",t.src="about:blank",t.srcdoc="<html/>",t},e.currentScript=n,e.escapeFromIframe=function(e){var n=o(window);return!!n&&(n.parentElement.insertBefore(e,n.nextSibling),n.width=n.height="0",n.style.width=n.style.height="0px",!0)},e.findFriendlyTopWindow=i,e.getMeta=u,e.getMetaKeywords=function(e){var n={};return["keywords","news_keywords"].forEach((function(t){var r=u(t,e);if(r){var i=r.content.split(/,/).filter((function(e){return e.length<30}));if(i.length>30)return;n[t]=i}})),n},e.getPage=function(e){try{return{href:e.top.location.href||"",referrer:e.top.document.referrer||""}}catch(n){return{href:i(e).document.referrer||"",referrer:""}}},e.getTopIframeElement=o,e.getValueOrDefault=function(e,n,t){return null!=e?e:(t(),n)},e.hasActualSize=function(e){return(0!==e.width||0!==e.height)&&(999!==e.width||999!==e.height)},e.includes=function(e,n){return-1!==e.indexOf(n)},e.isElementExistInTree=function(e){return!!e.ownerDocument&&e.ownerDocument.body.contains(e)},e.isIOS=function(e){return-1!==e.indexOf("iPhone")||-1!==e.indexOf("iPad")},e.isValidUrl=function(e){return/^http(s)?:\/\/[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.%]+$/.test(e)},e.mergeObject=function(e,n){for(var t in n){var r=n[t];null!=r&&(e[t]=n[t])}return e},e.mergeObjectDeep=function e(n,r){if(t(n)&&t(r))for(var i in r){var o=r[i];null!=o&&(t(o)?(t(n[i])||(n[i]={}),e(n[i],r[i])):n[i]=r[i])}return n},e.postBeacon=function(e,n,t){var r=JSON.stringify(n);if(window.fetch)window.fetch(e,{method:"POST",mode:"cors",credentials:t?"include":"omit",cache:"no-store",keepalive:!0,headers:{"Content-Type":"application/json"},body:r});else{var i=new XMLHttpRequest;i.open("POST",e),i.setRequestHeader("Content-Type","application/json"),i.send(r)}},e.resizeTopIframeElement=function(e,n,t){var r=o(e),i="100vw"===(null==r?void 0:r.style.width)&&"100vh"===(null==r?void 0:r.style.height);r&&!i&&(r.width=""+n,r.height=""+t,r.style.width=n+"px",r.style.height=t+"px")},e.sendBeacon=r,e.sendBeacons=function(e,n,t){for(var i=0;i<t.length;i++)r(e,n,t[i])},e.sendIdToCookieMonster=function(e,n,t){var i="https://cs.adingo.jp/sync/?from="+encodeURIComponent(e)+"&id="+encodeURIComponent(n);r(t.document,t.document.body,i)},e.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"==e?n:3&n|8).toString(16)}))},e.wrapElement=function(e,n){n.parentElement.insertBefore(e,n),e.appendChild(n)}}));
fluctAdScript.mod.define("lib/logger",["exports","./util"],(function(n,r){"use strict";function o(n,o,t){!function(n,o,t,e){var i=e;i.useragent=navigator.userAgent,r.postBeacon("https://hs.adingo.jp/taglog",{kind:n,level:o,params:i},!1)}("PjsEvent",n,0,r.mergeObject({version:"3fd7836d0dd13166496566a8331187261be59150",script:(r.currentScript||{}).src},t))}function t(n,r){switch(n){case"Error":return console.error(r);case"Warn":return console.warn(r);case"Info":return console.info(r);case"Debug":return console.debug(r)}}function e(n,e,i,c){if(t(n,e),t(n,JSON.stringify(i)),!(c<=Math.random())){o(n,0,i);Math.random()<=.1&&function(n,o,t){window.fluctAdScript.mod.import("lib/datadog").then((function(e){e(window).then((function(e){return null==e?void 0:e.logger[n.toLowerCase()](o,r.mergeObject({version:"3fd7836d0dd13166496566a8331187261be59150",script:(r.currentScript||{}).src},t))}))}))}(n,e,i)}}n.debug=function(n,r,o){e("Debug",n,r,o)},n.error=function(n,r,o){e("Error",n,r,o)},n.info=function(n,r,o){e("Info",n,r,o)},n.log=e,n.warn=function(n,r,o){e("Warn",n,r,o)}}));
fluctAdScript.mod.define("lib/error",["exports","./logger"],(function(e,r){"use strict";function t(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var n=t(r),i=function(){function e(e,r){this.kind=e,this.inner=r}return e.prototype.notify=function(e){n.error(this.inner.message,{exception:this.pretty()},e)},e.prototype.pretty=function(){var e=this.inner;return{kind:this.kind,message:e.message,name:e.name,description:e.description,number:e.number,fileName:e.fileName||e.sourceURL,lineNumber:e.lineNumber||e.line,columnNumber:e.columnNumber,stack:e.stack}},e}();e.PjsError=i}));
fluctAdScript.mod.define("lib/promise",["exports","./event_handler","./error"],(function(t,n,e){"use strict";var i=function(){function t(t){var n=this;this.childList=[],this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this);var e=!1;try{t((function(t){e||(e=!0,n.resolve(t))}),(function(t){e||(e=!0,n.reject(t))}))}catch(t){this.reject(t)}}return t.resolve=function(n){return new t((function(t,e){return t(n)}))},t.reject=function(n){return new t((function(t,e){return e(n)}))},t.all=function(n){var e=n.pop();return e?e.then((function(e){return t.all(n).then((function(t){return t.push(e),t}))})):t.resolve([])},t.prototype.then=function(t){var n=this.clone();return this.pending?(n.chain(this.pending.value,t),n):(n.thenFn=t,n)},t.prototype.catch=function(t){var n=this.clone();return this.pending?(n.pending=this.pending,n):(n.catchFn=t,n)},t.prototype.resolve=function(n){if("function"==typeof Promise&&n instanceof Promise)n.then(this.resolve).catch(this.reject);else if(n instanceof t)n.then(this.resolve).catch(this.reject);else{var e=this.thenFn;if(e)return delete this.thenFn,void this.chain(n,e);this.pending={value:n};for(var i=0;i<this.childList.length;i++){this.childList[i].resolve(n)}}},t.prototype.reject=function(t){var i=this,r=this.catchFn;if(r)return delete this.catchFn,void this.chain(t,r);setTimeout((function(){if(0===i.childList.length){var r=new e.PjsError("RuntimeError",function(t){return t instanceof Error?t:new Error(String(t))}(t));r.notify(1),n.GlobalEventHandler.handleRenderingFailed(r)}for(var o=0;o<i.childList.length;o++){i.childList[o].reject(t)}}),0)},t.prototype.chain=function(t,n){var e;try{e=n(t)}catch(t){return void this.reject(t)}this.resolve(e)},t.prototype.clone=function(){var n=new t((function(){}));return this.childList.push(n),n},t}();t.PromiseLike=i,t.delay=function(t){return new i((function(n){setTimeout((function(){return n()}),t)}))},t.never=function(){return new i((function(t){}))}}));
fluctAdScript.mod.define("lib/skadnetwork",["exports"],(function(n){"use strict";n.extractSkadnParams=function(n){var i,e=n;if(!e.skadn)return{};var t={version:e.skadn.version,network:e.skadn.network,campaign:e.skadn.campaign,itunesitem:e.skadn.itunesitem,nonce:e.skadn.nonce,sourceapp:e.skadn.sourceapp,timestamp:e.skadn.timestamp,signature:e.skadn.signature,fidelities:null===(i=e.skadn.fidelities)||void 0===i?void 0:i.map((function(n){return{fidelity:n.fidelity,signature:n.signature,nonce:n.nonce,timestamp:n.timestamp}}))};return{skadn:JSON.stringify(t)}}}));
fluctAdScript.mod.define("lib/fluct_sdk",["exports","./event_handler","./skadnetwork"],(function(e,t,n){"use strict";var r;function d(e){var t=document.createElement("iframe");t.setAttribute("src",e),document.body.appendChild(t),t.parentNode&&t.parentNode.removeChild(t),t=null}!function(e){e.ServerError="server_error",e.NoAds="no_ads",e.BadRequest="bad_request"}(r||(r={}));var o=function(){function e(e,t){this.isEnableHandlers=!1,this.store=e,this.reloader=t}return e.prototype.setResponse=function(e,t){var n={groupId:e,resp:t};this.store.setResponse(n,this.reloader)},e.prototype.enableFeaturesForSDK=function(t){"number"==typeof t.width&&"number"==typeof t.height&&(e.width=t.width,e.height=t.height),e.isSdk=!0,this.enableHandlers()},e.prototype.enableHandlers=function(){this.isEnableHandlers||(this.isEnableHandlers=!0,t.GlobalEventHandler.addRenderedHandler((function(e){var t=e.creative,r=n.extractSkadnParams(t),o=t.clicktrackers;o&&(r.clicktrackers=o.join(",")),0!==Object.keys(r).length?d("fluct://succeeded?"+function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(r)):d("fluct://succeeded")})),t.GlobalEventHandler.addErrorHandler((function(e){d("fluct://failed?code="+function(e){switch(e){case"NoCampaignFound":case"NoAd":return r.NoAds;case"BadRequestForDlv":case"InvalidUnitId":return r.BadRequest;default:return r.ServerError}}(e.kind))})))},e.getWidth=function(){return e.width},e.getHeight=function(){return e.height},e.getIsSdk=function(){return e.isSdk},e.isSdk=!1,e}();e.FluctSdkExt=o}));
fluctAdScript.mod.define("lib/tpl/1",["../fluct_sdk","../util","../promise","../logger"],(function(t,e,i,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}})),e.default=t,Object.freeze(e)}var r=o(n);function l(e,i){var n=function(e,i){if(t.FluctSdkExt.getIsSdk()&&t.FluctSdkExt.getWidth()&&t.FluctSdkExt.getHeight())return Math.min(t.FluctSdkExt.getWidth()/e.clientWidth,t.FluctSdkExt.getHeight()/e.clientHeight);var n=1;switch(i){case"disable":return 1;case"parent":n=e.parentElement.clientWidth/e.clientWidth;break;case"window":n=e.ownerDocument.body.clientWidth/e.clientWidth}return n>0?n:1}(e,i);if(1!==n){e.style.transform="scale("+n+")",e.style.transformOrigin="top left",e.style.marginRight=parseInt(e.style.width,10)*(n-1)+"px",e.style.marginBottom=parseInt(e.style.height,10)*(n-1)+"px";var o=function(t,e){switch(e){case"disable":case"parent":return 0;case"window":return-t.getBoundingClientRect().left}}(e,i);0!==o&&(e.style.position="relative",e.style.left=o+"px"),t.FluctSdkExt.getIsSdk()&&t.FluctSdkExt.getWidth()&&t.FluctSdkExt.getHeight()&&(e.style.marginTop=(t.FluctSdkExt.getHeight()-e.clientHeight*n)/2+"px",e.style.marginLeft=(t.FluctSdkExt.getWidth()-e.clientWidth*n)/2+"px")}}return function(){function t(t,i,n){var o,l,a,c=(void 0===n?{}:n).isLegacy,u=void 0!==c&&c,s=[];if(this.inlineParams={zoom:e.getValueOrDefault(null===(o=t.inline)||void 0===o?void 0:o.zoom,"disable",(function(){s.push("zoom")})),sticky:e.getValueOrDefault(null===(l=t.inline)||void 0===l?void 0:l.sticky,"disable",(function(){s.push("sticky")})),stickyTopMargin:e.getValueOrDefault(null===(a=t.inline)||void 0===a?void 0:a.stickyTopMargin,0,(function(){s.push("sticky_top_margin")}))},!u&&s.length>0){var d="Detect null record inline Template on group "+i+": "+s;r.warn(d,{msg:d},1)}}return t.prototype.layout=function(t,e,i){var n=t.style;n.width=e+"px",n.height=i+"px",l(t,this.inlineParams.zoom)},t.prototype.apply=function(t,n){var o=this;if(!e.hasActualSize(n))return i.PromiseLike.resolve({root:t,componentMap:{},modifierMap:{}});"window"===this.inlineParams.zoom&&e.escapeFromIframe(t);var r=n.width,l=n.height;return this.layout(t,r,l),"video_only"===this.inlineParams.sticky&&"vast"===n.creative_type?window.fluctAdScript.mod.import("lib/tpl/1/sticky").then((function(e){return{root:e(t,o.inlineParams.stickyTopMargin),componentMap:{},modifierMap:{}}})):i.PromiseLike.resolve({root:t,componentMap:{},modifierMap:{setHeight:function(e){l=e,o.layout(t,r,l)},setWidth:function(e){"string"==typeof e&&"fluid"===e.toLowerCase()?r=t.ownerDocument.documentElement.clientWidth:"number"==typeof e&&(r=e),o.layout(t,r,l)}}})},t}()}));
fluctAdScript.mod.define("lib/legacy_template",["exports","./error","./logger"],(function(e,r,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var i=n(t);e.chooseCompatibleTemplate=function(e,t,n){var u='Detect unsupported template "'+t+"/"+n+'" on group '+e;if(i.warn(u,{msg:u},1),"default"===t){if(83===n)return[1,{}];if(105===n)return[1,{}];if(112===n)return[2,{overlay:{prHeight:20}}];if(120===n)return[2,{}];if(121===n)return[2,{overlay:{prHeight:20}}];if(122===n)return[2,{overlay:{prHeight:30}}]}if("default-v2"===t)return[1,{}];if("special"===t){if(4===n)return[3,{}];if(5===n)return[3,{}];if(27===n)return[3,{}];if(28===n)return[3,{}];if(31===n)return[1,{inline:{zoom:"window"}}];if(40===n)return[1,{inline:{zoom:"window"}}];if(41===n)return[3,{}];if(42===n)return[3,{}];if(43===n)return[3,{}]}return"async"===t&&8===n?[3,{}]:(new r.PjsError("UnSupportedTemplate",new Error('Detect no compatibility template "'+t+"/"+n+'" on group '+e)).notify(1),[1,{}])}}));
fluctAdScript.mod.define("lib/template",["exports","./error","./promise","./tpl/1","./legacy_template","./util"],(function(e,t,r,i,n,o){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=a(i);function c(e,i,n,o){return 1===i?r.PromiseLike.resolve(new l.default(n,e,o)):window.fluctAdScript.mod.import("lib/tpl/"+i).then((function(t){return new t(n,e,o)})).catch((function(){return new t.PjsError("FailedFetchTemplate",new Error("Failed to fetch template api/"+i+" on group "+e)).notify(1),new l.default(n,e,o)}))}e.loadTemplate=function(e,t,r,i){if("api"!==t.k){var a=n.chooseCompatibleTemplate(e,t.k,t.v),l=a[0],u=a[1];return c(e,l,o.mergeObject(r,u),{rewardEmitter:i,isLegacy:!0})}return c(e,t.v,o.mergeObject(r,r),{rewardEmitter:i,isLegacy:!1})}}));
fluctAdScript.mod.define("lib/sp_app_util",["exports","./util"],(function(t,n){"use strict";var a="00000000-0000-0000-0000-000000000000";t.ZERO_FILLED_IFA=a,t.addParamsForADNW=function(t,n,a,r){!function(t,n,a){t.gvaIfa={ifa:"1"===n?"":a}}(t,n,a),""!==r&&function(t,n){t.fluctAdParam={bundle:n}}(t,r),""!==n&&""!==a&&(function(t,n,a){t.fluctAdParam||(t.fluctAdParam={}),t.fluctAdParam.ifa=a,t.fluctAdParam.lmt=n}(t,n,a),function(t,n,a){t.zucksIdfa={ida:a,lat:n}}(t,n,a),function(t,n,a){t.adpressoIdfa={idfa:a,lat:Number(n)}}(t,n,a),function(t,n,a){var r=function(t){return"1"===t}(n);t.amoadOption={idfa:a,optout:r}}(t,n,a),function(t,n){t.imobile_dvid=n}(t,a))},t.determineAdTracking=function(t,r,u){if(!n.isIOS(u))return t;var i=u.match(/OS ([^\s]+)/);if(null===i)return t;var c=i[1].split("_");return parseInt(c[0],10)<14?t:""!==r&&r!==a?"0":"1"},t.expandMacro=function(t,n,r){var u=a;"0"===n&&""!==r&&(u=r);var i={"%%FLUCT_IFA_PLACEHOLDER%%":u};return Object.keys(i).reduce((function(t,n){return t.replace(n,i[n])}),t)},t.replaceLmtIfBool=function(t){switch(t){case!0:return"1";case!1:return"0";default:return t}}}));
fluctAdScript.mod.define("lib/context_builder",["exports","./util","./sp_app_util","./logger"],(function(t,e,n,r){"use strict";function u(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var i=u(r),o=function(){function t(t){this.target=t}return t.prototype.build=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;n++)t[n](this.target);return this.target},t}();var a=function(t,e){return function(n){var r;f(n,{dlvParams:(r={},r[t]=e,r)})}},c=function(t){return function(e){e.keyValue?e.keyValue.merge(t):e.keyValue=new l(t)}},f=function(t,r){r.dlvParams&&(t.dlvParams=e.mergeObject(t.dlvParams,r.dlvParams),void 0!==t.dlvParams.lmt&&(t.dlvParams.lmt=n.replaceLmtIfBool(t.dlvParams.lmt)))},l=function(){function t(t){void 0===t&&(t={}),this.kv=t}return t.prototype.add=function(t,e){this.kv[t]?this.kv[t].push(e):this.kv[t]=[e]},t.prototype.merge=function(t){e.mergeObject(this.kv,t)},t.prototype.toString=function(){return JSON.stringify(this.kv)},t}();t.ContextBuilder=o,t.KeyValue=l,t.optionBuilder=function(t){return function(e){var n;return(n=new o(e)).build.apply(n,t),e}},t.setBehavior=function(t){return function(n){t&&(n.behavior=e.mergeObjectDeep(n.behavior||{},t))}},t.setConfig=function(t){return function(e){f(e,t)}},t.setDlvHost=function(t){return function(e){t&&(e.dlvHost=t)}},t.setDlvParam=a,t.setGamTargetingMap=function(t){var e=function(){return{}};try{if("%%PATTERN:TARGETINGMAP%%"===t||"null"===t||""===t)return e;var n=JSON.parse(t);if("object"!=typeof n)throw"not an object";return c(n)}catch(n){var r="setGamTargetingMap("+t+") received bad JSON";return i.warn(r,{exception:n},1),e}},t.setGpid=function(t){return"%%ADUNIT%%"===t||""===t?function(){return{}}:a("gpid",t)},t.setParam=function(t,e){return function(n){var r;e.length>0&&f(n,{dlvParams:(r={},r[t]=e.join(","),r)})}},t.setTargeting=function(t,e){return function(n){void 0===n.keyValue&&(n.keyValue=new l),n.keyValue.add(t,e)}},t.setTargetingBulk=c,t.setTemplate=function(t){return function(n){t&&(n.template=e.mergeObject(n.template||{},t))}}}));
fluctAdScript.mod.define("lib/client_hints",["exports","./promise","./context_builder"],(function(e,t,n){"use strict";var r=function(){function e(e){void 0===e&&(e=window),this.window=e}return e.prototype.loadDlvParams=function(){return this.getUserAgentValues().then((function(e){var r=[];return e.platformVersion&&r.push(n.setDlvParam("ch_pv",e.platformVersion)),e.model&&r.push(n.setDlvParam("ch_mdl",e.model)),t.PromiseLike.resolve(r)})).catch((function(){return t.PromiseLike.resolve([])}))},e.prototype.getUserAgentValues=function(){var n=this;return new t.PromiseLike((function(t){var r=n.window.navigator;if(e.uaValues)t(e.uaValues);else{if(r.userAgentData&&r.userAgentData.getHighEntropyValues)try{return void r.userAgentData.getHighEntropyValues(["platformVersion","model"]).then((function(n){var r,o;t(e.uaValues={platformVersion:null!==(r=n.platformVersion)&&void 0!==r?r:"",model:null!==(o=n.model)&&void 0!==o?o:""})})).catch((function(){t(e.uaValues={})}))}catch(e){}t(e.uaValues={})}}))},e}();e.ClientHints=r}));
fluctAdScript.mod.define("lib/map",["exports"],(function(t){"use strict";var o=function(){function t(){this._map={}}return t.prototype.clear=function(){this._map={}},t.prototype.delete=function(t){return void 0!==this._map[t]&&(delete this._map[t],!0)},t.prototype.entries=function(){var t=[];return this.forEach((function(o,n){t.push([n,o])})),t},t.prototype.forEach=function(t){for(var o in this._map)t(this._map[o],o,this)},t.prototype.get=function(t){return this._map[t]},t.prototype.has=function(t){return void 0!==this._map[t]},t.prototype.keys=function(){var t=[];return this.forEach((function(o,n){t.push(n)})),t},t.prototype.set=function(t,o){this._map[t]=o},t.prototype.values=function(){var t=[];return this.forEach((function(o){t.push(o)})),t},t}();t.MapLike=o}));
fluctAdScript.mod.define("lib/pauseable_timer",["exports","./promise"],(function(t,i){"use strict";var e=function(){function t(t,i){this.startTime=Date.now(),this.timerId=null,this.intervalId=null,this.resolvePromise=null,this.isPaused=!1,this.totalDelay=t,this.onProgress=i,this.remainingTime=t}return t.prototype.start=function(){var t=this;return new i.PromiseLike((function(i){t.startTimer(i),t.resolvePromise=i}))},t.prototype.startTimer=function(t){var i=this;this.startTime=Date.now(),this.intervalId=setInterval((function(){var t=Date.now()-i.startTime,e=(i.totalDelay-i.remainingTime+t)/i.totalDelay;i.onProgress(Math.min(e,1))}),10),this.timerId=setTimeout((function(){i.clearTimers(),i.onProgress(1),t()}),this.remainingTime)},t.prototype.clearTimers=function(){null!==this.timerId&&(clearTimeout(this.timerId),this.timerId=null),null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},t.prototype.pause=function(){this.isPaused||(this.isPaused=!0,this.clearTimers(),this.remainingTime-=Date.now()-this.startTime)},t.prototype.resume=function(){this.isPaused&&(this.isPaused=!1,this.startTimer(this.resolvePromise))},t}();t.PauseableTimer=e}));
fluctAdScript.mod.define("lib/reward_handler",["exports","./promise","./map","./util","./pauseable_timer"],(function(t,e,i,r,n){"use strict";var o;t.RewardEvent=void 0,(o=t.RewardEvent||(t.RewardEvent={})).rewardedUnitReady="rewardedUnitReady",o.rewardedUnitDisplay="rewardedUnitDisplay",o.rewardedUnitSkipped="rewardedUnitSkipped",o.rewardedUnitSatisfied="rewardedUnitSatisfied",o.rewardedUnitGranted="rewardedUnitGranted",o.rewardedUnitNotLoaded="rewardedUnitNotLoaded";var a=function(){function t(){this.unitEmitterMap=new i.MapLike}return t.prototype.setUnitEvents=function(t,e){e(this.getEmitter(t))},t.prototype.getEmitter=function(t){var e=this.unitEmitterMap.get(t);if(e)return e;var i=new s;return this.unitEmitterMap.set(t,i),i},t.prototype.getEventRegisteredUnitIds=function(t){var e=[];return this.unitEmitterMap.forEach((function(i,r){i.hasEvent(t)&&e.push(r)})),e},t.prototype.getUnitEventEmitDelayMs=function(t,e){var i=[];return this.unitEmitterMap.forEach((function(n,o){if(r.includes(e,o)){var a=n.getEmitDelay(t);void 0!==a&&i.push({unitId:o,delayMs:a})}})),i},t}(),s=function(){function r(){this.props=new u,this.eventCallbackMap=new i.MapLike,this.eventEmitDelayMap=new i.MapLike,this.eventEmitDelayMap.set(t.RewardEvent.rewardedUnitSatisfied,15e3)}return r.prototype.setEmitDelay=function(t,e){this.eventEmitDelayMap.set(t,e)},r.prototype.getEmitDelay=function(t){return this.eventEmitDelayMap.get(t)},r.prototype.on=function(t,e){var i=this.eventCallbackMap.get(t);i?i.push(e):this.eventCallbackMap.set(t,[e])},r.prototype.off=function(t,e){var i=this.eventCallbackMap.get(t);if(i){var r=i.indexOf(e);-1!==r&&i.splice(r,1)}},r.prototype.hasEvent=function(t){return(this.eventCallbackMap.get(t)||[]).length>0},r.prototype.emit=function(t){return(this.eventCallbackMap.get(t)||[]).reduce((function(t,e){return t.then((function(){return e()}))}),new e.PromiseLike((function(t){return t()})))},r.prototype.emitAfterDelay=function(t,e){var i=this,r=void 0===e?{}:e,o=r.delayMs,a=r.onProgress;void 0===o&&(o=this.eventEmitDelayMap.get(t)||0);var s=new n.PauseableTimer(o,a||function(){});return{promise:s.start().then((function(){i.emit(t)})),pause:function(){return s.pause()},resume:function(){return s.resume()}}},r}(),u=function(){function t(){this.progressBarHeight="3px",this.progressBarColor="#0b82f4",this.confirmDialogMessage="広告をスキップしますか？",this.confirmDialogSubMessage="報酬を獲得できなくなります。",this.confirmDialogSkipButtonText="スキップ",this.confirmDialogResumeButtonText="再開"}return t.prototype.setProgressBarHeight=function(t){this.progressBarHeight=t},t.prototype.getProgressBarHeight=function(){return this.progressBarHeight},t.prototype.setProgressBarColor=function(t){this.progressBarColor=t},t.prototype.getProgressBarColor=function(){return this.progressBarColor},t.prototype.setConfirmDialogMessage=function(t){this.confirmDialogMessage=t},t.prototype.getConfirmDialogMessage=function(){return this.confirmDialogMessage},t.prototype.setConfirmDialogSubMessage=function(t){this.confirmDialogSubMessage=t},t.prototype.getConfirmDialogSubMessage=function(){return this.confirmDialogSubMessage},t.prototype.setConfirmDialogSkipButtonText=function(t){this.confirmDialogSkipButtonText=t},t.prototype.getConfirmDialogSkipButtonText=function(){return this.confirmDialogSkipButtonText},t.prototype.setConfirmDialogResumeButtonText=function(t){this.confirmDialogResumeButtonText=t},t.prototype.getConfirmDialogResumeButtonText=function(){return this.confirmDialogResumeButtonText},t}();t.RewardEmitter=s,t.RewardHandler=a,t.RewardProps=u}));
fluctAdScript.mod.define("lib/renderer",["exports","./client_hints","./util","./event_handler","./error","./promise","./sp_app_util","./logger","./reward_handler"],(function(e,n,t,r,o,i,a,c,u){"use strict";function l(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var d=l(c),s=function(){return(s=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};function p(e,n,a){var c=e.shift();if(!t.isElementExistInTree(c)){var u='The container for unit "'+n+'" has already been removed';return d.warn(u,{msg:u},.1),r.GlobalEventHandler.handleRenderingFailed(new o.PjsError("ContainerIsRemoved",new Error(u))),i.PromiseLike.resolve([])}return a(c)}function f(e){var n;switch(e.nodeName){case"SCRIPT":return!0;case"SPAN":return/^fluct\-native/.test(null!==(n=e.id)&&void 0!==n?n:"");default:return!1}}var m=function(){function e(e){this.beacons=e}return e.prototype.fire=function(e,n){t.sendBeacons(e,n,this.beacons)},e}();e.render=function(e,c,l,v,w,h,g){var b=function(){return function(e,c,l,v,w,h,g){switch(c.creative_type){case"html":return p(e,c.unit_id,function(e,n,r){return function(o){var i=o.ownerDocument,c=e,u=new m(c.click_beacons);return n.apply(o,c,r).then((function(e){var n;if(null===e)return[{container:o}];var r=(function(e,n,r,o,i,c){try{var u=t.createIframe("100%","100%");t.canWeUseSandboxIframe(navigator.userAgent)&&u.setAttribute("sandbox","allow-scripts allow-forms allow-pointer-lock allow-popups allow-same-origin allow-top-navigation-by-user-activation"),u.setAttribute("scrolling","no"),n.appendChild(u);var l=u.contentWindow,d=r.html,s=window.fluctAdParam;if(s){var p=s.lmt||"",f=s.ifa||"",m=s.bundle||"";a.addParamsForADNW(l,p,f,m),d=a.expandMacro(d,p,f)}l.fluctAdModifier=o;var v=l.document;d='<script type="text/javascript">var inDapIF=true;<\/script><body style="margin: 0;">'+d+"</body>",v.open(),v.addEventListener("DOMContentLoaded",(function(){c&&c(),l.document.addEventListener("click",(function(){return i.fire(e,n)}),!0)})),v.write(d),v.close()}catch(e){throw c&&c(),e}}(i,o,c,e.modifierMap,u,e.onCompleteRender),t.sendBeacons(i,o,c.imp_beacons),[{container:o,root:e.root,componentMap:e.componentMap}]);return t.resizeTopIframeElement(null===(n=o.ownerDocument)||void 0===n?void 0:n.defaultView,c.width,c.height),r}))}}(c,l,h));case"image":return p(e,c.unit_id,function(e,n){return function(r){var o=r.ownerDocument,i=e,a=new m(i.click_beacons);return n.apply(r,i).then((function(e){var n;if(null===e)return[{container:r}];try{!function(e,n,t,r){var o=e.createElement("img");o.src=t.creative_url,o.alt=t.alt,o.width=parseInt(n.style.width,10),o.height=parseInt(n.style.height,10);var i=e.createElement("a");i.href=t.landing_url,1==t.open?i.target="_blank":i.target="_top",i.rel="noopener noreferrer",i.addEventListener("click",(function(){return r.fire(e,n)})),i.appendChild(o),n.appendChild(i)}(o,r,i,a),e.onCompleteRender&&e.onCompleteRender()}catch(n){e.onCompleteRender&&e.onCompleteRender()}return t.sendBeacons(o,r,i.imp_beacons),t.resizeTopIframeElement(null===(n=r.ownerDocument)||void 0===n?void 0:n.defaultView,i.width,i.height),[{container:r,root:e.root,componentMap:e.componentMap}]}))}}(c,l));case"vast":return p(e,c.unit_id,function(e,n,r,o,i){return function(a){var c=a.ownerDocument,l=e;return n.apply(a,l).then((function(e){return null===e?[{container:a}]:window.fluctAdScript.mod.import("lib/vast_renderer").then((function(n){try{n(c,a,l,o,r.video).then((function(){i.emit(u.RewardEvent.rewardedUnitSatisfied)})),e.onCompleteRender&&e.onCompleteRender()}catch(n){e.onCompleteRender&&e.onCompleteRender()}return[{container:a,root:e.root,componentMap:e.componentMap}]})).then((function(e){var n;return t.resizeTopIframeElement(null===(n=a.ownerDocument)||void 0===n?void 0:n.defaultView,l.width,l.height),e}))}))}}(c,l,v,h,g));case"native":return function(e,n,r){var o=e.filter((function(r){if(!t.isElementExistInTree(r)){var o="One of "+e.length+' container(s) for unit "'+n+'" has already been removed';return d.warn(o,{msg:o},.1),!1}return!0}));if(o.length<1)return i.PromiseLike.resolve([]);return r(o)}(e,c.unit_id,function(e,r,o){return function(a){var c=e;return i.PromiseLike.all(a.map((function(e){return f(e)?i.PromiseLike.resolve({container:e,root:e,componentMap:{}}):r.apply(e,c).then((function(n){return null===n?{container:e}:(n.onCompleteRender&&n.onCompleteRender(),{container:e,root:n.root,componentMap:n.componentMap})}))}))).then((function(e){var r=e.filter((function(e){return null!==e.root}));return window.fluctAdScript.mod.import("native/runtime").then((function(i){var a=i.main,u=r.map((function(e){if(f(e.container))return e.container;var n=e.container.ownerDocument,r=t.uuid(),o=n.createElement("div");return o.id="fluct-nativertb-"+r,e.container.appendChild(o),o}));u.length>0&&new n.ClientHints(window).getUserAgentValues().then((function(e){var n;a(s({mountpoints:u,spAppArgs:null!=o?o:{},clickBeacon:c.click_beacon,uaValues:e},c.nativeObj)),null===(n=u[0].ownerDocument.defaultView)||void 0===n||n.dispatchEvent(new Event("resize"))}));return e}))}))}}(c,l,w));case"none":return p(e,c.unit_id,(b=c,function(e){var n=e.ownerDocument;return t.sendBeacons(n,e,b.imp_beacons),r.GlobalEventHandler.handleRenderingFailed(new o.PjsError("NoAd",new Error("Unit "+b.unit_id+" has no ad"))),i.PromiseLike.resolve([{container:e}])}));default:throw new Error("Detect unsupported creativ type: "+JSON.stringify(c))}var b}(e,c,l,v,w,h,g)};return"none"===c.creative_type?(g.emit(u.RewardEvent.rewardedUnitNotLoaded),b()):g.hasEvent(u.RewardEvent.rewardedUnitReady)?new i.PromiseLike((function(e){g.on(u.RewardEvent.rewardedUnitDisplay,(function(){e(b())})),g.emit(u.RewardEvent.rewardedUnitReady)})):b()}}));
fluctAdScript.mod.define("lib/frame",["exports","./template","./renderer"],(function(e,t,r){"use strict";var i=function(){function e(e,t,r){this.reservedContainerList=[],this.ads=[],this.behavior={},this.spAppArgs=null,this.unitId=e,this.eventHandler=t,this.rewardEmitter=r}return e.prototype.useReloadExt=function(e){this.reloadExt=e},e.prototype.setResponse=function(e,r,i,n,s){this.templatePromise=t.loadTemplate(e,r,i,this.rewardEmitter),this.groupId=e,this.behavior=i,this.spAppArgs=n,this.ads.push(s),this.reservedContainerList.length>0&&this.render()},e.prototype.registerContainer=function(e){this.reservedContainerList.push(e),this.ads.length>0&&this.render()},e.prototype.registerContainers=function(e){var t;(t=this.reservedContainerList).push.apply(t,e),this.ads.length>0&&this.render()},e.prototype.render=function(){var e=this,t=this.ads.shift();this.templatePromise.then((function(i){return r.render(e.reservedContainerList,t,i,e.behavior,e.spAppArgs,e.groupId,e.rewardEmitter)})).then((function(r){r.forEach((function(r){var i=r.container,n=r.root,s=r.componentMap;n&&e.eventHandler.handleRendered({creative:t,container:i,templateRoot:n,componentMap:s,groupId:e.groupId}),e.reloadIfNeeded(i)}))}))},e.prototype.reloadIfNeeded=function(e){if(this.behavior){var t=this.behavior.refreshRate;t&&0!==t&&this.reloadExt&&this.reloadExt.reload(this.groupId,this.unitId,e,t)}},e.prototype.wasLoadedBy=function(e){return this.groupId===e},e}();e.Frame=i}));
fluctAdScript.mod.define("lib/store",["exports","./frame","./util","./event_handler","./reward_handler"],(function(e,r,t,n,a){"use strict";var i=function(){function e(){this.frames={},this.eventHandler=new n.EventHandler,this.eventHandler.addRenderedHandler((function(e){return n.GlobalEventHandler.handleRendered(e)})),this.eventHandler.addErrorHandler((function(e){return n.GlobalEventHandler.handleRenderingFailed(e)})),this.rewardHandler=new a.RewardHandler}return e.prototype.getFrame=function(e){return this.frames[e]},e.prototype.getOrCreateFrame=function(e){var t=this.getFrame(e);return t||(this.frames[e]=new r.Frame(e,this.eventHandler,this.rewardHandler.getEmitter(e)),this.frames[e])},e.prototype.setResponse=function(e,r){for(var n,a=e.resp,i=t.mergeObject(a.template,e.template||{}),s=t.mergeObjectDeep(a.behavior,e.behavior||{}),d=0;d<a.ads.length;d++){var o=a.ads[d],l=this.getOrCreateFrame(String(o.unit_id));l.useReloadExt(r),l.setResponse(e.groupId,i,s,null!==(n=e.spAppArgs)&&void 0!==n?n:null,o)}},e.prototype.registerContainer=function(e,r){null!==r&&this.getOrCreateFrame(e).registerContainer(r)},e.prototype.registerContainers=function(e,r){r.length<1||this.getOrCreateFrame(e).registerContainers(r)},e}();e.Store=i}));
fluctAdScript.mod.define("lib/fetch",["exports","./promise"],(function(t,e){"use strict";function n(t){return function(t,e,n){return t>=e&&t<=n}(t,200,299)}t.fetch=function(t){return new e.PromiseLike((function(e,o){var r=new XMLHttpRequest;r.open("GET",t,!0),r.withCredentials=!0,r.onload=function(){var t=r.status,o=n(t);e({body:r.responseText,status:t,ok:o})},r.onerror=function(){o(new Error("Failed to fetch "+t))},r.send()}))},t.is2xx=n}));
fluctAdScript.mod.define("lib/sej",["exports"],(function(p){"use strict";p.BUNDLE_LIST_OF_SEJ_APPS=["jp.co.sej.omniapp","jp.7netshopping.devsej","jp.co.sej.app"]}));
fluctAdScript.mod.define("lib/api",["exports","./fetch","./promise","./event_handler","./error","./util","./sej","./logger"],(function(e,r,t,n,o,a,i,u){"use strict";function c(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var s=c(u);function f(e){var r=e.bundle;r&&function(e){return a.includes(i.BUNDLE_LIST_OF_SEJ_APPS,e)}(r)&&delete e.ifa}function d(e,r,t){var n=Math.floor(1e14*Math.random()),o=a.getPage(window),i=encodeURIComponent(o.href),u=encodeURIComponent(o.referrer);f(t);var c=function(e){var r=[];for(var t in e){var n=e[t];""!==n&&r.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}return r.join("&")}(t);return e+"/p/?G="+r+"&href="+i+"&R="+u+"&serial="+n+"&guid=ON"+(c=c?"&"+c:"")}e.request=function(e,i,u){var c=d(e,i,u),f=0,l=function(e){if((f+=1)>=0){var a=new o.PjsError("ConnectionFailedForDlv",e);return a.notify(.1),n.GlobalEventHandler.handleRenderingFailed(a),t.never()}return t.delay(500).then((function(){return r.fetch(c).catch(l)}))};return r.fetch(c).catch(l).then((function(e){if(!e.ok)throw new Error("Receive failure response status: "+e.status+', body: "'+e.body+'", from '+c);var r,t=e.body;try{r=JSON.parse(t)}catch(e){throw new Error('Failed to parse body as response of "'+c+'": "'+t+'"')}return function(e){var r=Object.keys(e),t=["ads","syncList","template","behavior","adStatus"].filter((function(e){return!a.includes(r,e)}));if(0!==t.length){var n="Fields "+JSON.stringify(t)+" are not found in response "+JSON.stringify(e);s.warn(n,{msg:n},1)}return{ads:e.ads||[],syncList:e.syncList||[],template:e.template||{k:"api",v:1},behavior:e.behavior||{},adStatus:e.adStatus||200}}(r)}))}}));
fluctAdScript.mod.define("lib/fluct_uid",["exports"],(function(e){"use strict";var t;e.KeyName=void 0,(t=e.KeyName||(e.KeyName={})).TankmanID="fluct_ppUUIDv4",t.FluctUID="fluct_uid";var a=[e.KeyName.TankmanID,e.KeyName.FluctUID];e.normalize=function(t){for(var u=0,n=a;u<n.length;u++){var r=n[u];if(t[r])return t[e.KeyName.FluctUID]=t[r],t}return t}}));
fluctAdScript.mod.define("lib/idext/fluctuid",["exports","../promise","../util"],(function(t,e,o){"use strict";var r="fluctUID",i="fluct_uid",n=function(){function t(){this.fired=!1}return t.prototype.getIDs=function(){var t=this;return new e.PromiseLike((function(e){var o,r,n=t.loadID();if(n)e({ok:!0,itemMap:(o={},o[i]=[n],o)});else{var u=t.generateFluctUID(null);t.saveID(u),e({ok:!0,itemMap:(r={},r[i]=[u],r)})}}))},t.prototype.fireIDs=function(t){var o=this;return this.fired?e.PromiseLike.resolve({ok:!1}):(this.fired=!0,this.loadID()?e.PromiseLike.resolve({ok:!1}):new e.PromiseLike((function(t){var e,r=o.generateFluctUID(null);o.saveID(r),t({ok:!0,itemMap:(e={},e[i]=[r],e)})})))},t.prototype.generateFluctUID=function(t){return null!=t?t:o.uuid()},t.prototype.loadID=function(){try{return localStorage.getItem(r)}catch(t){return null}},t.prototype.saveID=function(t){try{localStorage.setItem(r,t);var e=window;o.sendIdToCookieMonster("fluct_uid",t,e)}catch(t){}},t}();t.FluctUIDExt=n,t.ID_KEY=i}));
fluctAdScript.mod.define("lib/idext/tankman",["exports","../promise","../fetch","../fluct_uid","../util","./fluctuid"],(function(t,e,n,r,u,i){"use strict";function o(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var c=o(r),a=c.KeyName.TankmanID,f=c.KeyName.TankmanID,l=new RegExp(/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i),s=function(t){var r;try{var o=null!==(r=localStorage.getItem(a))&&void 0!==r?r:"";if(l.test(o))return e.PromiseLike.resolve(o)}catch(t){}var c=new i.FluctUIDExt;return n.fetch(function(t,e){return e&&e.match(l)?t+(u.includes(t,"?")?"&":"?")+"uuid="+e:t}(t,c.loadID())).then((function(t){if(!t.ok)return"";var e=t.body;if(!e.match(l))return"";try{localStorage.setItem(a,e),c.saveID(e)}catch(t){}return e}))},h=new(function(){function t(){}return t.prototype.fire=function(t){this.thunk||(this.thunk=s(t))},t.prototype.peace=function(){this.thunk||(this.thunk=e.PromiseLike.resolve(""))},t.prototype.getThunk=function(){return this.thunk},t.prototype.getResult=function(t){var e;return l.test(t)?{ok:!0,itemMap:(e={},e[f]=[t],e)}:{ok:!1}},t}());t.ID_KEY=f,t.instance=h,t.v4=l}));
fluctAdScript.mod.define("lib/idext/rtus",["exports","../promise","../util"],(function(t,e,r){"use strict";var o="rtusId",i="criteo_rtus",s=function(){function t(){this.fired=!1,this.resolve=function(t){}}return t.prototype.getIDs=function(){return new e.PromiseLike((function(t){var e,r;try{r=localStorage.getItem(o)}catch(t){}t(r?{ok:!0,itemMap:(e={},e[i]=[r],e)}:{ok:!1})}))},t.prototype.fireIDs=function(t){var r,i=this;if(this.fired)return e.PromiseLike.resolve({ok:!1});this.fired=!0;try{r=localStorage.getItem(o)}catch(t){}return r?e.PromiseLike.resolve({ok:!1}):new e.PromiseLike((function(t){i.resolve=t;var e=document.createElement("script");e.async=!0,e.type="text/javascript",e.src="https://gum.criteo.com/sync?c=167&r=2&gdpr=0&j=fluctAdScript.rtus_cb",document.head.appendChild(e)}))},t.prototype.getCallback=function(){var t=this;return function(e){var s;if("OK"===e.status){try{localStorage.setItem(o,e.userid);var c=window;r.sendIdToCookieMonster("criteo_rtus",e.userid,c)}catch(t){}t.resolve({ok:!0,itemMap:(s={},s[i]=[e.userid],s)})}else t.resolve({ok:!1})}},t}();t.CriteoRtusExt=s,t.ID_KEY=i}));
fluctAdScript.mod.define("lib/idext/liveramp",["exports","../promise"],(function(e,t){"use strict";var r=function(){return(r=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o="fluct-lrenv",i="lrenv",n=function(){function e(e){void 0===e&&(e=window),this.fired=!1,this.w=e}return e.prototype.getIDs=function(){var e,r=this.getEnvelopeFromStorage();return r?t.PromiseLike.resolve({ok:!0,itemMap:(e={},e.lrenv=[r],e)}):t.PromiseLike.resolve({ok:!1})},e.prototype.fireIDs=function(e){var r,o=this;if(this.fired)return t.PromiseLike.resolve({ok:!1});this.fired=!0;var i=this.getEnvelopeFromStorage();return i?t.PromiseLike.resolve({ok:!0,itemMap:(r={},r.lrenv=[i],r)}):new t.PromiseLike((function(e){try{var t=o.w.ats||o.w.top.ats;if(t)return void t.retrieveEnvelope(o.getCallback(e));e({ok:!1})}catch(t){e({ok:!1})}}))},e.prototype.getCallback=function(e){var t=this;return function(r){var o;if(void 0!==r){var i=null;try{i=JSON.parse(r)}catch(e){}if(i&&i.envelope){try{t.setEnvelopeToStorage(i)}catch(e){}e({ok:!0,itemMap:(o={},o.lrenv=[i.envelope],o)})}else e({ok:!1})}else e({ok:!1})}},e.prototype.setEnvelopeToStorage=function(e){var t=Date.now();e.timestamp||(e.timestamp=t);var i=r(r({},e),{ver:"1.0",expiration:t+864e5});try{this.w.localStorage.setItem(o,JSON.stringify(i))}catch(e){}},e.prototype.getEnvelopeFromStorage=function(){var e=null;try{e=this.w.localStorage.getItem(o)}catch(e){}if(!e)return null;var t=JSON.parse(e);if(!t||!t.envelope||!t.ver||"1.0"!==t.ver||!t.expiration||t.expiration<Date.now()){try{this.w.localStorage.removeItem(o)}catch(e){}return null}return t.envelope},e}();e.ID_KEY=i,e.LiveRampExt=n}));
fluctAdScript.mod.define("lib/idext/imuid",["exports","../promise","../util"],(function(t,i,e){"use strict";var r=function(){return(r=Object.assign||function(t){for(var i,e=1,r=arguments.length;e<r;e++)for(var a in i=arguments[e])Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);return t}).apply(this,arguments)},a="imPmt6837",o="fluct-imuid",s="imuid",n="imsids",g=["NbE0o3km","7kGVPm8x","VgxADo8W","2b6oZGgG","Ok0KEQ8D","58rA1LgB","qkVvpGk9","LkaanXk1","X8KR3xgB","p8JJZo8m","DkR5pQ81","EbjQARkD","pb950Rbv","EkWNP289","YboAra84","lg773Bgp","6bQQqBbM","Mg5WaGkq","Q8Ym3L8d","0bnqXqkR","LbM97KbJ","LgAEYeg4","EgdRQAka","xkD6AYgm","J8BGERka","Lb3jXWkN","38pAp9kD","EkXzywgm","A8ZEmGgE","DgLjpGkM","NgwAqPkL","YklYxXbJ","9gqA3lga","xgP7q9bl","ekypO38j","ebejz4gv","8YqlNl18","8BVAGAe8","ky1ee4Dk","kG3NNVyk","kmlmqNY8","kG3NvDpk","ka6ee4eb","k2AEDQj8","8zY92P4g","gO5lGpdk","k1GmZLwg","g7VrxvDb","klD423Dk","gvqKoW0b","gPKlZXXb","gvqK5pNb","gO5rENWk","gLqlAGK8","gO5l6Zrk","gvqKDVKb","gwrJp2Ab","klD4Z5rk","gO5lVLrk","kXDlepKk","8BVQJV28","kG3ADPak","gxQR02D8","b6N0LXXb","k034al38","8rN04qW8","k2AE7308","gO5lMW7k","gvqKxw0b","8NqlP7pg","g4OxX35b","kV0yEK3g","ka6l9VGb","8Kql9zQb","8JAqo71g","kR3lvE4b","bjov9EZg","b9EalLXb","kWJlGjp8","bo2zOp9k","g7VrnX7b","bQAlO79b","g5r63vp8","8Yql6PR8","bnDE2Ye8","bEznRXqg","b6N0LBwb","k034aWj8","8rN04OB8"].reduce((function(t,i){var e;return r(r({},t),((e={})[i]=!0,e))}),{}),l=function(){function t(t){void 0===t&&(t=window),this.w=e.findFriendlyTopWindow(t),this.w.__im_uid_callback=this.setUIDToStorage.bind(this),this.w.__im_sids_callback=this.setSIDSToStorage.bind(this)}return t.prototype.getIDs=function(){var t=this.getDataFromWindow();if(t)return i.PromiseLike.resolve({ok:!0,itemMap:t});var e=this.getDataFromStorage();return e?i.PromiseLike.resolve({ok:!0,itemMap:e}):i.PromiseLike.resolve({ok:!1})},t.prototype.fireIDs=function(t){var e=this,r=this.getDataFromWindow();if(r){try{this.setDataToStorage(r)}catch(t){}return i.PromiseLike.resolve({ok:!0,itemMap:r})}return new i.PromiseLike((function(t){if(e.w.document.getElementById(a))t({ok:!1});else{var i=e.w.document.createElement("script");i.id=a,i.async=!0,i.type="text/javascript",i.src="https://dmp.im-apps.net/pms/r7RdVKlj/pmt.js",i.dataset.uidCallback="__im_uid_callback",i.dataset.sidsCallback="__im_sids_callback";try{e.w.document.head.appendChild(i)}catch(t){}t({ok:!1})}}))},t.prototype.setUIDToStorage=function(t){var i;if("string"==typeof t){var r=t,a=this.getDataFromStorage();a?a.imuid=[r]:((i={}).imuid=[r],i.imsids=[],a=i),this.setDataToStorage(a),e.sendIdToCookieMonster("imuid",r,this.w)}},t.prototype.setSIDSToStorage=function(t){var i;if(Array.isArray(t)){var e=t.filter(this.filterSIDS),r=this.getDataFromStorage();r?r.imsids=e:((i={}).imuid=[],i.imsids=e,r=i),this.setDataToStorage(r)}},t.prototype.setDataToStorage=function(t){var i=Date.now(),e=JSON.stringify({itemMap:t,ver:"2.0",timestamp:i,expiration:i+864e5});try{this.w.localStorage.setItem(o,e)}catch(t){}},t.prototype.getDataFromStorage=function(){var t=null;try{t=this.w.localStorage.getItem(o)}catch(t){}if(!t)return null;var i=JSON.parse(t);if(!i||!i.itemMap||!i.ver||"2.0"!==i.ver||!i.expiration||i.expiration<Date.now()){try{this.w.localStorage.removeItem(o)}catch(t){}return null}return i.itemMap},t.prototype.getDataFromWindow=function(){var t,i="",e=[];return"string"==typeof this.w.__im_uid_6837&&(i=this.w.__im_uid_6837),Array.isArray(this.w.__im_sids_6837)&&(e=this.w.__im_sids_6837.filter(this.filterSIDS)),i?((t={}).imuid=[i],t.imsids=e,t):null},t.prototype.filterSIDS=function(t){return g[String(t)]},t}();t.ID_KEY=s,t.IMUIDExt=l,t.SIDS_KEY=n}));
fluctAdScript.mod.define("lib/cookie",["exports"],(function(e){"use strict";function i(e){return void 0===e&&(e=document),(i=e.cookie)?i.split(";").map((function(e){var i=e.trim(),t=i.indexOf("=");if(-1!==t)return{key:i.slice(0,t),value:i.slice(t+1)}})).filter((function(e){return!!e})):[];var i}e.getCookie=function(e,t){return void 0===t&&(t=document),i(t).find((function(i){return i.key===e}))},e.getCookies=i,e.setCookie=function(e,i){void 0===i&&(i=document),i.cookie=function(e){var i=[e.key+"="+e.value];return e.path&&i.push("path="+e.path),e.expires&&i.push("expires="+e.expires),i.join(";")}(e)}}));
fluctAdScript.mod.define("lib/idext/a1",["exports","../cookie","../promise","../util"],(function(t,e,i,r){"use strict";var n="a1_gid",s="__a1tg",o=function(){function t(t){void 0===t&&(t=window),this.w=r.findFriendlyTopWindow(t),this.itemMap={},this.fired=!1}return t.prototype.getItemMap=function(t){for(var i,r={},o=0,a=e.getCookies(t);o<a.length;o++){var c=a[o],p=null!==(i=c.value)&&void 0!==i?i:"";if(""!==p){switch(c.key){case n:r[c.key]=[p];break;case s:var h=p.split(/,/).filter((function(t){return""!==t}));h.length&&(r[c.key]=h)}if(r.hasOwnProperty(n)&&r.hasOwnProperty(s))break}}return r},t.prototype.getIDs=function(){return this.itemMap.hasOwnProperty(n)||(this.itemMap=this.getItemMap(this.w.document)),i.PromiseLike.resolve({ok:!0,itemMap:this.itemMap})},t.prototype.fireIDs=function(t){if(this.fired)return this.getIDs();this.fired=!0;var e=new Date,i="https://linkback.contentsfeed.com/src/"+(e.getFullYear().toString()+("0"+(e.getMonth()+1)).slice(-2)+("0"+e.getDate()).slice(-2))+"/lb4jpfluct.min.js",r=this.w.document.createElement("script");r.type="text/javascript",r.async=!0,r.src=i;try{this.w.document.head.appendChild(r)}catch(t){}return this.getIDs()},t}();t.A1IDExt=o,t.A1_KEY_A1GID=n,t.A1_KEY_A1TG=s}));
fluctAdScript.mod.define("lib/idext/d2c",["exports","../promise","../util"],(function(t,e,n){"use strict";var i="1.0",r="fluct-d2c",o="d2c_n",s="d2c_d",d=function(){function t(t){void 0===t&&(t=window),this.fired=!1,this.w=n.findFriendlyTopWindow(t)}return t.prototype.getIDs=function(){var t=this.getResultFromStorage();return t?e.PromiseLike.resolve({ok:!0,itemMap:t}):e.PromiseLike.resolve({ok:!1})},t.prototype.fireIDs=function(t){var n=this;if(this.fired)return this.getIDs();this.fired=!0;var i=this.w;return i.d2c=i.d2c||{},i.d2c.nidan=i.d2c.nidan||{tasks:[],getIds:function(t){i.d2c.nidan.tasks.push(t)}},i.d2c.nidan.domain="js.api.nidan.d2c.ne.jp",new e.PromiseLike((function(t){var e=i.document.createElement("script");e.src="https://cdn.nidan.d2c.ne.jp/1.0/index.js",e.async=!0,e.onload=function(){i.d2c.nidan.getIds((function(e,i){var r=n.setResultToStorage(e,i);t(r?{ok:!0,itemMap:r}:{ok:!1})}))},i.document.head.appendChild(e)}))},t.prototype.setResultToStorage=function(t,e){var o;if(e&&n.sendIdToCookieMonster(s,e,this.w),t){var d=((o={}).d2c_n=[t],o);try{return this.w.localStorage.setItem(r,JSON.stringify({version:i,itemMap:d})),d}catch(t){}}return null},t.prototype.getResultFromStorage=function(){var t=this,e=function(){try{var e=t.w.localStorage.getItem(r);if(e){var n=JSON.parse(e);if(n&&n.version&&n.version===i)return n.itemMap}}catch(t){}return null}();if(e){var n={};if(e&&e.d2c_n&&Array.isArray(e.d2c_n)&&(n.d2c_n=e.d2c_n),Object.keys(n).length>0)return n}return null},t}();t.D2CIDExt=d,t.D2C_KEY_DAISYID=s,t.D2C_KEY_NIDANID=o,t.D2C_STORAGE_KEY=r,t.D2C_STORAGE_VERSION=i}));
fluctAdScript.mod.define("lib/idext/id5",["exports","../promise","../util"],(function(t,i,e){"use strict";var r="fluct-id5id",n="1.0",o="id5_id",a="id5_linktype",d=function(){function t(t){void 0===t&&(t=window),this.fired=!1,this.w=e.findFriendlyTopWindow(t)}return t.prototype.getIDs=function(){var t=this.getResultFromStorage();return t?i.PromiseLike.resolve({ok:!0,itemMap:t}):i.PromiseLike.resolve({ok:!1})},t.prototype.fireIDs=function(t){var e=this;return this.fired?this.getIDs():(this.fired=!0,new i.PromiseLike((function(t){var i=e.w.document.createElement("script");i.src="https://cdn.id5-sync.com/api/1.0/id5-api.js",i.async=!0,i.onload=function(){try{e.w.ID5.init({partnerId:1159}).onAvailable((function(i){var r=i.getUserId(),n=i.getLinkType();if(r){var o=e.setResultToStorage(r,n);if(o)return t({ok:!0,itemMap:o})}return t({ok:!1})}))}catch(i){return t({ok:!1})}},i.onerror=function(){return t({ok:!1})},e.w.document.head.appendChild(i)})))},t.prototype.setResultToStorage=function(t,i){var e;try{var o=((e={}).id5_id=[t],e);return i&&(o.id5_linktype=[i.toString()]),this.w.localStorage.setItem(r,JSON.stringify({version:n,itemMap:o})),o}catch(t){return null}},t.prototype.getStorageItem=function(){try{var t=this.w.localStorage.getItem(r);if(t){var i=JSON.parse(t);if(i&&i.version&&i.version===n)return i.itemMap}}catch(t){}return null},t.prototype.getResultFromStorage=function(){var t=this.getStorageItem();if(t&&t.id5_id&&Array.isArray(t.id5_id)){var i={};return i.id5_id=t.id5_id,t.id5_linktype&&Array.isArray(t.id5_linktype)&&(i.id5_linktype=t.id5_linktype),i}return null},t}();t.ID5IDExt=d,t.ID5_KEY_ID=o,t.ID5_KEY_LINKTYPE=a,t.STORAGE_KEY=r,t.STORAGE_VERSION=n}));
fluctAdScript.mod.define("lib/idext/idhub",["exports","../promise","../util","./tankman","./rtus","./liveramp","./imuid","./fluctuid","./a1","./d2c","./id5"],(function(e,t,s,i,n,u,r,o,D,I,p){"use strict";var a;e.MessageID=void 0,(a=e.MessageID||(e.MessageID={}))[a._Blank=0]="_Blank",a[a.NoResponseRequired=1]="NoResponseRequired",a[a.CriteoRtusIDRequest=2]="CriteoRtusIDRequest",a[a.CriteoRtusIDResponse=3]="CriteoRtusIDResponse",a[a.CriteoRtusFireRequest=4]="CriteoRtusFireRequest",a[a.LiveRampEnvelopeRequest=5]="LiveRampEnvelopeRequest",a[a.LiveRampEnvelopeResponse=6]="LiveRampEnvelopeResponse",a[a.LiveRampEnvelopeFireRequest=7]="LiveRampEnvelopeFireRequest",a[a.IMUIDRequest=8]="IMUIDRequest",a[a.IMUIDResponse=9]="IMUIDResponse",a[a.IMUIDFireRequest=10]="IMUIDFireRequest",a[a.FluctUIDRequest=11]="FluctUIDRequest",a[a.FluctUIDResponse=12]="FluctUIDResponse",a[a.FluctUIDFireRequest=13]="FluctUIDFireRequest",a[a.FluctMetaRequest=14]="FluctMetaRequest",a[a.FluctMetaResponse=15]="FluctMetaResponse",a[a.TankmanIDRequest=16]="TankmanIDRequest",a[a.TankmanIDResponse=17]="TankmanIDResponse",a[a.A1IDRequest=18]="A1IDRequest",a[a.A1IDFireRequest=19]="A1IDFireRequest",a[a.A1IDResponse=20]="A1IDResponse",a[a.D2CIDRequest=21]="D2CIDRequest",a[a.D2CIDResponse=22]="D2CIDResponse",a[a.D2CIDFireRequest=23]="D2CIDFireRequest",a[a.ID5IDRequest=24]="ID5IDRequest",a[a.ID5IDResponse=25]="ID5IDResponse",a[a.ID5IDFireRequest=26]="ID5IDFireRequest";var R=function(){function a(e){void 0===e&&(e=window),this.window=e,this.window.addEventListener("message",this.dispatch.bind(this)),this.rtus=new n.CriteoRtusExt,this.liveramp=new u.LiveRampExt,this.imuid=new r.IMUIDExt,this.fluctuid=new o.FluctUIDExt,this.a1=new D.A1IDExt,this.d2c=new I.D2CIDExt,this.id5=new p.ID5IDExt}return a.prototype.dispatch=function(t){var s=h(t.data);if(null!==s&&s.msgid)switch(s.msgid){case e.MessageID.CriteoRtusIDRequest:return this.handleCriteoRtusIDRequest(t,s);case e.MessageID.CriteoRtusFireRequest:return this.handleCriteoRtusFireRequest(t,s);case e.MessageID.LiveRampEnvelopeRequest:return this.handleLiveRampEnvelopeRequest(t,s);case e.MessageID.LiveRampEnvelopeFireRequest:return this.handleLiveRampEnvelopeFireRequest(t,s);case e.MessageID.IMUIDRequest:return this.handleIMUIDRequest(t,s);case e.MessageID.IMUIDFireRequest:return this.handleIMUIDFireRequest(t,s);case e.MessageID.FluctUIDRequest:return this.handleFluctUIDRequest(t,s);case e.MessageID.FluctUIDFireRequest:return this.handleFluctUIDFireRequest(t,s);case e.MessageID.FluctMetaRequest:return this.handleMeta(t,s);case e.MessageID.TankmanIDRequest:return this.handleTankmanIDRequest(t,s);case e.MessageID.A1IDRequest:return this.handleA1IDRequest(t,s);case e.MessageID.A1IDFireRequest:return this.handleA1IDFireRequest(t,s);case e.MessageID.D2CIDRequest:return this.handleD2CIDRequest(t,s);case e.MessageID.D2CIDFireRequest:return this.handleD2CIDFireRequest(t,s);case e.MessageID.ID5IDRequest:return this.handleID5IDRequest(t,s);case e.MessageID.ID5IDFireRequest:return this.handleID5IDFireRequest(t,s)}},a.prototype.handleIDResponse=function(e,t,s){var i=this;s.then((function(s){s.ok?i.reply(e,l({msgid:t.responseMsgid,ok:!0,itemMap:s.itemMap})):i.reply(e,l({msgid:t.responseMsgid,ok:!1}))}))},a.prototype.reply=function(e,t){null!==e.source&&e.source.postMessage(t,"*")},a.prototype.handleCriteoRtusIDRequest=function(e,t){this.handleIDResponse(e,t,this.getRtusID())},a.prototype.handleCriteoRtusFireRequest=function(e,t){this.fireRtusID(t.opts)},a.prototype.handleLiveRampEnvelopeRequest=function(e,t){this.handleIDResponse(e,t,this.getLiveRampEnvelope())},a.prototype.handleLiveRampEnvelopeFireRequest=function(e,t){this.fireLiveRampEnvelope(t.opts)},a.prototype.handleIMUIDRequest=function(e,t){this.handleIDResponse(e,t,this.getIMUID())},a.prototype.handleIMUIDFireRequest=function(e,t){this.fireIMUID(t.opts)},a.prototype.handleFluctUIDRequest=function(e,t){this.handleIDResponse(e,t,this.getFluctUID())},a.prototype.handleFluctUIDFireRequest=function(e,t){this.fireFluctUID(t.opts)},a.prototype.handleA1IDRequest=function(e,t){this.handleIDResponse(e,t,this.getA1IDs())},a.prototype.handleA1IDFireRequest=function(e,t){this.fireA1IDs(t.opts)},a.prototype.handleD2CIDRequest=function(e,t){this.handleIDResponse(e,t,this.getD2CIDs())},a.prototype.handleD2CIDFireRequest=function(e,t){this.fireD2CIDs(t.opts)},a.prototype.handleTankmanIDRequest=function(e,t){this.handleIDResponse(e,t,this.getTankmanID())},a.prototype.handleID5IDRequest=function(e,t){this.handleIDResponse(e,t,this.getID5IDs())},a.prototype.handleID5IDFireRequest=function(e,t){this.fireID5IDs(t.opts)},a.prototype.handleMeta=function(e,s){this.handleIDResponse(e,s,t.PromiseLike.resolve(this.getMeta()))},a.prototype.getRtusExt=function(){return this.rtus},a.prototype.getRtusID=function(){return this.rtus.getIDs()},a.prototype.fireRtusID=function(e){return this.rtus.fireIDs(e)},a.prototype.getLiveRampEnvelope=function(){return this.liveramp.getIDs()},a.prototype.fireLiveRampEnvelope=function(e){return this.liveramp.fireIDs(e)},a.prototype.getIMUID=function(){return this.imuid.getIDs()},a.prototype.fireIMUID=function(e){return this.imuid.fireIDs(e)},a.prototype.getFluctUID=function(){return this.fluctuid.getIDs()},a.prototype.fireFluctUID=function(e){return this.fluctuid.fireIDs(e)},a.prototype.getA1IDs=function(){return this.a1.getIDs()},a.prototype.fireA1IDs=function(e){return this.a1.fireIDs(e)},a.prototype.getD2CIDs=function(){return this.d2c.getIDs()},a.prototype.fireD2CIDs=function(e){return this.d2c.fireIDs(e)},a.prototype.getID5IDs=function(){return this.id5.getIDs()},a.prototype.fireID5IDs=function(e){return this.id5.fireIDs(e)},a.prototype.getTankmanID=function(){var e=i.instance.getThunk();return e?e.then(i.instance.getResult):t.PromiseLike.resolve({ok:!1})},a.prototype.getMeta=function(){try{var e=this.window.top.document;return{ok:!0,itemMap:s.getMetaKeywords(e)}}catch(e){return{ok:!1}}},a}(),h=function(e){return e&&"object"==typeof e&&e["fluct-idhub-message"]&&"object"==typeof e["fluct-idhub-message"]?e["fluct-idhub-message"]:null},l=function(e){var t;return(t={})["fluct-idhub-message"]=e,t};e.IDHub=R,e.buildIDHubMessage=l,e.extractIDHubMessage=h}));
fluctAdScript.mod.define("lib/syncer",["exports","./util","./error","./idext/idhub"],(function(t,e,n,i){"use strict";function s(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var o=s(i),r=function(){function t(t){this.info=t}return t.prototype.sync=function(t,n){e.sendBeacon(n,n.body,this.info.src)},t}(),u=function(){function t(t){this.syncInfo=t}return t.prototype.sync=function(t,e){var n=e.createElement("iframe");n.setAttribute("src",this.syncInfo.src),n.setAttribute("style","display:none !important;position:absolute;border:none;padding:0;margin:0;"),n.setAttribute("width","0"),n.setAttribute("height","0"),n.setAttribute("border","0"),e.body.appendChild(n)},t}(),c=function(){function t(t){this.syncInfo=t}return t.prototype.sync=function(t,n){var i=e.createIframe("0px","0px");n.body.appendChild(i);var s=i.contentWindow.document,o='<body style="margin: 0"><script type="text/javascript">var inDapIF=true;<\/script><script type="text/javascript">'+this.syncInfo.src+"<\/script></body>";s.open(),s.write(o),s.close()},t}(),p=function(){function t(t){this.tagInfo=t}return t.prototype.sync=function(t,e){t.fluctAdScript.idhub?t.fluctAdScript.idhub.fireRtusID(this.tagInfo.opts):t.top.postMessage(o.buildIDHubMessage({msgid:o.MessageID.CriteoRtusFireRequest,opts:this.tagInfo.opts}),"*")},t}(),f=function(){function t(t){this.tagInfo=t}return t.prototype.sync=function(t,e){t.fluctAdScript.idhub?t.fluctAdScript.idhub.fireLiveRampEnvelope(this.tagInfo.opts):t.top.postMessage(o.buildIDHubMessage({msgid:o.MessageID.LiveRampEnvelopeFireRequest,opts:this.tagInfo.opts}),"*")},t}(),a=function(){function t(t){this.tagInfo=t}return t.prototype.sync=function(t,e){t.fluctAdScript.idhub?t.fluctAdScript.idhub.fireIMUID(this.tagInfo.opts):t.top.postMessage(o.buildIDHubMessage({msgid:o.MessageID.IMUIDFireRequest,opts:this.tagInfo.opts}),"*")},t}(),d=function(){function t(t){this.tagInfo=t}return t.prototype.sync=function(t,e){t.fluctAdScript.idhub?t.fluctAdScript.idhub.fireFluctUID(this.tagInfo.opts):t.top.postMessage(o.buildIDHubMessage({msgid:o.MessageID.FluctUIDFireRequest,opts:this.tagInfo.opts}),"*")},t}(),g=function(){function t(t){this.tagInfo=t}return t.prototype.sync=function(t,e){t.fluctAdScript.idhub?t.fluctAdScript.idhub.fireA1IDs(this.tagInfo.opts):t.top.postMessage(o.buildIDHubMessage({msgid:o.MessageID.A1IDFireRequest,opts:this.tagInfo.opts}),"*")},t}(),I=function(){function t(t){this.tagInfo=t}return t.prototype.sync=function(t,e){t.fluctAdScript.idhub?t.fluctAdScript.idhub.fireD2CIDs(this.tagInfo.opts):t.top.postMessage(o.buildIDHubMessage({msgid:o.MessageID.D2CIDFireRequest,opts:this.tagInfo.opts}),"*")},t}(),h=function(){function t(t){this.tagInfo=t}return t.prototype.sync=function(t,e){t.fluctAdScript.idhub?t.fluctAdScript.idhub.fireID5IDs(this.tagInfo.opts):t.top.postMessage(o.buildIDHubMessage({msgid:o.MessageID.ID5IDFireRequest,opts:this.tagInfo.opts}),"*")},t}(),b=function(){function t(t){this.info=t}return t.prototype.sync=function(t,e){new n.PjsError("NotImplemented",new Error("not implemented sync type: "+this.info.type)).notify(1)},t}();t.getSyncer=function(t){switch(t.type){case"img":return new r(t);case"iframe":return new u(t);case"script":return new c(t);case"rtus":return new p(t);case"lrenv":return new f(t);case"imuid":return new a(t);case"fluct_uid":return new d(t);case"a1":return new g(t);case"d2c":return new I(t);case"id5":return new h(t);default:return new b(t)}}}));
fluctAdScript.mod.define("lib/idext/loader",["exports","../promise","../context_builder","../util","./idhub","./rtus","./liveramp","./imuid","./fluctuid","./tankman","./a1","./d2c","./id5"],(function(t,e,i,n,r,s,o,u,a,I,p,D,c){"use strict";function d(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}})),e.default=t,Object.freeze(e)}var h=d(r),l=d(s),g=d(o),f=d(u),m=d(a),M=d(I),w=d(p),_=d(D),v=d(c);function E(t,e,i){if(i||2===arguments.length)for(var n,r=0,s=e.length;r<s;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||e)}var R=function(){function t(t){void 0===t&&(t=window),this.window=t}return t.prototype.loadIds=function(){var t=this;return e.PromiseLike.all([this.loadRtusID(),this.loadLiveRampEnvelope(),this.loadIMUID(),this.loadFluctUID(),this.loadMeta(),this.loadPublisherProvideUUID(),this.loadA1IDs(),this.loadD2CIDs(),this.loadID5IDs()]).then((function(e){return t.buildOpts(e)}))},t.prototype.buildOpts=function(t){return t.reduce((function(t,e){return E(E([],t),e)}),[])},t.prototype.getRtusID=function(){return this.window.fluctAdScript.idhub?this.window.fluctAdScript.idhub.getRtusID():this.getRemoteIDs(h.MessageID.CriteoRtusIDRequest,h.MessageID.CriteoRtusIDResponse)},t.prototype.loadRtusID=function(){return this.getRtusID().then((function(t){return t.ok?[i.setParam(l.ID_KEY,t.itemMap[l.ID_KEY])]:[]}))},t.prototype.getLiveRampEnvelope=function(){return this.window.fluctAdScript.idhub?this.window.fluctAdScript.idhub.getLiveRampEnvelope():this.getRemoteIDs(h.MessageID.LiveRampEnvelopeRequest,h.MessageID.LiveRampEnvelopeResponse)},t.prototype.loadLiveRampEnvelope=function(){return this.getLiveRampEnvelope().then((function(t){return t.ok?[i.setParam(g.ID_KEY,t.itemMap[g.ID_KEY])]:[]}))},t.prototype.getIMUID=function(){return this.window.fluctAdScript.idhub?this.window.fluctAdScript.idhub.getIMUID():this.getRemoteIDs(h.MessageID.IMUIDRequest,h.MessageID.IMUIDResponse)},t.prototype.loadIMUID=function(){return this.getIMUID().then((function(t){var e;if(t.ok){var n=[];return f.ID_KEY in t.itemMap&&n.push(i.setParam(f.ID_KEY,t.itemMap[f.ID_KEY])),f.SIDS_KEY in t.itemMap&&t.itemMap[f.SIDS_KEY].length>0&&n.push(i.setTargetingBulk(((e={})[f.SIDS_KEY]=t.itemMap[f.SIDS_KEY],e))),n}return[]}))},t.prototype.getFluctUID=function(){return this.window.fluctAdScript.idhub?this.window.fluctAdScript.idhub.getFluctUID():this.getRemoteIDs(h.MessageID.FluctUIDRequest,h.MessageID.FluctUIDResponse)},t.prototype.loadFluctUID=function(){return this.getFluctUID().then((function(t){return t.ok?[i.setParam(m.ID_KEY,t.itemMap[m.ID_KEY])]:[]}))},t.prototype.getMeta=function(){try{var t=this.window.top.document,i={ok:!0,itemMap:n.getMetaKeywords(t)};return e.PromiseLike.resolve(i)}catch(t){}return this.getRemoteIDs(h.MessageID.FluctMetaRequest,h.MessageID.FluctMetaResponse)},t.prototype.loadMeta=function(){return this.getMeta().then((function(t){return t.ok&&Object.keys(t.itemMap).length>0?[i.setTargetingBulk(t.itemMap)]:[]}))},t.prototype.getPublisherProvidedUUID=function(){var t=M.instance.getThunk();return t?t.then(M.instance.getResult):this.getRemoteIDs(h.MessageID.TankmanIDRequest,h.MessageID.TankmanIDResponse)},t.prototype.loadPublisherProvideUUID=function(){return this.getPublisherProvidedUUID().then((function(t){return t.ok?[i.setParam(M.ID_KEY,t.itemMap[M.ID_KEY])]:[]}))},t.prototype.getFluctPPID=function(){var t=this;return this.getPublisherProvidedUUID().then((function(e){var i;return e.ok?{ok:!0,itemMap:((i={})[m.ID_KEY]=e.itemMap[M.ID_KEY],i)}:t.getFluctUID()}))},t.prototype.getA1IDs=function(){return this.window.fluctAdScript.idhub?this.window.fluctAdScript.idhub.getA1IDs():this.getRemoteIDs(h.MessageID.A1IDRequest,h.MessageID.A1IDResponse)},t.prototype.loadA1IDs=function(){return this.getA1IDs().then((function(t){var e;if(t.ok){var n=[];return t.itemMap.hasOwnProperty(w.A1_KEY_A1GID)&&n.push(i.setParam(w.A1_KEY_A1GID,t.itemMap[w.A1_KEY_A1GID])),t.itemMap.hasOwnProperty(w.A1_KEY_A1TG)&&n.push(i.setTargetingBulk(((e={})[w.A1_KEY_A1TG]=t.itemMap[w.A1_KEY_A1TG],e))),n}return[]}))},t.prototype.getD2CIDs=function(){return this.window.fluctAdScript.idhub?this.window.fluctAdScript.idhub.getD2CIDs():this.getRemoteIDs(h.MessageID.D2CIDRequest,h.MessageID.D2CIDResponse)},t.prototype.loadD2CIDs=function(){return this.getD2CIDs().then((function(t){if(t.ok){var e=[];return t.itemMap.hasOwnProperty(_.D2C_KEY_NIDANID)&&e.push(i.setParam(_.D2C_KEY_NIDANID,t.itemMap[_.D2C_KEY_NIDANID])),e}return[]}))},t.prototype.getID5IDs=function(){return this.window.fluctAdScript.idhub?this.window.fluctAdScript.idhub.getID5IDs():this.getRemoteIDs(h.MessageID.ID5IDRequest,h.MessageID.ID5IDResponse)},t.prototype.loadID5IDs=function(){return this.getID5IDs().then((function(t){var e=[];return t.ok&&(t.itemMap.hasOwnProperty(v.ID5_KEY_ID)&&e.push(i.setParam(v.ID5_KEY_ID,t.itemMap[v.ID5_KEY_ID])),t.itemMap.hasOwnProperty(v.ID5_KEY_LINKTYPE)&&e.push(i.setParam(v.ID5_KEY_LINKTYPE,t.itemMap[v.ID5_KEY_LINKTYPE]))),e}))},t.prototype.getRemoteIDs=function(t,i){var n=this;return new e.PromiseLike((function(r){var s=function(t){var e=h.extractIDHubMessage(t.data);e&&e.msgid===i&&(e.ok?r({itemMap:e.itemMap,ok:!0}):r({ok:!1}),n.window.removeEventListener("message",s))};n.window.addEventListener("message",s,!1),n.window.top.postMessage(h.buildIDHubMessage({msgid:t,responseMsgid:i}),"*"),e.delay(100).then((function(){n.window.removeEventListener("message",s),r({ok:!1})}))})).catch((function(){return{ok:!1}}))},t}();t.IdLoader=R}));
fluctAdScript.mod.define("lib/ad_domain",["exports","./promise","./api","./sp_app_util","./syncer","./event_handler","./error","./idext/loader","./client_hints","./context_builder","./util","./fluct_uid"],(function(e,n,r,t,a,l,i,d,o,u,s,v){"use strict";function c(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var t=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,t.get?t:{enumerable:!0,get:function(){return e[r]}})}})),n.default=e,Object.freeze(n)}var f=c(v),h="https://sh.adingo.jp",m="data-fluct-ad-script-already-reserved",p=function(e,v){var c=this;void 0===e&&(e=window),void 0===v&&(v=document),this.handleRequest=function(e){return c.shareDeviceInfo(e),n.PromiseLike.all([c.idLoader.loadIds(),c.uach.loadDlvParams()]).then((function(n){var r=new u.ContextBuilder(e);n.forEach((function(e){return r.build.apply(r,e)}))})).then((function(){var n=e.dlvHost||h,t=w(e);return r.request(n,e.groupId,t)})).then((function(n){var r,t,a,l,i,d,o,u;return{spAppArgs:{ifa:null!==(r=e.dlvParams.ifa)&&void 0!==r?r:null,lmt:null!==(t=e.dlvParams.lmt)&&void 0!==t?t:null,bundle:null!==(a=e.dlvParams.bundle)&&void 0!==a?a:null,sv:null!==(l=e.dlvParams.sv)&&void 0!==l?l:null,osv:null!==(i=e.dlvParams.osv)&&void 0!==i?i:null,os:null!==(d=e.dlvParams.os)&&void 0!==d?d:null,dm:null!==(o=e.dlvParams.dm)&&void 0!==o?o:null,vendor:null!==(u=e.dlvParams.vendor)&&void 0!==u?u:null},groupId:e.groupId,resp:n}}))},this.shareDeviceInfo=function(e){var n=e.dlvParams.ifa||"",r=t.determineAdTracking(e.dlvParams.lmt||"",n,navigator.userAgent);t.addParamsForADNW(c.window,r,n,e.dlvParams.bundle||"")},this.handleResponse=function(e){var n=e.resp;return c.handleSync(n),c.handleStatus(e),e},this.handleSync=function(e){for(var n=e.syncList,r=0;r<n.length;r++){var t=n[r];a.getSyncer(t).sync(c.window,c.document)}},this.handleStatus=function(e){var n=e.resp,r=e.groupId;if(400<=n.adStatus&&n.adStatus<500){var t=new Error("Receive failure response adStatus: "+JSON.stringify(n)+", on group id "+r);l.GlobalEventHandler.handleRenderingFailed(new i.PjsError("BadRequestForDlv",t))}if(500<=n.adStatus&&n.adStatus<600)throw new Error("Receive failure response adStatus: "+JSON.stringify(n)+", on group id "+r);204===n.adStatus&&(t=new i.PjsError("NoCampaignFound",new Error("No campaign settiing was found by given group id: "+r)),l.GlobalEventHandler.handleRenderingFailed(t))},this.getContainer=function(e,n){var r=g(c.document,e);if(null===r){var t=new i.PjsError("NotFoundContainer",new Error("Could not find container with selector: "+e));return t.notify(.001),l.GlobalEventHandler.handleRenderingFailed(t),null}return r.setAttribute(m,""),!0===n&&s.escapeFromIframe(r),r},this.window=e,this.document=v,this.idLoader=new d.IdLoader(e),this.uach=new o.ClientHints(e)},g=function(e,n){for(var r=e.querySelectorAll(n),t=0;t<r.length;t++){var a=r[t];if(null===a.getAttribute(m))return a}return null},w=function(e){return e.keyValue?s.mergeObject({kv:e.keyValue.toString()},e.dlvParams):f.normalize(e.dlvParams)};e.AdDomain=p,e.DEFAULT_HOST=h}));
fluctAdScript.mod.define("lib/ad_request",["exports","./context_builder","./util","./ad_domain"],(function(t,e,o,s){"use strict";var n=function(){return(n=Object.assign||function(t){for(var e,o=1,s=arguments.length;o<s;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},r=["2"].join(","),i=["2","5","3","6"].sort().join(","),p=["application/javascript","video/mp4","video/ogg","video/webm"].sort().join(","),u=function(){function t(t){this.base=t,this.reqOpts=[],this.resOpts=[],this.domain=new s.AdDomain}return t.prototype.extend=function(){return new t(this)},t.prototype.addRequestOption=function(){for(var t,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];(t=this.reqOpts).push.apply(t,e)},t.prototype.addResponseOption=function(){for(var t,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];(t=this.resOpts).push.apply(t,e)},t.prototype.context=function(t,e){var o={groupId:t,dlvParams:n(n({},e||{}),{api:r,protocols:i,mimes:p})};return this.requestBuilder()(o)},t.prototype.requestBuilder=function(){var t=e.optionBuilder(this.reqOpts);return this.base?o.compose(this.base.requestBuilder(),t):t},t.prototype.responseBuilder=function(){var t=e.optionBuilder(this.resOpts);return this.base?o.compose(this.base.responseBuilder(),t):t},t.prototype.request=function(t,e){var o=this.context(t,e);return this.domain.handleRequest(o).then(this.responseBuilder()).then(this.domain.handleResponse)},t.prototype.getShouldEscape=function(){return!0===this.shouldEscape||!!this.base&&this.base.getShouldEscape()},t.prototype.setShouldEscape=function(t){this.shouldEscape=t},t.prototype.getContainer=function(t){return this.domain.getContainer(t,this.getShouldEscape())},t}();t.Request=u}));
fluctAdScript.mod.define("lib/viewable",["exports"],(function(e){"use strict";e.onChangeViewability=function(e,n){if(window.mraid){var i,t=function(e){var t;void 0!==(t=0!==e)&&i!==t&&(i=t,n(t))};return window.mraid.addEventListener("exposureChange",t),{stop:function(){window.mraid.removeEventListener("exposureChange",t),window.mraid.fluctExt&&"function"==typeof window.mraid.fluctExt.refresh&&window.mraid.fluctExt.refresh()}}}if(!window.IntersectionObserver)return n(!0),{stop:function(){}};var r,o=new IntersectionObserver((function(e){for(var i,t=0;t<e.length;t++){i=!!e[t].isIntersecting}void 0!==i&&r!==i&&(r=i,n(i))}));return o.observe(e),{stop:function(){return o.disconnect()}}}}));
fluctAdScript.mod.define("lib/reload",["exports","./viewable"],(function(e,t){"use strict";var n=function(){function e(e,t){this.store=e,this.req=t}return e.prototype.reload=function(e,n,o,i){var r,s=this;this.req.request(e).then((function(e){s.store.setResponse(e,s)}));var a=Date.now(),u=1e3*i,c=t.onChangeViewability(o,(function(e){if(e)return a=Date.now(),void(r=window.setTimeout((function(){c.stop(),o.innerHTML="",s.store.getOrCreateFrame(n).registerContainer(o)}),u));u-=Date.now()-a,window.clearTimeout(r)}))},e}();e.ReloadExt=n}));
fluctAdScript.mod.define("lib/display_interval",["exports","./cookie"],(function(t,e){"use strict";var i=function(t){return"fluct-pdn-display-interval-"+t},n=function(){function t(t){this.groupId=t}return t.prototype.canDisplayAd=function(){try{var t=i(this.groupId);return void 0===e.getCookie(t)}catch(t){return!0}},t.prototype.enableInterval=function(t){if(!(t<=0))try{var n=1e3*t,r=new Date;r.setTime(r.getTime()+n),e.setCookie({key:i(this.groupId),value:"ok",path:"/",expires:r.toUTCString()})}catch(t){}},t}();t.DisplayIntervalManager=n,t.getDisplayAdIntervalSettingKey=i}));
fluctAdScript.mod.define("lib/segmentlinks",["exports","./promise","./util"],(function(t,e,s){"use strict";var a,c="fluct_sx_script",n="fluct_sx";t.CacheResultStatus=void 0,(a=t.CacheResultStatus||(t.CacheResultStatus={})).OK="ok",a.EXPIRED="expired";var i=function(){function a(t){void 0===t&&(t=window),this.w=s.findFriendlyTopWindow(t)}return a.prototype.getKV=function(){var s=this,a=this.getCacheFromStorage();return a.status===t.CacheResultStatus.EXPIRED&&e.PromiseLike.resolve([]).then((function(){s.updateCache()})),0===a.segments.length?null:{aiseg:a.segments}},a.prototype.getCacheFromStorage=function(){var e=null;try{e=this.w.localStorage.getItem(n)}catch(t){}if(!e)return{segments:[],status:t.CacheResultStatus.EXPIRED};try{var s=JSON.parse(e);if(!s||!s.segments||!s.expiration)return{segments:[],status:t.CacheResultStatus.EXPIRED};var a=s.expiration<Date.now();return{segments:s.segments,status:a?t.CacheResultStatus.EXPIRED:t.CacheResultStatus.OK}}catch(e){return{segments:[],status:t.CacheResultStatus.EXPIRED}}},a.prototype.updateCache=function(){try{this.w.localStorage.removeItem(n)}catch(t){return}this.setCallback(),this.loadScript()},a.prototype.loadScript=function(){if(!this.w.document.getElementById(c))try{var t=this.w.document.createElement("script");t.id=c,t.async=!0,t.type="text/javascript",t.src="https://cdn.sx.adingo.jp/cb.js",t.dataset.sxCallback="__fluct_sx_callback",this.w.document.head.appendChild(t)}catch(t){}},a.prototype.setCallback=function(){"function"!=typeof this.w.__fluct_sx_callback&&(this.w.__fluct_sx_callback=this.setSegmentsAsCache.bind(this))},a.prototype.setSegmentsAsCache=function(t){if(Array.isArray(t)){var e=Date.now(),s={segments:t,timestamp:e,expiration:e+864e5};try{this.w.localStorage.setItem(n,JSON.stringify(s))}catch(t){}}},a}();t.SegmentLinks=i}));
fluctAdScript.mod.define("lib/chain",["exports","./promise","./reload","./context_builder","./display_interval","./reward_handler","./util","./segmentlinks"],(function(t,e,r,n,i,s,o,a){"use strict";var u=function(){function t(t,e,r,n){this.store=t,this.req=e,this.groupId=r,this.debugger=n}return t.prototype.display=function(t,e){return this.store.registerContainer(e,this.req.getContainer(t)),this},t.prototype.displayMulti=function(t,e){var r=this,n=t.map((function(t){return r.req.getContainer(t)})).filter((function(t){return null!==t}));return this.store.registerContainers(e,n),this},t.prototype.setDlvParam=function(t,e){return this.req.addRequestOption(n.setDlvParam(t,e)),this},t.prototype.setGamTargetingMap=function(t){return this.req.addRequestOption(n.setGamTargetingMap(t)),this},t.prototype.setTargetingBulk=function(t){return this.req.addRequestOption(n.setTargetingBulk(t)),this},t.prototype.setTargeting=function(t,e){return this.req.addRequestOption(n.setTargeting(t,e)),this},t.prototype.setTemplate=function(t,e){return this.setTemplateObj({k:t,v:e})},t.prototype.setInlineZoom=function(t){return this.setBehaviorObj({inline:{zoom:t}})},t.prototype.setOverlay=function(t){return this.setBehaviorObj({overlay:t})},t.prototype.setVideoParams=function(t){return this.setBehaviorObj({video:t})},t.prototype.setRewardEvents=function(t,e){return this.store.rewardHandler.setUnitEvents(t,e),this},t.prototype.setGpid=function(t){return this.req.addRequestOption(n.setGpid(t)),this},t.prototype.onRendered=function(t){return this.store.eventHandler.addRenderedHandler(t),this},t.prototype.send=function(){var t=this;if(!new i.DisplayIntervalManager(this.groupId).canDisplayAd())return new e.PromiseLike((function(t){return t()}));var n=(new a.SegmentLinks).getKV();n&&this.setTargetingBulk(n);var u=this.store.rewardHandler.getEventRegisteredUnitIds(s.RewardEvent.rewardedUnitGranted),d=this.store.rewardHandler.getUnitEventEmitDelayMs(s.RewardEvent.rewardedUnitSatisfied,u).filter((function(t){var e=t.unitId;return o.includes(u,e)}));return this.req.request(this.groupId,{rwdd_units:u.join(","),unit_skipafter:d.map((function(t){var e=t.unitId,r=t.delayMs;return e+":"+Math.floor(r/1e3)})).join(",")}).then((function(e){var n,i,s,o,a,u=new r.ReloadExt(t.store,t.req);null===(i=null===(n=t.debugger)||void 0===n?void 0:n.creative)||void 0===i||i.storeResponse(e),t.store.setResponse(null!==(a=null===(o=null===(s=t.debugger)||void 0===s?void 0:s.creative)||void 0===o?void 0:o.getOverrideResponse(e))&&void 0!==a?a:e,u)}))},t.prototype.setTemplateObj=function(t){return this.req.addResponseOption(n.setTemplate(t)),this},t.prototype.setBehaviorObj=function(t){return this.req.addResponseOption(n.setBehavior(t)),this},t.prototype.setDlvHost=function(t){return this.req.addRequestOption(n.setDlvHost(t)),this},t}();t.ChainCommand=u}));
fluctAdScript.mod.define("lib/googletag",["exports"],(function(o){"use strict";o.pushGoogleTagCmd=function(o){window.googletag=window.googletag||{cmd:[]};var g=window.googletag;g.cmd.push((function(){return o(g)}))}}));
fluctAdScript.mod.define("lib/command",["exports","./event_handler","./error","./promise","./fluct_sdk","./store","./ad_request","./context_builder","./reload","./chain","./googletag","./idext/loader","./idext/fluctuid"],(function(e,t,n,o,r,i,s,a,d,p,u,h,l){"use strict";function c(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var f=c(l),v=function(){function e(e){this.store=new i.Store,this.req=new s.Request,this.chains=[];var t=new d.ReloadExt(this.store,this.req.extend());this.fluctSDK=new r.FluctSdkExt(this.store,t),this.debugger=e}return e.prototype.loadByGroup=function(e,t){return void 0===t&&(t={}),new p.ChainCommand(this.store,this.req.extend(),e,this.debugger).setDlvHost(t.dlvHost).setTemplateObj(t.template).setBehaviorObj(t.behavior).send()},e.prototype.display=function(e,t){this.store.registerContainer(t,this.req.getContainer(e))},e.prototype.loadByGroupAndDisplay=function(e,t,n){var o=this;for(var r in void 0===n&&(n={}),this.loadByGroup(e,n).then((function(){for(var n in t)o.checkFrame(e,n)})),t)this.display(t[r],r)},e.prototype.setConfig=function(e){this.req.addRequestOption(a.setConfig(e))},e.prototype.enableEscapingIframe=function(){this.req.setShouldEscape(!0)},e.prototype.enablePpid=function(){new h.IdLoader(window).getFluctPPID().then((function(){}))},e.prototype.enablePpidIntegration=function(){var e=new h.IdLoader(window).getFluctPPID();u.pushGoogleTagCmd((function(t){e.then((function(e){if(e.ok){var n=e.itemMap[f.ID_KEY];void 0!==n&&n.length>0&&t.pubads().setPublisherProvidedId(n[0])}}))}))},e.prototype.requestAdByGroup=function(e){var t=new p.ChainCommand(new i.Store,this.req.extend(),e,this.debugger);return this.chains.push(t),t},e.prototype.setGamTargetingMap=function(e){this.req.addRequestOption(a.setGamTargetingMap(e))},e.prototype.setTargetingBulk=function(e){this.req.addRequestOption(a.setTargetingBulk(e))},e.prototype.setTargeting=function(e,t){this.req.addRequestOption(a.setTargeting(e,t))},e.prototype.setDlvParam=function(e,t){this.req.addRequestOption(a.setDlvParam(e,t))},e.prototype.setTemplate=function(e,t){this.req.addResponseOption(a.setTemplate({k:e,v:t}))},e.prototype.setInlineZoom=function(e){this.req.addResponseOption(a.setBehavior({inline:{zoom:e}}))},e.prototype.setOverlay=function(e){this.req.addResponseOption(a.setBehavior({overlay:e}))},e.prototype.setVideoParams=function(e){this.req.addResponseOption(a.setBehavior({video:e}))},e.prototype.setRewardEvents=function(e,t){this.store.rewardHandler.setUnitEvents(e,t)},e.prototype.setGpid=function(e){this.req.addRequestOption(a.setGpid(e))},e.prototype.checkFrame=function(e,o){var r,i=this.store.getFrame(o);if(!i)return(r=new n.PjsError("InvalidUnitId",new Error('unit id "'+o+'" have not loaded by group id: '+e))).notify(1),void t.GlobalEventHandler.handleRenderingFailed(r);i.wasLoadedBy(e)||((r=new n.PjsError("InvalidUnitId",new Error('unit id "'+o+'" have not loaded by group id: '+e))).notify(1),t.GlobalEventHandler.handleRenderingFailed(r))},e.prototype.reset=function(){this.chains=[]},e.prototype.send=function(){for(var e=[],t=0;t<this.chains.length;t++)e.push(this.chains[t].send());return o.PromiseLike.all(e)},e.prototype.invoke=function(e){try{return this.reset(),e(this),this.send()}finally{this.reset()}},e}(),y=function(){function e(e,t){this.command=new v(t);for(var n=0;n<e.length;n++)this.push(e[n])}return e.prototype.push=function(e){try{this.command.invoke(e)}catch(e){var o=new n.PjsError("RuntimeError",e);o.notify(1),t.GlobalEventHandler.handleRenderingFailed(o)}},e}();e.Command=v,e.CommandStore=y}));
fluctAdScript.mod.define("lib/debugger/debugger",["exports"],(function(t){"use strict";var e="DEBUG_MODE",r=function(){function t(t){this.storage=t,function(t){return"true"===t.getItem(e)}(t)&&this.load()}return t.prototype.load=function(){var t=this;window.fluctAdScript.mod.import("lib/debugger/creative").then((function(e){var r=e.CreativeDebuggerExt;t.creative=new r(t.storage)}))},t.prototype.setDebugMode=function(t){!function(t,r){r.setItem(e,t?"true":"false")}(t,this.storage)},t}();t.Debugger=r}));
fluctAdScript.mod.define("p",["./lib/command","./lib/event_handler","./lib/error","./lib/idext/idhub","./lib/idext/tankman","./lib/debugger/debugger"],(function(r,t,e,i,d,n){"use strict";try{!function(){var t=window.fluctAdScript;try{if(window.top.document)try{if(!t.idhub){var c=new i.IDHub;window.fluctAdScript.idhub=c,window.fluctAdScript.rtus_cb=c.getRtusExt().getCallback()}}catch(r){new e.PjsError("RuntimeError",r).notify(1)}sessionStorage&&!t.debugger&&(window.fluctAdScript.debugger=new n.Debugger(sessionStorage))}catch(r){}t.ppid_url&&d.instance.fire(t.ppid_url),t.cmd?t.cmd instanceof Array&&(window.fluctAdScript.cmd=new r.CommandStore(t.cmd,window.fluctAdScript.debugger)):window.fluctAdScript.cmd=new r.CommandStore([],window.fluctAdScript.debugger)}()}catch(r){var c=new e.PjsError("RuntimeError",r);c.notify(1),t.GlobalEventHandler.handleRenderingFailed(c)}}));
fluctAdScript.mod.getModule("p");