!function(e){"use strict";var t=document.currentScript,o="https://pdn.adingo.jp/";function r(e,t){var o=e.split("/");o.pop();for(var r=t.split("../"),i=r.length,n=0;n<i-1;n++)o.pop(),r.shift();return o.push(r[0].replace("./","")),o.join("/")}function i(e,t,o){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("link");i.href=e,i.rel="preload",i.as="script",r.appendChild(i);var n=0,p=function(){var i=document.createElement("script");i.async=!0,i.type="text/javascript",i.src=e;var a=function(){t()};i.onload=a,i.onreadystatechange=function(){var e=i.readyState;"loaded"!==e&&"complete"!==e||a()},i.onerror=function(){(n+=1)<3?p():o(new Error("Failed to load module from "+e))},r.appendChild(i)};p()}var n=function(){function e(){this.moduleMap={},this.exportedMap={},this.importQueueMap={},this.define.amd={}}return e.prototype.define=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=e[0];if(!(o in this.moduleMap)&&!(o in this.exportedMap)){var r,i,n=e[1];n instanceof Array?(i=n,r=e[2]):(i=[],r=n);var p={factory:r,dependencies:i},a=this.importQueueMap[o];if(a){for(var u=this.evalModule(o,p),d=0;d<a.length;d++){var c=a[d];c(u)}delete this.importQueueMap[o]}else this.moduleMap[o]=p}},e.prototype.import=function(e){var t=this,o=this.getModule("lib/promise").PromiseLike,r=this.getModule(e);return r?o.resolve(r):new o((function(o,r){t.importQueueMap[e]||(t.loadScript("p/7834ede/"+e+".js").catch((function(e){return r(e)})),t.importQueueMap[e]=[]),t.importQueueMap[e].push(o)}))},e.prototype.loadScript=function(e){return new(0,this.getModule("lib/promise").PromiseLike)((function(r,n){i(function(){if(!t)return o;if(URL){var e=new URL(t.src);return e.protocol+"//"+e.host+e.pathname.split("/").slice(0,-1).join("/")+"/"}return o}()+e,r,n)}))},e.prototype.popModule=function(e){var t=this.moduleMap[e];return delete this.moduleMap[e],t},e.prototype.getModule=function(e){var t=this.exportedMap[e];if(void 0!==t)return t;var o=this.popModule(e);return void 0!==o?this.evalModule(e,o):void 0},e.prototype.evalModule=function(e,t){for(var o={},i=[],n=0;n<t.dependencies.length;n++){var p=t.dependencies[n];if("exports"!==p){var a=r(e,p);i.push(this.getModule(a))}else i.push(o)}var u=t.factory.apply(t,i)||o;return this.exportedMap[e]=u,u},e}();window.fluctAdScript?window.fluctAdScript.mod||(window.fluctAdScript.mod=new n):window.fluctAdScript={mod:new n},e.ModuleLoader=n}({});
fluctAdScript.mod.define("lib/event_handler",["exports"],(function(e){"use strict";var r=function(){function e(){this.errorHandlers=[],this.renderedHandlers=[]}return e.prototype.addRenderedHandler=function(e){this.renderedHandlers.push(e)},e.prototype.addErrorHandler=function(e){this.errorHandlers.push(e)},e.prototype.handleRenderingFailed=function(e){for(var r=0;r<this.errorHandlers.length;r++)this.errorHandlers[r](e)},e.prototype.handleRendered=function(e){for(var r=0;r<this.renderedHandlers.length;r++)this.renderedHandlers[r](e)},e}(),n=new r;e.EventHandler=r,e.GlobalEventHandler=n}));
fluctAdScript.mod.define("lib/util",["exports"],(function(e){"use strict";var n=document.currentScript;function t(e){return e&&"object"==typeof e&&!Array.isArray(e)}function r(e,n,t){if(window.fetch)window.fetch(t,{method:"GET",mode:"no-cors",credentials:"include",cache:"no-store",keepalive:!0});else{var r=e.createElement("img");r.src=t,r.style.display="none !important",r.style.position="absolute",r.style.border="none",r.style.padding="0",r.style.margin="0",r.width=0,r.height=0,r.border="0",n.appendChild(r)}}function o(e){try{var n=e.parent;return n.document,e.top===n?n:o(n)}catch(n){return e}}function i(e,n){return n.querySelector('meta[name="'+e+'"]')}e.canWeUseSandboxIframe=function(e){if(-1!==e.indexOf("Trident"))return!1;if(-1!==e.indexOf("Edge"))return!1;if(-1!==e.indexOf("Firefox"))return!1;var n=e.match(/Chrome\/([^\s]+)/)||e.match(/CriOS\/([^\s]+)/);if(null!==n){var t=n[1].split(".");return!((o=parseInt(t[0],10))<58)}if(-1!==e.indexOf("Safari")){var r=e.match(/Version\/([^\s]+)/);if(null===r)return!1;var o;t=r[1].split(".");return!((o=parseInt(t[0],10))<11)&&(11!==o||!(parseInt(t[1],10)<1))}return!1},e.compose=function(e,n){return function(t){return n(e(t))}},e.createIframe=function(e,n){var t=document.createElement("iframe");return t.style.cssText="width: "+e+"; height: "+n+"; border: 0",t.src="about:blank",t},e.currentScript=n,e.escapeFromIframe=function(e){var n=function(){try{var e=window.frameElement;if(!e)return e;for(;e.ownerDocument.defaultView.frameElement;)e=e.ownerDocument.defaultView.frameElement;return e}catch(e){return null}}();return!!n&&(n.parentElement.insertBefore(e,n.nextSibling),n.style.display="none",!0)},e.findFriendlyTopWindow=o,e.getHref=function(e){try{return e.top.location.href}catch(n){return o(e).document.referrer}},e.getMeta=i,e.getMetaKeywords=function(e){var n={};return["keywords","news_keywords"].forEach((function(t){var r=i(t,e);if(r){var o=r.content.split(/,/).filter((function(e){return e.length<30}));if(o.length>30)return;n[t]=o}})),n},e.hasActualSize=function(e){return(0!==e.width||0!==e.height)&&(999!==e.width||999!==e.height)},e.includes=function(e,n){return-1!==e.indexOf(n)},e.isElementExistInTree=function(e){return!!e.ownerDocument&&e.ownerDocument.body.contains(e)},e.mergeObject=function(e,n){for(var t in n){var r=n[t];null!=r&&(e[t]=n[t])}return e},e.mergeObjectDeep=function e(n,r){if(t(n)&&t(r))for(var o in r){var i=r[o];null!=i&&(t(i)?(t(n[o])||(n[o]={}),e(n[o],r[o])):n[o]=r[o])}return n},e.postBeacon=function(e,n,t){var r=JSON.stringify(n);if(window.fetch)window.fetch(e,{method:"POST",mode:"cors",credentials:t?"include":"omit",cache:"no-store",keepalive:!0,headers:{"Content-Type":"application/json"},body:r});else{var o=new XMLHttpRequest;o.open("POST",e),o.setRequestHeader("Content-Type","application/json"),o.send(r)}},e.sendBeacon=r,e.sendIdToCookieMonster=function(e,n,t){var o="https://cs.adingo.jp/sync/?from="+encodeURIComponent(e)+"&id="+encodeURIComponent(n);r(t.document,t.document.body,o)},e.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"==e?n:3&n|8).toString(16)}))},e.wrapElement=function(e,n){n.parentElement.insertBefore(e,n),e.appendChild(n)}}));
fluctAdScript.mod.define("lib/logger",["exports","./util"],(function(e,n){"use strict";function r(e,r,o){!function(e,r,o,t){var c=t;c.useragent=navigator.userAgent,n.postBeacon("https://hs.adingo.jp/taglog",{kind:e,level:r,params:c},!1)}("PjsEvent",e,0,n.mergeObject({version:"7834ede52b6e7f45e444e3fc3debd1bfd214dfb1",script:(n.currentScript||{}).src},o))}function o(e,n){switch(e){case"Error":return console.error(n);case"Warn":return console.warn(n);case"Info":return console.info(n);case"Debug":return console.debug(n)}}function t(e,t,c,i){o(e,t),o(e,JSON.stringify(c)),i<=Math.random()||(r(e,0,c),function(e,r,o){window.fluctAdScript.mod.import("lib/datadog").then((function(t){t.logger[e.toLowerCase()](r,n.mergeObject({version:"7834ede52b6e7f45e444e3fc3debd1bfd214dfb1",script:(n.currentScript||{}).src},o))}))}(e,t,c))}e.debug=function(e,n,r){t("Debug",e,n,r)},e.error=function(e,n,r){t("Error",e,n,r)},e.info=function(e,n,r){t("Info",e,n,r)},e.log=t,e.warn=function(e,n,r){t("Warn",e,n,r)}}));
fluctAdScript.mod.define("lib/error",["exports","./logger"],(function(e,r){"use strict";function t(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var n=t(r),i=function(){function e(e,r){this.kind=e,this.inner=r}return e.prototype.notify=function(e){n.error(this.inner.message,{exception:this.pretty()},e)},e.prototype.pretty=function(){var e=this.inner;return{kind:this.kind,message:e.message,name:e.name,description:e.description,number:e.number,fileName:e.fileName||e.sourceURL,lineNumber:e.lineNumber||e.line,columnNumber:e.columnNumber,stack:e.stack}},e}();e.PjsError=i}));
fluctAdScript.mod.define("lib/promise",["exports","./event_handler","./error"],(function(t,n,e){"use strict";var i=function(){function t(t){var n=this;this.childList=[],this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this);var e=!1;try{t((function(t){e||(e=!0,n.resolve(t))}),(function(t){e||(e=!0,n.reject(t))}))}catch(t){this.reject(t)}}return t.resolve=function(n){return new t((function(t,e){return t(n)}))},t.reject=function(n){return new t((function(t,e){return e(n)}))},t.all=function(n){var e=n.pop();return e?e.then((function(e){return t.all(n).then((function(t){return t.push(e),t}))})):t.resolve([])},t.prototype.then=function(t){var n=this.clone();return this.pending?(n.chain(this.pending.value,t),n):(n.thenFn=t,n)},t.prototype.catch=function(t){var n=this.clone();return this.pending?(n.pending=this.pending,n):(n.catchFn=t,n)},t.prototype.resolve=function(n){if(n instanceof t)n.then(this.resolve).catch(this.reject);else{var e=this.thenFn;if(e)return delete this.thenFn,void this.chain(n,e);this.pending={value:n};for(var i=0;i<this.childList.length;i++){this.childList[i].resolve(n)}}},t.prototype.reject=function(t){var i=this,r=this.catchFn;if(r)return delete this.catchFn,void this.chain(t,r);setTimeout((function(){if(0===i.childList.length){var r=new e.PjsError("RuntimeError",function(t){return t instanceof Error?t:new Error(String(t))}(t));r.notify(1),n.GlobalEventHandler.handleRenderingFailed(r)}for(var o=0;o<i.childList.length;o++){i.childList[o].reject(t)}}),0)},t.prototype.chain=function(t,n){var e;try{e=n(t)}catch(t){return void this.reject(t)}this.resolve(e)},t.prototype.clone=function(){var n=new t((function(){}));return this.childList.push(n),n},t}();t.PromiseLike=i,t.delay=function(t){return new i((function(n){setTimeout((function(){return n()}),t)}))},t.never=function(){return new i((function(t){}))}}));
fluctAdScript.mod.define("lib/skadnetwork",["exports"],(function(n){"use strict";n.extractSkadnParams=function(n){if(!function(n){if(!n.skadn)return!0;return function(n){var a=n;if(!(a.skadn.version&&a.skadn.network&&a.skadn.campaign&&a.skadn.itunesitem&&a.skadn.nonce&&a.skadn.sourceapp&&a.skadn.timestamp&&a.skadn.signature))return!1;return!0}(n)}(n))return{};var a=n;if(!a.skadn)return{};var s={version:a.skadn.version,network:a.skadn.network,campaign:a.skadn.campaign,itunesitem:a.skadn.itunesitem,nonce:a.skadn.nonce,sourceapp:a.skadn.sourceapp,timestamp:a.skadn.timestamp,signature:a.skadn.signature};return{skadn:JSON.stringify(s)}}}));
fluctAdScript.mod.define("lib/fluct_sdk",["exports","./event_handler","./skadnetwork"],(function(e,t,n){"use strict";var r;function d(e){var t=document.createElement("iframe");t.setAttribute("src",e),document.body.appendChild(t),t.parentNode&&t.parentNode.removeChild(t),t=null}!function(e){e.ServerError="server_error",e.NoAds="no_ads",e.BadRequest="bad_request"}(r||(r={}));var o=function(){function e(e,t){this.isEnableHandlers=!1,this.store=e,this.reloader=t}return e.prototype.setResponse=function(e,t){var n={groupId:e,resp:t};this.store.setResponse(n,this.reloader)},e.prototype.enableFeaturesForSDK=function(t){"number"==typeof t.width&&"number"==typeof t.height&&(e.width=t.width,e.height=t.height),e.isSdk=!0,this.enableHandlers()},e.prototype.enableHandlers=function(){this.isEnableHandlers||(this.isEnableHandlers=!0,t.GlobalEventHandler.addRenderedHandler((function(e){var t=e.creative,r=n.extractSkadnParams(t),o=t.clicktrackers;o&&(r.clicktrackers=o.join(",")),0!==Object.keys(r).length?d("fluct://succeeded?"+function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(r)):d("fluct://succeeded")})),t.GlobalEventHandler.addErrorHandler((function(e){d("fluct://failed?code="+function(e){switch(e){case"NoCampaignFound":case"NoAd":return r.NoAds;case"BadRequestForDlv":case"InvalidUnitId":return r.BadRequest;default:return r.ServerError}}(e.kind))})))},e.getWidth=function(){return e.width},e.getHeight=function(){return e.height},e.getIsSdk=function(){return e.isSdk},e.isSdk=!1,e}();e.FluctSdkExt=o}));
fluctAdScript.mod.define("lib/tpl/1",["../fluct_sdk","../util"],(function(t,e){"use strict";function i(e,i){var n=function(e,i){if(t.FluctSdkExt.getIsSdk()&&t.FluctSdkExt.getWidth()&&t.FluctSdkExt.getHeight())return Math.min(t.FluctSdkExt.getWidth()/e.clientWidth,t.FluctSdkExt.getHeight()/e.clientHeight);switch(i){case"disable":return 1;case"parent":return e.parentElement.clientWidth/e.clientWidth;case"window":return e.ownerDocument.body.clientWidth/e.clientWidth}}(e,i);if(1!==n){e.style.transform="scale("+n+")",e.style.transformOrigin="top left",e.style.marginRight=parseInt(e.style.width,10)*(n-1)+"px",e.style.marginBottom=parseInt(e.style.height,10)*(n-1)+"px";var l=function(t,e){switch(e){case"disable":case"parent":return 0;case"window":return-t.getBoundingClientRect().left}}(e,i);0!==l&&(e.style.position="relative",e.style.left=l+"px"),t.FluctSdkExt.getIsSdk()&&t.FluctSdkExt.getWidth()&&t.FluctSdkExt.getHeight()&&(e.style.marginTop=(t.FluctSdkExt.getHeight()-e.clientHeight*n)/2+"px",e.style.marginLeft=(t.FluctSdkExt.getWidth()-e.clientWidth*n)/2+"px")}}return function(){function t(t){this.inlineParams=e.mergeObject({zoom:"disable",sticky:"disable",stickyTopMargin:0},t.inline||{})}return t.prototype.layout=function(t,e,n){var l=t.style;l.width=e+"px",l.height=n+"px",i(t,this.inlineParams.zoom)},t.prototype.apply=function(t,i){var n=this;if(!e.hasActualSize(i))return{};"window"===this.inlineParams.zoom&&e.escapeFromIframe(t);var l=i.width,r=i.height;return this.layout(t,l,r),"video_only"===this.inlineParams.sticky&&"vast"===i.creative_type?(window.fluctAdScript.mod.import("lib/tpl/1/sticky").then((function(e){e(t,n.inlineParams.stickyTopMargin)})),{}):{setHeight:function(e){r=e,n.layout(t,l,r)},setWidth:function(e){"string"==typeof e&&"fluid"===e.toLowerCase()?l=t.ownerDocument.documentElement.clientWidth:"number"==typeof e&&(l=e),n.layout(t,l,r)}}},t}()}));
fluctAdScript.mod.define("lib/legacy_template",["exports","./error","./logger"],(function(e,r,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var o=n(t);e.chooseCompatibleTemplate=function(e,t,n){var i='Detect unsupported template "'+t+"/"+n+'" on group '+e;if(o.warn(i,{msg:i},1),"default"===t){if(105===n)return[1,{}];if(112===n)return[2,{overlay:{prHeight:20}}];if(120===n)return[2,{}];if(121===n)return[2,{overlay:{prHeight:20}}];if(122===n)return[2,{overlay:{prHeight:30}}]}return"default-v2"===t?[1,{}]:"special"===t&&40===n?[1,{inline:{zoom:"window"}}]:(new r.PjsError("UnSupportedTemplate",new Error('Detect no compatibility template "'+t+"/"+n+'" on group '+e)).notify(1),[1,{}])}}));
fluctAdScript.mod.define("lib/template",["exports","./error","./promise","./tpl/1","./legacy_template","./util"],(function(e,t,r,n,o,i){"use strict";function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=l(n);function a(e,n,o){return 1===n?r.PromiseLike.resolve(new u.default(o)):window.fluctAdScript.mod.import("lib/tpl/"+n).then((function(t){return new t(o,e)})).catch((function(){return new t.PjsError("FailedFetchTemplate",new Error("Failed to fetch template api/"+n+" on group "+e)).notify(1),new u.default(o)}))}e.loadTemplate=function(e,t,r){if("api"!==t.k){var n=o.chooseCompatibleTemplate(e,t.k,t.v),l=n[0],u=n[1];return a(e,l,i.mergeObject(r,u))}return a(e,t.v,i.mergeObject(r,r))}}));
fluctAdScript.mod.define("lib/native",["exports","./util"],(function(t,n){"use strict";var e=function(){return(e=Object.assign||function(t){for(var n,e=1,i=arguments.length;e<i;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)};t.nativeRenderer=function(t,i,r){return window.fluctAdScript.mod.import("native/runtime").then((function(u){var o=u.main,a=n.uuid(),c=t.createElement("div");return c.id="fluct-nativertb-"+a,i.appendChild(c),o(e({mountpoints:[c],spAppArgs:{}},r.nativeObj)),!0}))}}));
fluctAdScript.mod.define("lib/sp_app_util",["exports"],(function(n){"use strict";var t="00000000-0000-0000-0000-000000000000";function a(n,t){-1!==navigator.userAgent.indexOf("Android")?n.nend_gaid=t:n.nend_idfa_raw=t}n.ZERO_FILLED_IFA=t,n.addParamsForADNW=function(n,t,r,i){!function(n,t,a){n.gvaIfa={ifa:"1"===t?"":a}}(n,t,r),""!==i&&function(n,t){n.fluctAdParam={bundle:t}}(n,i),""!==t&&""!==r&&(!function(n,t,a){n.fluctAdParam||(n.fluctAdParam={}),n.fluctAdParam.ifa=a,n.fluctAdParam.lmt=t}(n,t,r),function(n,t,a){n.zucksIdfa={ida:a,lat:t}}(n,t,r),function(n,t,a){n.adpressoIdfa={idfa:a,lat:Number(t)}}(n,t,r),function(n,t,a){var r=function(n){return"1"===n}(t);n.amoadOption={idfa:a,optout:r}}(n,t,r),function(n,t){n.imobile_dvid=t}(n,r),"0"===t&&a(n,r))},n.determineAdTracking=function(n,a,r){if(!function(n){return-1!==n.indexOf("iPhone")||-1!==n.indexOf("iPad")}(r))return n;var i=r.match(/OS ([^\s]+)/);if(null===i)return n;var e=i[1].split("_");return parseInt(e[0],10)<14?n:""!==a&&a!==t?"0":"1"},n.expandMacro=function(n,a,r){var i=t;"0"===a&&""!==r&&(i=r);var e={"%%FLUCT_IFA_PLACEHOLDER%%":i};return Object.keys(e).reduce((function(n,t){return n.replace(t,e[t])}),n)},n.replaceLmtIfBool=function(n){switch(n){case!0:return"1";case!1:return"0";default:return n}}}));
fluctAdScript.mod.define("lib/renderer",["exports","./util","./event_handler","./error","./promise","./native","./sp_app_util","./logger"],(function(e,r,t,n,a,i,o,l){"use strict";function c(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var d=c(l),s=["1000140184","1000139270","1000102882","1000142010","1000135805","1000132568","1000104440","1000123328"];function u(e,t,n,a,i){var l=r.createIframe("100%","100%");r.canWeUseSandboxIframe(navigator.userAgent)&&l.setAttribute("sandbox","allow-scripts allow-forms allow-pointer-lock allow-popups allow-same-origin allow-top-navigation-by-user-activation"),l.setAttribute("scrolling","no"),i&&(l.dataset.delayedTracking=""),t.appendChild(l);var c=l.contentWindow,d=n.html,s=window.fluctAdParam;if(s){var u=s.lmt||"",p=s.ifa||"",f=s.bundle||"";o.addParamsForADNW(c,u,p,f),d=o.expandMacro(d,u,p)}c.fluctAdModifier=a,c.fluctImpTracker=i||function(){};var v=c.document;d='<script type="text/javascript">var inDapIF=true;window.fluctImpTracker && window.fluctImpTracker();<\/script><body style="margin: 0;">'+d+"</body>",v.open(),v.write(d),v.close()}e.render=function(e,o,l,c,p,f){if(!r.isElementExistInTree(o)){var v='The Container for unit "'+l.unit_id+'" is already removed';return d.warn(v,{msg:v},.1),t.GlobalEventHandler.handleRenderingFailed(new n.PjsError("ContainerIsRemoved",new Error(v))),a.PromiseLike.resolve(!1)}switch(l.creative_type){case"html":var m=c.apply(o,l);if(r.includes(s,f)){return u(0,o,l,m,(function(){return r.sendBeacon(e,o,l.beacon)})),a.PromiseLike.resolve(!0)}return u(0,o,l,m),r.sendBeacon(e,o,l.beacon),a.PromiseLike.resolve(!0);case"image":return c.apply(o,l),function(e,r,t){var n=e.createElement("img");n.src=t.creative_url,n.alt=t.alt,n.width=parseInt(r.style.width,10),n.height=parseInt(r.style.height,10);var a=e.createElement("a");a.href=t.landing_url,a.target=t.target,a.rel="noopener noreferrer",a.appendChild(n),r.appendChild(a)}(e,o,l),r.sendBeacon(e,o,l.beacon),a.PromiseLike.resolve(!0);case"vast":return window.fluctAdScript.mod.import("lib/vast_renderer").then((function(r){return c.apply(o,l),r(e,o,l,p.video),!0}));case"native":return c.apply(o,l),i.nativeRenderer(e,o,l);case"none":return r.sendBeacon(e,o,l.beacon),t.GlobalEventHandler.handleRenderingFailed(new n.PjsError("NoAd",new Error("Unit "+l.unit_id+" has no ad"))),a.PromiseLike.resolve(!1);default:throw new Error("Detect unsupported creativ type: "+JSON.stringify(l))}}}));
fluctAdScript.mod.define("lib/frame",["exports","./template","./renderer","./promise"],(function(e,t,r,i){"use strict";var n=function(){function e(e,t){this.reservedContainerList=[],this.ads=[],this.behavior={},this.unitId=e,this.eventHandler=t}return e.prototype.useReloadExt=function(e){this.reloadExt=e},e.prototype.setResponse=function(e,r,n,o,s){this.templatePromise=s?i.PromiseLike.resolve(new s(n)):t.loadTemplate(e,r,n),this.groupId=e,this.behavior=n,this.ads.push(o),this.reservedContainerList.length>0&&this.render()},e.prototype.registerContainer=function(e){this.reservedContainerList.push(e),this.ads.length>0&&this.render()},e.prototype.render=function(){var e=this,t=this.ads.shift(),i=this.reservedContainerList.shift();this.templatePromise.then((function(n){return r.render(i.ownerDocument,i,t,n,e.behavior,e.groupId)})).then((function(r){r&&e.eventHandler.handleRendered({creative:t,container:i,groupId:e.groupId}),e.reloadIfNeeded(i)}))},e.prototype.reloadIfNeeded=function(e){if(this.behavior){var t=this.behavior.refreshRate;t&&0!==t&&this.reloadExt&&this.reloadExt.reload(this.groupId,this.unitId,e,t)}},e.prototype.wasLoadedBy=function(e){return this.groupId===e},e}();e.Frame=n}));
fluctAdScript.mod.define("lib/store",["exports","./frame","./util","./event_handler"],(function(e,t,r,n){"use strict";var a=function(){function e(){this.frames={},this.eventHandler=new n.EventHandler,this.eventHandler.addRenderedHandler((function(e){return n.GlobalEventHandler.handleRendered(e)})),this.eventHandler.addErrorHandler((function(e){return n.GlobalEventHandler.handleRenderingFailed(e)}))}return e.prototype.getFrame=function(e){return this.frames[e]},e.prototype.getOrCreateFrame=function(e){var r=this.getFrame(e);return r||(this.frames[e]=new t.Frame(e,this.eventHandler),this.frames[e])},e.prototype.setResponse=function(e,t){for(var n=e.resp,a=r.mergeObject(n.template,e.template||{}),i=r.mergeObjectDeep(n.behavior,e.behavior||{}),o=0;o<n.ads.length;o++){var s=n.ads[o],d=this.getOrCreateFrame(String(s.unit_id));d.useReloadExt(t),d.setResponse(e.groupId,a,i,s,e.externalTemplate)}},e.prototype.registerContainer=function(e,t){null!==t&&this.getOrCreateFrame(e).registerContainer(t)},e}();e.Store=a}));
fluctAdScript.mod.define("lib/context_builder",["exports","./util","./sp_app_util","./logger"],(function(t,e,n,r){"use strict";function u(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var i=u(r),o=function(){function t(t){this.target=t}return t.prototype.build=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;n++)t[n](this.target);return this.target},t}();var a=function(t){return function(e){e.keyValue?e.keyValue.merge(t):e.keyValue=new l(t)}},c=function(t,r){r.dlvParams&&(t.dlvParams=e.mergeObject(t.dlvParams,r.dlvParams),void 0!==t.dlvParams.lmt&&(t.dlvParams.lmt=n.replaceLmtIfBool(t.dlvParams.lmt)))},l=function(){function t(t){void 0===t&&(t={}),this.kv=t}return t.prototype.add=function(t,e){this.kv[t]?this.kv[t].push(e):this.kv[t]=[e]},t.prototype.merge=function(t){e.mergeObject(this.kv,t)},t.prototype.toString=function(){return JSON.stringify(this.kv)},t}();t.ContextBuilder=o,t.KeyValue=l,t.optionBuilder=function(t){return function(e){var n;return(n=new o(e)).build.apply(n,t),e}},t.setBehavior=function(t){return function(n){t&&(n.behavior=e.mergeObjectDeep(n.behavior||{},t))}},t.setConfig=function(t){return function(e){c(e,t)}},t.setDlvHost=function(t){return function(e){t&&(e.dlvHost=t)}},t.setDlvParam=function(t,e){return function(n){var r;c(n,{dlvParams:(r={},r[t]=e,r)})}},t.setExternalTemplate=function(t){return function(e){e.externalTemplate=t}},t.setGamTargetingMap=function(t){var e=function(){return{}};try{if("%%PATTERN:TARGETINGMAP%%"===t||"null"===t)return e;var n=JSON.parse(t);if("object"!=typeof n)throw"not an object";return a(n)}catch(n){var r="setGamTargetingMap("+t+") received bad JSON";return i.warn(r,{exception:n},1),e}},t.setID=function(t,e){return function(n){var r;e.length>0&&c(n,{dlvParams:(r={},r[t]=e.join(","),r)})}},t.setTargeting=function(t,e){return function(n){void 0===n.keyValue&&(n.keyValue=new l),n.keyValue.add(t,e)}},t.setTargetingBulk=a,t.setTemplate=function(t){return function(n){t&&(n.template=e.mergeObject(n.template||{},t))}}}));
fluctAdScript.mod.define("lib/fetch",["exports","./promise"],(function(t,e){"use strict";function n(t){return function(t,e,n){return t>=e&&t<=n}(t,200,299)}t.fetch=function(t){return new e.PromiseLike((function(e,o){var r=new XMLHttpRequest;r.open("GET",t,!0),r.withCredentials=!0,r.onload=function(){var t=r.status,o=n(t);e({body:r.responseText,status:t,ok:o})},r.onerror=function(){o(new Error("Failed to fetch "+t))},r.send()}))},t.is2xx=n}));
fluctAdScript.mod.define("lib/api",["exports","./fetch","./promise","./event_handler","./error","./util","./logger"],(function(e,t,r,n,o,a,i){"use strict";function c(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var s=c(i);function u(e,t,r){var n=Math.floor(1e14*Math.random()),o=encodeURIComponent(a.getHref(window)),i=function(e){var t=[];for(var r in e)t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}(r);return e+"/p/?G="+t+"&href="+o+"&serial="+n+"&guid=ON"+(i=i?"&"+i:"")}e.request=function(e,i,c){var f=u(e,i,c),d=0,l=function(e){return(d+=1)>=3?(n.GlobalEventHandler.handleRenderingFailed(new o.PjsError("ConnectionFailedForDlv",e)),r.never()):r.delay(500).then((function(){return t.fetch(f).catch(l)}))};return t.fetch(f).catch(l).then((function(e){if(!e.ok)throw new Error("Receive failure response status: "+e.status+', body: "'+e.body+'", from '+f);var t,r=e.body;try{t=JSON.parse(r)}catch(e){throw new Error('Failed to parse body as response of "'+f+'": "'+r+'"')}return function(e){var t=Object.keys(e),r=["ads","syncList","template","behavior","adStatus"].filter((function(e){return!a.includes(t,e)}));if(0!==r.length){var n="Fields "+JSON.stringify(r)+" are not found in response "+JSON.stringify(e);s.warn(n,{msg:n},1)}return{ads:e.ads||[],syncList:e.syncList||[],template:e.template||{k:"api",v:1},behavior:e.behavior||{},adStatus:e.adStatus||200}}(t)}))}}));
fluctAdScript.mod.define("lib/idext/idhub",["exports","../promise","../util"],(function(e,t,s){"use strict";var i;e.MessageID=void 0,(i=e.MessageID||(e.MessageID={}))[i._Blank=0]="_Blank",i[i.NoResponseRequired=1]="NoResponseRequired",i[i.CriteoRtusIDRequest=2]="CriteoRtusIDRequest",i[i.CriteoRtusIDResponse=3]="CriteoRtusIDResponse",i[i.CriteoRtusFireRequest=4]="CriteoRtusFireRequest",i[i.LiveRampEnvelopeRequest=5]="LiveRampEnvelopeRequest",i[i.LiveRampEnvelopeResponse=6]="LiveRampEnvelopeResponse",i[i.LiveRampEnvelopeFireRequest=7]="LiveRampEnvelopeFireRequest",i[i.IMUIDRequest=8]="IMUIDRequest",i[i.IMUIDResponse=9]="IMUIDResponse",i[i.IMUIDFireRequest=10]="IMUIDFireRequest",i[i.FluctUIDRequest=11]="FluctUIDRequest",i[i.FluctUIDResponse=12]="FluctUIDResponse",i[i.FluctUIDFireRequest=13]="FluctUIDFireRequest",i[i.FluctMetaRequest=14]="FluctMetaRequest",i[i.FluctMetaResponse=15]="FluctMetaResponse";var o=function(){function i(e){void 0===e&&(e=window),this.window=e,this.window.addEventListener("message",this.dispatch.bind(this))}return i.prototype.dispatch=function(t){var s=u(t.data);if(null!==s&&s.msgid)switch(s.msgid){case e.MessageID.CriteoRtusIDRequest:return this.handleCriteoRtusIDRequest(t,s);case e.MessageID.CriteoRtusFireRequest:return this.handleCriteoRtusFireRequest(t,s);case e.MessageID.LiveRampEnvelopeRequest:return this.handleLiveRampEnvelopeRequest(t,s);case e.MessageID.LiveRampEnvelopeFireRequest:return this.handleLiveRampEnvelopeFireRequest(t,s);case e.MessageID.IMUIDRequest:return this.handleIMUIDRequest(t,s);case e.MessageID.IMUIDFireRequest:return this.handleIMUIDFireRequest(t,s);case e.MessageID.FluctUIDRequest:return this.handleFluctUIDRequest(t,s);case e.MessageID.FluctUIDFireRequest:return this.handleFluctUIDFireRequest(t,s);case e.MessageID.FluctMetaRequest:return this.handleMeta(t,s)}},i.prototype.handleIDResponse=function(e,t,s){var i=this;s.then((function(s){s.ok?i.reply(e,r({msgid:t.responseMsgid,ok:!0,itemMap:s.itemMap})):i.reply(e,r({msgid:t.responseMsgid,ok:!1}))}))},i.prototype.reply=function(e,t){null!==e.source&&e.source.postMessage(t,"*")},i.prototype.handleCriteoRtusIDRequest=function(e,t){this.handleIDResponse(e,t,this.getRtusID())},i.prototype.handleCriteoRtusFireRequest=function(e,t){this.fireRtusID(t.opts)},i.prototype.handleLiveRampEnvelopeRequest=function(e,t){this.handleIDResponse(e,t,this.getLiveRampEnvelope())},i.prototype.handleLiveRampEnvelopeFireRequest=function(e,t){this.fireLiveRampEnvelope(t.opts)},i.prototype.handleIMUIDRequest=function(e,t){this.handleIDResponse(e,t,this.getIMUID())},i.prototype.handleIMUIDFireRequest=function(e,t){this.fireIMUID(t.opts)},i.prototype.handleFluctUIDRequest=function(e,t){this.handleIDResponse(e,t,this.getFluctUID())},i.prototype.handleFluctUIDFireRequest=function(e,t){this.fireFluctUID(t.opts)},i.prototype.handleMeta=function(e,s){this.handleIDResponse(e,s,t.PromiseLike.resolve(this.getMeta()))},i.prototype.getRtusID=function(){return this.window.fluctAdScript.rtus?this.window.fluctAdScript.rtus.getIDs():t.PromiseLike.resolve({ok:!1})},i.prototype.fireRtusID=function(e){return this.window.fluctAdScript.rtus?this.window.fluctAdScript.rtus.fireIDs(e):t.PromiseLike.resolve({ok:!1})},i.prototype.getLiveRampEnvelope=function(){return this.window.fluctAdScript.liveramp?this.window.fluctAdScript.liveramp.getIDs():t.PromiseLike.resolve({ok:!1})},i.prototype.fireLiveRampEnvelope=function(e){return this.window.fluctAdScript.liveramp?this.window.fluctAdScript.liveramp.fireIDs(e):t.PromiseLike.resolve({ok:!1})},i.prototype.getIMUID=function(){return this.window.fluctAdScript.imuid?this.window.fluctAdScript.imuid.getIDs():t.PromiseLike.resolve({ok:!1})},i.prototype.fireIMUID=function(e){return this.window.fluctAdScript.imuid?this.window.fluctAdScript.imuid.fireIDs(e):t.PromiseLike.resolve({ok:!1})},i.prototype.getFluctUID=function(){return this.window.fluctAdScript.fluct_uid?this.window.fluctAdScript.fluct_uid.getIDs():t.PromiseLike.resolve({ok:!1})},i.prototype.fireFluctUID=function(e){return this.window.fluctAdScript.fluct_uid?this.window.fluctAdScript.fluct_uid.fireIDs(e):t.PromiseLike.resolve({ok:!1})},i.prototype.getMeta=function(){try{var e=this.window.top.document;return{ok:!0,itemMap:s.getMetaKeywords(e)}}catch(e){return{ok:!1}}},i}(),u=function(e){return e&&"object"==typeof e&&e["fluct-idhub-message"]&&"object"==typeof e["fluct-idhub-message"]?e["fluct-idhub-message"]:null},r=function(e){var t;return(t={})["fluct-idhub-message"]=e,t};e.IDHub=o,e.buildIDHubMessage=r,e.extractIDHubMessage=u}));
fluctAdScript.mod.define("lib/syncer",["exports","./util","./error","./idext/idhub"],(function(t,e,n,i){"use strict";function r(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var s=r(i),o=function(){function t(t){this.info=t}return t.prototype.sync=function(t,n){e.sendBeacon(n,n.body,this.info.src)},t}(),c=function(){function t(t){this.syncInfo=t}return t.prototype.sync=function(t,e){var n=e.createElement("iframe");n.setAttribute("src",this.syncInfo.src),n.setAttribute("style","display:none !important;position:absolute;border:none;padding:0;margin:0;"),n.setAttribute("width","0"),n.setAttribute("height","0"),n.setAttribute("border","0"),e.body.appendChild(n)},t}(),u=function(){function t(t){this.syncInfo=t}return t.prototype.sync=function(t,n){var i=e.createIframe("0px","0px");n.body.appendChild(i);var r=i.contentWindow.document,s='<body style="margin: 0"><script type="text/javascript">var inDapIF=true;<\/script><script type="text/javascript">'+this.syncInfo.src+"<\/script></body>";r.open(),r.write(s),r.close()},t}(),p=function(){function t(t){this.tagInfo=t}return t.prototype.sync=function(t,e){t.fluctAdScript.rtus?t.fluctAdScript.rtus.fireIDs(this.tagInfo.opts):t.top.postMessage(s.buildIDHubMessage({msgid:s.MessageID.CriteoRtusFireRequest,opts:this.tagInfo.opts}),"*")},t}(),f=function(){function t(t){this.tagInfo=t}return t.prototype.sync=function(t,e){t.fluctAdScript.liveramp?t.fluctAdScript.liveramp.fireIDs(this.tagInfo.opts):t.top.postMessage(s.buildIDHubMessage({msgid:s.MessageID.LiveRampEnvelopeFireRequest,opts:this.tagInfo.opts}),"*")},t}(),a=function(){function t(t){this.tagInfo=t}return t.prototype.sync=function(t,e){t.fluctAdScript.imuid?t.fluctAdScript.imuid.fireIDs(this.tagInfo.opts):t.top.postMessage(s.buildIDHubMessage({msgid:s.MessageID.IMUIDFireRequest,opts:this.tagInfo.opts}),"*")},t}(),d=function(){function t(t){this.tagInfo=t}return t.prototype.sync=function(t,e){t.fluctAdScript.fluct_uid?t.fluctAdScript.fluct_uid.fireIDs(this.tagInfo.opts):t.top.postMessage(s.buildIDHubMessage({msgid:s.MessageID.FluctUIDFireRequest,opts:this.tagInfo.opts}),"*")},t}(),l=function(){function t(t){this.info=t}return t.prototype.sync=function(t,e){new n.PjsError("NotImplemented",new Error("not implemented sync type: "+this.info.type)).notify(1)},t}();t.getSyncer=function(t){switch(t.type){case"img":return new o(t);case"iframe":return new c(t);case"script":return new u(t);case"rtus":return new p(t);case"lrenv":return new f(t);case"imuid":return new a(t);case"fluct_uid":return new d(t);default:return new l(t)}}}));
fluctAdScript.mod.define("lib/idext/rtus",["exports","../promise","../util"],(function(t,e,r){"use strict";var i="rtusId",o="criteo_rtus",s=function(){function t(){this.fired=!1,this.resolve=function(t){}}return t.prototype.getIDs=function(){return new e.PromiseLike((function(t){var e,r;try{r=localStorage.getItem(i)}catch(t){}t(r?{ok:!0,itemMap:(e={},e[o]=[r],e)}:{ok:!1})}))},t.prototype.fireIDs=function(t){var r,o=this;if(this.fired)return e.PromiseLike.resolve({ok:!1});this.fired=!0;try{r=localStorage.getItem(i)}catch(t){}return r?e.PromiseLike.resolve({ok:!1}):new e.PromiseLike((function(t){o.resolve=t;var e=document.createElement("script");e.async=!0,e.type="text/javascript",e.src="https://gum.criteo.com/sync?c=167&r=2&gdpr=0&j=fluctAdScript.rtus.cb",document.head.appendChild(e)}))},t.prototype.cb=function(t){var e;if("OK"===t.status){try{localStorage.setItem(i,t.userid);var s=window;r.sendIdToCookieMonster("criteo_rtus",t.userid,s)}catch(t){}this.resolve({ok:!0,itemMap:(e={},e[o]=[t.userid],e)})}else this.resolve({ok:!1})},t}();t.CriteoRtusExt=s,t.ID_KEY=o}));
fluctAdScript.mod.define("lib/idext/liveramp",["exports","../promise"],(function(e,t){"use strict";var r=function(){return(r=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o="fluct-lrenv",i="lrenv",n=function(){function e(e){void 0===e&&(e=window),this.fired=!1,this.w=e}return e.prototype.getIDs=function(){var e,r=this.getEnvelopeFromStorage();return r?t.PromiseLike.resolve({ok:!0,itemMap:(e={},e.lrenv=[r],e)}):t.PromiseLike.resolve({ok:!1})},e.prototype.fireIDs=function(e){var r,o=this;if(this.fired)return t.PromiseLike.resolve({ok:!1});this.fired=!0;var i=this.getEnvelopeFromStorage();return i?t.PromiseLike.resolve({ok:!0,itemMap:(r={},r.lrenv=[i],r)}):new t.PromiseLike((function(e){try{var t=o.w.ats||o.w.top.ats;if(t)return void t.retrieveEnvelope(o.getCallback(e));e({ok:!1})}catch(t){e({ok:!1})}}))},e.prototype.getCallback=function(e){var t=this;return function(r){var o;if(void 0!==r){var i=null;try{i=JSON.parse(r)}catch(e){}if(i&&i.envelope){try{t.setEnvelopeToStorage(i)}catch(e){}e({ok:!0,itemMap:(o={},o.lrenv=[i.envelope],o)})}else e({ok:!1})}else e({ok:!1})}},e.prototype.setEnvelopeToStorage=function(e){var t=Date.now();e.timestamp||(e.timestamp=t);var i=r(r({},e),{ver:"1.0",expiration:t+864e5});try{this.w.localStorage.setItem(o,JSON.stringify(i))}catch(e){}},e.prototype.getEnvelopeFromStorage=function(){var e=null;try{e=this.w.localStorage.getItem(o)}catch(e){}if(!e)return null;var t=JSON.parse(e);if(!t||!t.envelope||!t.ver||"1.0"!==t.ver||!t.expiration||t.expiration<Date.now()){try{this.w.localStorage.removeItem(o)}catch(e){}return null}return t.envelope},e}();e.ID_KEY=i,e.LiveRampExt=n}));
fluctAdScript.mod.define("lib/idext/imuid",["exports","../promise","../util"],(function(t,i,e){"use strict";var r=function(){return(r=Object.assign||function(t){for(var i,e=1,r=arguments.length;e<r;e++)for(var a in i=arguments[e])Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);return t}).apply(this,arguments)},a="imPmt6837",o="fluct-imuid",s="imuid",n="imsids",g=["NbE0o3km","7kGVPm8x","VgxADo8W","2b6oZGgG","Ok0KEQ8D","58rA1LgB","qkVvpGk9","LkaanXk1","X8KR3xgB","p8JJZo8m","DkR5pQ81","EbjQARkD","pb950Rbv","EkWNP289","YboAra84","lg773Bgp","6bQQqBbM","Mg5WaGkq","Q8Ym3L8d","0bnqXqkR","LbM97KbJ","LgAEYeg4","EgdRQAka","xkD6AYgm","J8BGERka","Lb3jXWkN","38pAp9kD","EkXzywgm","A8ZEmGgE","DgLjpGkM","NgwAqPkL","YklYxXbJ","9gqA3lga","xgP7q9bl","ekypO38j","ebejz4gv","8YqlNl18","8BVAGAe8","ky1ee4Dk","kG3NNVyk","kmlmqNY8","kG3NvDpk","ka6ee4eb","k2AEDQj8","8zY92P4g","gO5lGpdk","k1GmZLwg","g7VrxvDb","klD423Dk","gvqKoW0b","gPKlZXXb","gvqK5pNb","gO5rENWk","gLqlAGK8","gO5l6Zrk","gvqKDVKb","gwrJp2Ab","klD4Z5rk","gO5lVLrk","kXDlepKk","8BVQJV28","kG3ADPak","gxQR02D8","b6N0LXXb","k034al38","8rN04qW8","k2AE7308","gO5lMW7k","gvqKxw0b","8NqlP7pg","g4OxX35b","kV0yEK3g","ka6l9VGb","8Kql9zQb","8JAqo71g","kR3lvE4b","bjov9EZg","b9EalLXb","kWJlGjp8","bo2zOp9k","g7VrnX7b","bQAlO79b","g5r63vp8","8Yql6PR8","bnDE2Ye8","bEznRXqg","b6N0LBwb","k034aWj8","8rN04OB8"].reduce((function(t,i){var e;return r(r({},t),((e={})[i]=!0,e))}),{}),l=function(){function t(t){void 0===t&&(t=window),this.w=e.findFriendlyTopWindow(t),this.w.__im_uid_callback=this.setUIDToStorage.bind(this),this.w.__im_sids_callback=this.setSIDSToStorage.bind(this)}return t.prototype.getIDs=function(){var t=this.getDataFromWindow();if(t)return i.PromiseLike.resolve({ok:!0,itemMap:t});var e=this.getDataFromStorage();return e?i.PromiseLike.resolve({ok:!0,itemMap:e}):i.PromiseLike.resolve({ok:!1})},t.prototype.fireIDs=function(t){var e=this,r=this.getDataFromWindow();if(r){try{this.setDataToStorage(r)}catch(t){}return i.PromiseLike.resolve({ok:!0,itemMap:r})}return new i.PromiseLike((function(t){if(e.w.document.getElementById(a))t({ok:!1});else{var i=e.w.document.createElement("script");i.id=a,i.async=!0,i.type="text/javascript",i.src="https://dmp.im-apps.net/pms/r7RdVKlj/pmt.js",i.dataset.uidCallback="__im_uid_callback",i.dataset.sidsCallback="__im_sids_callback";try{e.w.document.head.appendChild(i)}catch(t){}t({ok:!1})}}))},t.prototype.setUIDToStorage=function(t){var i;if("string"==typeof t){var r=t,a=this.getDataFromStorage();a?a.imuid=[r]:((i={}).imuid=[r],i.imsids=[],a=i),this.setDataToStorage(a),e.sendIdToCookieMonster("imuid",r,this.w)}},t.prototype.setSIDSToStorage=function(t){var i;if(Array.isArray(t)){var e=t.filter(this.filterSIDS),r=this.getDataFromStorage();r?r.imsids=e:((i={}).imuid=[],i.imsids=e,r=i),this.setDataToStorage(r)}},t.prototype.setDataToStorage=function(t){var i=Date.now(),e=JSON.stringify({itemMap:t,ver:"2.0",timestamp:i,expiration:i+864e5});try{this.w.localStorage.setItem(o,e)}catch(t){}},t.prototype.getDataFromStorage=function(){var t=null;try{t=this.w.localStorage.getItem(o)}catch(t){}if(!t)return null;var i=JSON.parse(t);if(!i||!i.itemMap||!i.ver||"2.0"!==i.ver||!i.expiration||i.expiration<Date.now()){try{this.w.localStorage.removeItem(o)}catch(t){}return null}return i.itemMap},t.prototype.getDataFromWindow=function(){var t,i="",e=[];return"string"==typeof this.w.__im_uid_6837&&(i=this.w.__im_uid_6837),Array.isArray(this.w.__im_sids_6837)&&(e=this.w.__im_sids_6837.filter(this.filterSIDS)),i?((t={}).imuid=[i],t.imsids=e,t):null},t.prototype.filterSIDS=function(t){return g[String(t)]},t}();t.ID_KEY=s,t.IMUIDExt=l,t.SIDS_KEY=n}));
fluctAdScript.mod.define("lib/idext/fluctuid",["exports","../promise","../util"],(function(t,e,r){"use strict";var i="fluctUID",o="fluct_uid",n=function(){function t(){this.fired=!1}return t.prototype.getIDs=function(){return new e.PromiseLike((function(t){var e,r;try{r=localStorage.getItem(i)}catch(t){}t(r?{ok:!0,itemMap:(e={},e[o]=[r],e)}:{ok:!1})}))},t.prototype.fireIDs=function(t){var n,u=this;if(this.fired)return e.PromiseLike.resolve({ok:!1});this.fired=!0;try{n=localStorage.getItem(i)}catch(t){}return n?e.PromiseLike.resolve({ok:!1}):new e.PromiseLike((function(t){var e,n=u.generateFluctUID(null);try{localStorage.setItem(i,n);var c=window;r.sendIdToCookieMonster("fluct_uid",n,c)}catch(t){}t({ok:!0,itemMap:(e={},e[o]=[n],e)})}))},t.prototype.generateFluctUID=function(t){return null!=t?t:r.uuid()},t}();t.FluctUIDExt=n,t.ID_KEY=o}));
fluctAdScript.mod.define("lib/idext/loader",["exports","../promise","../context_builder","../util","./idhub","./rtus","./liveramp","./imuid","./fluctuid"],(function(e,t,i,n,o,r,s,u,c){"use strict";function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var p=a(o),d=a(r),I=a(s),f=a(u),l=a(c);function D(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||t)}var g=function(){function e(e){void 0===e&&(e=window),this.window=e}return e.prototype.loadIds=function(){var e=this;return t.PromiseLike.all([this.getRtusID(),this.getLiveRampEnvelope(),this.getIMUID(),this.getFluctUID(),this.getMeta()]).then((function(t){return e.buildOpts(t)}))},e.prototype.buildOpts=function(e){return e.reduce((function(e,t){return D(D([],e),t)}),[])},e.prototype.getMeta=function(){var e=this;return new t.PromiseLike((function(o){(function(){try{var i=e.window.top.document,o={ok:!0,itemMap:n.getMetaKeywords(i)};return t.PromiseLike.resolve(o)}catch(e){}return e.getRemoteIDs(p.MessageID.FluctMetaRequest,p.MessageID.FluctMetaResponse)})().then((function(e){e.ok&&Object.keys(e.itemMap).length>0?o([i.setTargetingBulk(e.itemMap)]):o([])}))}))},e.prototype.getRtusID=function(){var e=this;return new t.PromiseLike((function(t){(e.window.fluctAdScript.rtus?e.window.fluctAdScript.rtus.getIDs():e.getRemoteIDs(p.MessageID.CriteoRtusIDRequest,p.MessageID.CriteoRtusIDResponse)).then((function(e){e.ok?t([i.setID(d.ID_KEY,e.itemMap[d.ID_KEY])]):t([])}))}))},e.prototype.getLiveRampEnvelope=function(){var e=this;return new t.PromiseLike((function(t){(e.window.fluctAdScript.liveramp?e.window.fluctAdScript.liveramp.getIDs():e.getRemoteIDs(p.MessageID.LiveRampEnvelopeRequest,p.MessageID.LiveRampEnvelopeResponse)).then((function(e){e.ok?t([i.setID(I.ID_KEY,e.itemMap[I.ID_KEY])]):t([])}))}))},e.prototype.getIMUID=function(){var e=this;return new t.PromiseLike((function(t){(e.window.fluctAdScript.imuid?e.window.fluctAdScript.imuid.getIDs():e.getRemoteIDs(p.MessageID.IMUIDRequest,p.MessageID.IMUIDResponse)).then((function(e){var n;if(e.ok){var o=[];return f.ID_KEY in e.itemMap&&o.push(i.setID(f.ID_KEY,e.itemMap[f.ID_KEY])),f.SIDS_KEY in e.itemMap&&e.itemMap[f.SIDS_KEY].length>0&&o.push(i.setTargetingBulk(((n={})[f.SIDS_KEY]=e.itemMap[f.SIDS_KEY],n))),void t(o)}t([])}))}))},e.prototype.getFluctUID=function(){var e=this;return new t.PromiseLike((function(t){(e.window.fluctAdScript.fluct_uid?e.window.fluctAdScript.fluct_uid.getIDs():e.getRemoteIDs(p.MessageID.FluctUIDRequest,p.MessageID.FluctUIDResponse)).then((function(e){e.ok?t([i.setID(l.ID_KEY,e.itemMap[l.ID_KEY])]):t([])}))}))},e.prototype.getRemoteIDs=function(e,i){var n=this;return new t.PromiseLike((function(o){var r=function(e){var t=p.extractIDHubMessage(e.data);t&&t.msgid===i&&(t.ok?o({itemMap:t.itemMap,ok:!0}):o({ok:!1}),n.window.removeEventListener("message",r))};n.window.addEventListener("message",r,!1),n.window.top.postMessage(p.buildIDHubMessage({msgid:e,responseMsgid:i}),"*"),t.delay(100).then((function(){n.window.removeEventListener("message",r),o({ok:!1})}))})).catch((function(){return{ok:!1}}))},e}();e.IdLoader=g}));
fluctAdScript.mod.define("lib/ad_domain",["exports","./api","./sp_app_util","./syncer","./event_handler","./error","./idext/loader","./context_builder","./util"],(function(e,n,r,t,a,i,d,o,u){"use strict";var s="https://sh.adingo.jp",l="data-fluct-ad-script-already-reserved",c=function(e,c){var h=this;void 0===e&&(e=window),void 0===c&&(c=document),this.handleRequest=function(e){return h.shareDeviceInfo(e),h.idLoader.loadIds().then((function(n){var r=new o.ContextBuilder(e);r.build.apply(r,n)})).then((function(){var r=e.dlvHost||s,t=f(e);return n.request(r,e.groupId,t)})).then((function(n){return{groupId:e.groupId,resp:n}}))},this.shareDeviceInfo=function(e){var n=e.dlvParams.ifa||"",t=r.determineAdTracking(e.dlvParams.lmt||"",n,navigator.userAgent);r.addParamsForADNW(h.window,t,n,e.dlvParams.bundle||"")},this.handleResponse=function(e){var n=e.resp;return h.handleSync(n),h.handleStatus(e),e},this.handleSync=function(e){for(var n=e.syncList,r=0;r<n.length;r++){var a=n[r];t.getSyncer(a).sync(h.window,h.document)}},this.handleStatus=function(e){var n=e.resp,r=e.groupId;if(400<=n.adStatus&&n.adStatus<500){var t=new Error("Receive failure response adStatus: "+JSON.stringify(n)+", on group id "+r);a.GlobalEventHandler.handleRenderingFailed(new i.PjsError("BadRequestForDlv",t))}if(500<=n.adStatus&&n.adStatus<600)throw new Error("Receive failure response adStatus: "+JSON.stringify(n)+", on group id "+r);204===n.adStatus&&(t=new i.PjsError("NoCampaignFound",new Error("No campaign settiing was found by given group id: "+r)),a.GlobalEventHandler.handleRenderingFailed(t))},this.getContainer=function(e,n){var r=v(h.document,e);if(null===r){var t=new i.PjsError("NotFoundContainer",new Error("Could not find container with selector: "+e));return t.notify(.001),a.GlobalEventHandler.handleRenderingFailed(t),null}return r.setAttribute(l,""),!0===n&&u.escapeFromIframe(r),r},this.window=e,this.document=c,this.idLoader=new d.IdLoader(e)},v=function(e,n){for(var r=e.querySelectorAll(n),t=0;t<r.length;t++){var a=r[t];if(null===a.getAttribute(l))return a}return null},f=function(e){return e.keyValue?u.mergeObject({kv:e.keyValue.toString()},e.dlvParams):e.dlvParams};e.AdDomain=c,e.DEFAULT_HOST=s}));
fluctAdScript.mod.define("lib/ad_request",["exports","./context_builder","./util","./ad_domain"],(function(t,e,o,s){"use strict";var i=["2"].join(","),n=["2","5","3","6"].sort().join(","),r=["application/javascript","video/mp4","video/ogg","video/webm"].sort().join(","),p=function(){function t(t){this.base=t,this.reqOpts=[],this.resOpts=[],this.domain=new s.AdDomain}return t.prototype.extend=function(){return new t(this)},t.prototype.addRequestOption=function(){for(var t,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];(t=this.reqOpts).push.apply(t,e)},t.prototype.addResponseOption=function(){for(var t,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];(t=this.resOpts).push.apply(t,e)},t.prototype.context=function(t){var e={groupId:t,dlvParams:{api:i,protocols:n,mimes:r}};return this.requestBuilder()(e)},t.prototype.requestBuilder=function(){var t=e.optionBuilder(this.reqOpts);return this.base?o.compose(this.base.requestBuilder(),t):t},t.prototype.responseBuilder=function(){var t=e.optionBuilder(this.resOpts);return this.base?o.compose(this.base.responseBuilder(),t):t},t.prototype.request=function(t){var e=this.context(t);return this.domain.handleRequest(e).then(this.responseBuilder()).then(this.domain.handleResponse)},t.prototype.getShouldEscape=function(){return!0===this.shouldEscape||!!this.base&&this.base.getShouldEscape()},t.prototype.setShouldEscape=function(t){this.shouldEscape=t},t.prototype.getContainer=function(t){return this.domain.getContainer(t,this.getShouldEscape())},t}();t.Request=p}));
fluctAdScript.mod.define("lib/viewable",["exports"],(function(e){"use strict";e.onChangeViewability=function(e,n){if(window.mraid){var i,t=function(e){var t;void 0!==(t=0!==e)&&i!==t&&(i=t,n(t))};return window.mraid.addEventListener("exposureChange",t),{stop:function(){window.mraid.removeEventListener("exposureChange",t),window.mraid.fluctExt&&"function"==typeof window.mraid.fluctExt.refresh&&window.mraid.fluctExt.refresh()}}}if(!window.IntersectionObserver)return n(!0),{stop:function(){}};var r,o=new IntersectionObserver((function(e){for(var i,t=0;t<e.length;t++){i=!!e[t].isIntersecting}void 0!==i&&r!==i&&(r=i,n(i))}));return o.observe(e),{stop:function(){return o.disconnect()}}}}));
fluctAdScript.mod.define("lib/reload",["exports","./viewable"],(function(e,t){"use strict";var n=function(){function e(e,t){this.store=e,this.req=t}return e.prototype.reload=function(e,n,o,i){var r,s=this;this.req.request(e).then((function(e){s.store.setResponse(e,s)}));var a=Date.now(),u=1e3*i,c=t.onChangeViewability(o,(function(e){if(e)return a=Date.now(),void(r=window.setTimeout((function(){c.stop(),o.innerHTML="",s.store.getOrCreateFrame(n).registerContainer(o)}),u));u-=Date.now()-a,window.clearTimeout(r)}))},e}();e.ReloadExt=n}));
fluctAdScript.mod.define("lib/chain",["exports","./reload","./context_builder"],(function(t,e,r){"use strict";var n=function(){function t(t,e,r){this.store=t,this.req=e,this.groupId=r}return t.prototype.display=function(t,e){return this.store.registerContainer(e,this.req.getContainer(t)),this},t.prototype.setDlvParam=function(t,e){return this.req.addRequestOption(r.setDlvParam(t,e)),this},t.prototype.setGamTargetingMap=function(t){return this.req.addRequestOption(r.setGamTargetingMap(t)),this},t.prototype.setTargetingBulk=function(t){return this.req.addRequestOption(r.setTargetingBulk(t)),this},t.prototype.setTargeting=function(t,e){return this.req.addRequestOption(r.setTargeting(t,e)),this},t.prototype.setTemplate=function(t,e){return this.setTemplateObj({k:t,v:e})},t.prototype.setInlineZoom=function(t){return this.setBehaviorObj({inline:{zoom:t}})},t.prototype.setOverlay=function(t){return this.setBehaviorObj({overlay:t})},t.prototype.setVideoParams=function(t){return this.setBehaviorObj({video:t})},t.prototype.setExternalTemplate=function(t){return this.req.addResponseOption(r.setExternalTemplate(t)),this},t.prototype.onRendered=function(t){return this.store.eventHandler.addRenderedHandler(t),this},t.prototype.send=function(){var t=this;return this.req.request(this.groupId).then((function(r){var n=new e.ReloadExt(t.store,t.req);t.store.setResponse(r,n)}))},t.prototype.setTemplateObj=function(t){return this.req.addResponseOption(r.setTemplate(t)),this},t.prototype.setBehaviorObj=function(t){return this.req.addResponseOption(r.setBehavior(t)),this},t.prototype.setDlvHost=function(t){return this.req.addRequestOption(r.setDlvHost(t)),this},t}();t.ChainCommand=n}));
fluctAdScript.mod.define("lib/command",["exports","./event_handler","./error","./promise","./fluct_sdk","./store","./ad_request","./context_builder","./reload","./chain"],(function(t,e,n,o,r,i,s,a,d,p){"use strict";var h=function(){function t(){this.store=new i.Store,this.req=new s.Request,this.chains=[];var t=new d.ReloadExt(this.store,this.req.extend());this.fluctSDK=new r.FluctSdkExt(this.store,t)}return t.prototype.loadByGroup=function(t,e){return void 0===e&&(e={}),new p.ChainCommand(this.store,this.req.extend(),t).setDlvHost(e.dlvHost).setTemplateObj(e.template).setBehaviorObj(e.behavior).send()},t.prototype.display=function(t,e){this.store.registerContainer(e,this.req.getContainer(t))},t.prototype.loadByGroupAndDisplay=function(t,e,n){var o=this;for(var r in void 0===n&&(n={}),this.loadByGroup(t,n).then((function(){for(var n in e)o.checkFrame(t,n)})),e)this.display(e[r],r)},t.prototype.setConfig=function(t){this.req.addRequestOption(a.setConfig(t))},t.prototype.enableEscapingIframe=function(){this.req.setShouldEscape(!0)},t.prototype.requestAdByGroup=function(t){var e=new p.ChainCommand(new i.Store,this.req.extend(),t);return this.chains.push(e),e},t.prototype.setGamTargetingMap=function(t){this.req.addRequestOption(a.setGamTargetingMap(t))},t.prototype.setTargetingBulk=function(t){this.req.addRequestOption(a.setTargetingBulk(t))},t.prototype.setTargeting=function(t,e){this.req.addRequestOption(a.setTargeting(t,e))},t.prototype.setDlvParam=function(t,e){this.req.addRequestOption(a.setDlvParam(t,e))},t.prototype.setTemplate=function(t,e){this.req.addResponseOption(a.setTemplate({k:t,v:e}))},t.prototype.setInlineZoom=function(t){this.req.addResponseOption(a.setBehavior({inline:{zoom:t}}))},t.prototype.setOverlay=function(t){this.req.addResponseOption(a.setBehavior({overlay:t}))},t.prototype.setVideoParams=function(t){this.req.addResponseOption(a.setBehavior({video:t}))},t.prototype.checkFrame=function(t,o){var r,i=this.store.getFrame(o);if(!i)return(r=new n.PjsError("InvalidUnitId",new Error('unit id "'+o+'" have not loaded by group id: '+t))).notify(1),void e.GlobalEventHandler.handleRenderingFailed(r);i.wasLoadedBy(t)||((r=new n.PjsError("InvalidUnitId",new Error('unit id "'+o+'" have not loaded by group id: '+t))).notify(1),e.GlobalEventHandler.handleRenderingFailed(r))},t.prototype.reset=function(){this.chains=[]},t.prototype.send=function(){for(var t=[],e=0;e<this.chains.length;e++)t.push(this.chains[e].send());return o.PromiseLike.all(t)},t.prototype.invoke=function(t){try{return this.reset(),t(this),this.send()}finally{this.reset()}},t}(),u=function(){function t(t){this.command=new h;for(var e=0;e<t.length;e++)this.push(t[e])}return t.prototype.push=function(t){try{this.command.invoke(t)}catch(t){var o=new n.PjsError("RuntimeError",t);o.notify(1),e.GlobalEventHandler.handleRenderingFailed(o)}},t}();t.Command=h,t.CommandStore=u}));
fluctAdScript.mod.define("p",["./lib/command","./lib/event_handler","./lib/error","./lib/idext/liveramp","./lib/idext/rtus","./lib/idext/imuid","./lib/idext/idhub","./lib/idext/fluctuid"],(function(i,t,d,r,n,c,e,u){"use strict";try{!function(){var t=window.fluctAdScript;try{if(window.top.document)try{t.rtus||(window.fluctAdScript.rtus=new n.CriteoRtusExt),t.liveramp||(window.fluctAdScript.liveramp=new r.LiveRampExt),t.imuid||(window.fluctAdScript.imuid=new c.IMUIDExt),t.idhub||(window.fluctAdScript.idhub=new e.IDHub),t.fluct_uid||(window.fluctAdScript.fluct_uid=new u.FluctUIDExt)}catch(i){new d.PjsError("RuntimeError",i).notify(1)}}catch(i){}t.cmd?t.cmd instanceof Array&&(window.fluctAdScript.cmd=new i.CommandStore(t.cmd)):window.fluctAdScript.cmd=new i.CommandStore([])}()}catch(i){var l=new d.PjsError("RuntimeError",i);l.notify(1),t.GlobalEventHandler.handleRenderingFailed(l)}}));
fluctAdScript.mod.getModule("p");