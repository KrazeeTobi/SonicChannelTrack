document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll("[data-mvid]");e.length&&document.body.insertAdjacentHTML("beforeend",'<dialog id="dialog-movie" class="dialog-movie"></dialog>');for(let i=0;i<e.length;i++)e[i].setAttribute("commandfor","dialog-movie");const t=document.querySelectorAll("[data-img]");for(let r=0;r<t.length;r++)t[r].setAttribute("commandfor",`dialog-image-${r}`),document.body.insertAdjacentHTML("beforeend",`<dialog id="dialog-image-${r}" class="dialog-image"></dialog>`);const o=document.getElementsByTagName("dialog");for(let c=0;c<o.length;c++){const s=o[c].id,m=o[c].innerHTML;o[c].inert=!0,o[c].querySelector(".mdl-close")?o[c].innerHTML=`\n\t\t\t<div class="mdl-inner"><div class="mdl-contents">${m}</div></div>\n\t\t\t<div commandfor="${s}" class="mdl-overlay" tabindex="-1"></div>\n\t\t\t`:o[c].innerHTML=`\n\t\t\t<div class="mdl-inner"><div class="mdl-contents">${m}</div><button type="button" commandfor="${s}" class="mdl-close org-close">Close</button></div>\n\t\t\t<div commandfor="${s}" class="mdl-overlay" tabindex="-1"></div>\n\t\t\t`}const n=document.querySelectorAll(".mdl-free, .mdl-image, [data-mvid], [data-img]");for(let u=0;u<n.length;u++){const v=n[u].getAttribute("commandfor"),y=document.getElementById(v);function d(){if(y.showModal(),setTimeout((()=>{y.querySelector(".mdl-inner").classList.add("modalOpen"),y.querySelector(".mdl-overlay").classList.add("modalOpen")}),100),n[u].dataset.mvid){const e=n[u].dataset.mvid;y.querySelector(".mdl-contents").insertAdjacentHTML("afterbegin",`<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/${e}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>`),y.inert=!1}if(n[u].dataset.img&&!y.querySelector("img")){const e=n[u].dataset.img;y.querySelector(".mdl-contents").insertAdjacentHTML("afterbegin",`<img src="${e}" alt="">`)}n[u].dataset.mvid||setTimeout((()=>{y.inert=!1;y.querySelectorAll('a:not([tabindex="-1"]), button:not([tabindex="-1"]), input:not([tabindex="-1"]), select:not([tabindex="-1"]), textarea:not([tabindex="-1"]), [tabindex]:not([tabindex="-1"])')[0].focus()}),500)}n[u].addEventListener("click",(()=>{d()})),n[u].addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),d())}))}const l=document.querySelectorAll(".mdl-close, .mdl-overlay");for(let g=0;g<l.length;g++)l[g].addEventListener("click",(()=>{a()}));function a(){const e=document.querySelector("dialog[open]");e&&(e.querySelector(".mdl-inner").classList.add("modalClose"),e.querySelector(".mdl-overlay").classList.add("modalClose"),setTimeout((()=>{e.querySelector(".mdl-inner").classList.remove("modalOpen","modalClose"),e.querySelector(".mdl-overlay").classList.remove("modalOpen","modalClose"),e.close(),e.inert=!0}),300),e.querySelector("iframe")&&setTimeout((()=>{e.querySelector("iframe").remove()}),300))}document.addEventListener("keydown",(e=>{"Escape"===e.key&&(e.preventDefault(),a())}));document.addEventListener("keydown",(e=>{const t=document.querySelector("dialog[open]");if(t&&"dialog-movie"!==t.id){const o=t.querySelectorAll('a:not([tabindex="-1"]), button:not([tabindex="-1"]), input:not([tabindex="-1"]), select:not([tabindex="-1"]), textarea:not([tabindex="-1"]), [tabindex]:not([tabindex="-1"])'),n=o[0],d=o[o.length-1];"Tab"===e.code&&(e.shiftKey?document.activeElement===n&&(e.preventDefault(),d.focus()):document.activeElement===d&&(e.preventDefault(),n.focus()))}}))}));