!function(e,t,s){class i{constructor(e){this.setDomElements(e);let t=new l(this.el.host,"l-header");t.replace().then(this.setupLHeader.bind(this))}setDomElements(e){this.el={},this.el.host=e}setupLHeader(){e.lHeaderDropDown(),e.lHeaderHamburger()}}class l{constructor(e,t){this.fragmentClassname=t,this.loadFilepath=s.assetsDir+"/fragment/"+t+"_"+s.lang+".html",this.setDomElements(e)}setDomElements(e){this.el={},this.el.host=e,this.el.targetContents=s.toArray(this.el.host.querySelectorAll("[data-phase-content]"))}replace(){return s.fetchHtml(this.loadFilepath,{dt:s.nowHour},"GET").then(this.replacePhaseContents.bind(this)).catch(function(){return Promise.resolve()})}replacePhaseContents(e){let t=e.querySelector("."+this.fragmentClassname);return null===t||this.el.targetContents.forEach(function(e){let s=e.getAttribute("data-phase-content"),i=t.querySelector('[data-phase-content="'+s+'"]');if(null===i)return null;e.replaceWith(i)},this),Promise.resolve()}}class n{constructor(e){if(this.setDomElements(e),null===this.el.articleList)return;this.loadDocs().then(this.renderArticleList.bind(this))}setDomElements(e){this.el={},this.el.host=e,this.el.articleList=this.el.host.querySelector(".articleList")}loadDocs(){return s.fetchJson(s.emsDir+"/news.json",{dt:s.nowHour},"GET").then(function(e){let t=e.docs.map(s.plucker("doc")).sort(s.sorter("entryDate","desc")).slice(0,3);return Promise.resolve(t)})}renderArticleList(e){if(0===e.length){this.el.host.remove();return}let t=e.map(r.TopExhibitorNewsArticleListItem);s.deleteChildren(this.el.articleList),this.el.articleList.appendChild(s.createDomFragment(t))}}let r={TopExhibitorNewsArticleListItem:function(e){let t="ja"===s.lang?e.exhibitName:e.exhibitNameEn;"ja"===s.lang?e.exhibitGroupName:e.exhibitGroupNameEn;let i="ja"===s.lang?"年月日":".",l="ja"===s.lang?e.title:e.titleEn,n=e.image?s.emsDir+"/news_thumbnails/"+e.image.replace(/\.\w+$/,".jpg"):s.emsDir+"/news_thumbnails/noimage.png";return{type:"article",attrs:{class:["articleList_item"]},children:[{type:"a",attrs:{class:["articleList_item_link"],href:s.langDir+"/business/news/"+e.id+".html"},children:[{type:"div",attrs:{class:["articleList_item_text"]},children:[{type:"div",attrs:{class:["articleList_item_date"]},children:[{type:"text",value:s.getDisplayDate(e.entryDate,i)}]},{type:"h3",attrs:{class:["articleList_item_company"]},children:[{type:"text",value:t}]},{type:"div",attrs:{class:["articleList_item_title"]},children:[{type:"text",value:l}]}]},""===n?null:{type:"div",attrs:{class:["articleList_item_image"]},children:[{type:"img",attrs:{src:n,alt:"",loading:"lazy"}}]}]}]}}};new class e{constructor(){this.setEventHandlers()}setDomElements(){this.el={},this.el.html=t.documentElement}setEventHandlers(){t.addEventListener("DOMContentLoaded",this.document_onDOMContentLoaded.bind(this))}document_onDOMContentLoaded(){this.main()}main(){this.setDomElements(),this.setLang(),this.setNow(),this.setupLHeader(),this.setupTopExhibitorNewsSection()}setLang(){let e=this.el.html.getAttribute("lang");"ja"===e?(s.lang=e,s.langDir=s.langDir):"en"===e?(s.lang=e,s.langDir=s.langDir.replace("/jp","/en")):e.startsWith("zh")&&(s.lang="cn",s.langDir=s.langDir.replace("/jp","/cn"))}setNow(){let e=s.padder("0",2),t=new Date,i=t.getFullYear(),l=e(t.getMonth()+1),n=e(t.getDate()),r=e(t.getHours()),a=e(t.getMinutes()),o=e(t.getSeconds());s.nowTimestamp=t.getTime(),s.nowTime=[i,l,n,r,a,o].join(""),s.nowHour=[i,l,n,r].join("")}setupLHeader(){this.el.lHeader=t.querySelector(".l-header"),null!==this.el.lHeader&&(this.lHeader=new i(this.el.lHeader))}setupTopExhibitorNewsSection(){this.el.topExhibitorNewsSection=t.querySelector(".top-section.-exhibitors"),null!==this.el.topExhibitorNewsSection&&(this.topExhibitorNewsSection=new n(this.el.topExhibitorNewsSection))}}}(window,document,tgsUtils);
