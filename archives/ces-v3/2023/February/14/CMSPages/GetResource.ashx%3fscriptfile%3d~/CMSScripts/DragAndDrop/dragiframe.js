function bringSelectedIframeToTop(n){DIF_raiseSelectedIframe=n}function allowDragOffScreen(n){DIF_allowDragOffScreen=n}function addHandle(o,win){var p,topRef,topRefStr,name;if(arguments.length==2&&win==window){for(p=win;p=p.parent;){if(p.addHandle){p.addHandle(o,win,!0);return}if(p==win.top)return}return}for(topRef=win,topRefStr="window";topRef.parent&&topRef.parent!=window;)topRef=topRef.parent,topRefStr=topRefStr+".parent";if(typeof win.DIF_mainHandlersAdded=="undefined"||!win.DIF_mainHandlersAdded)with(win)eval("function OnMouseDownHandler(evt) { if(typeof(evt)=='undefined'){evt=event;}"+topRefStr+".parent.DIF_begindrag(evt, "+topRefStr+") }"),eval("document.onmousedown = OnMouseDownHandler;"),eval("function OnMouseUpHandler(evt) { if(typeof(evt)=='undefined'){evt=event;}"+topRefStr+".parent.DIF_enddrag(evt, "+topRefStr+") }"),eval("document.onmouseup = OnMouseUpHandler;"),eval("function OnMouseMoveHandler(evt) { if(typeof(evt)=='undefined'){evt=event;}"+topRefStr+".parent.DIF_iframemove(evt, "+topRefStr+") }"),eval("document.onmousemove = OnMouseMoveHandler;"),win.DIF_handlersAdded=!0,win.DIF_mainHandlersAdded=!0;typeof DIF_handlersAdded=="undefined"&&window.DIF_handlersAdded||(eval("function OnMouseMoveHandler(evt) { if(typeof(evt)=='undefined'){evt=event;}DIF_mouseMove(evt, window) }"),eval("document.onmousemove = OnMouseMoveHandler;"),eval("function OnMouseUpHandler(evt) { if(typeof(evt)=='undefined'){evt=event;}DIF_enddrag(evt, window) }"),eval("document.onmouseup = OnMouseUpHandler;"),window.DIF_handlersAdded=!0);$cmsj(o).mouseenter(function(){window.$visiblePopup&&(this.style.cursor=window.$visiblePopup.data("fullScreen")?"default":"move")});DIF_cleanCollections();name=DIF_getIframeId(topRef);DIF_handles[name]==null&&(DIF_handles[name]=[],DIF_iframeMouseDownLeft[name]=0,DIF_iframeMouseDownTop[name]=0,DIF_pageMouseDownLeft[name]=0,DIF_pageMouseDownTop[name]=0);DIF_handles[name][DIF_handles[name].length]=o}function DIF_cleanCollections(){var r=Object.keys(DIF_handles),i,n,t,u;if(r.length>0){for(i=0;i<r.length;i++){for(n=r[i],t=0,t=0;t<DIF_handles[n].length;t++){try{u=DIF_handles[n][t]==undefined}catch(f){DIF_handles[n].splice(t,1);delete DIF_iframeWindows[n];delete DIF_iframeObjects[n];continue}document.getElementById(n)||(DIF_handles[n].splice(t,1),delete DIF_iframeWindows[n],delete DIF_iframeObjects[n])}DIF_handles[n].length==0&&delete DIF_handles[n]}DIF_handles==null&&(DIF_handles={});DIF_iframeWindows==null&&(DIF_iframeWindows={});DIF_iframeObjects==null&&(DIF_iframeObjects={})}}function DIF_getEventPosition(n){var t={};return t.x=0,t.y=0,n||(n=window.event),typeof n.pageX=="number"?(t.x=n.pageX,t.y=n.pageY):(t.x=n.clientX,t.y=n.clientY,top.opera||(window.document.compatMode&&window.document.compatMode!="BackCompat"?(t.x+=window.document.documentElement.scrollLeft,t.y+=window.document.documentElement.scrollTop):(t.x+=window.document.body.scrollLeft,t.y+=window.document.body.scrollTop))),t}function DIF_getIframeId(n){for(var t,i,u=document.getElementsByTagName("IFRAME"),r=0;r<u.length;r++)if(t=u.item(r),i=null,t.contentWindow?i=t.contentWindow:window.frames&&window.frames[t.id].window&&(i=window.frames[t.id]),i==n)return DIF_iframeWindows[t.id]=n,DIF_iframeObjects[t.id]=t,t.id;return null}function DIF_getObjectXY(n){var i={},t;return i.x=0,i.y=0,n!=null&&(t=$cmsj(n).parent(),t.length>0&&(i.x=t.css("left").substring(0,t.css("left").indexOf("px")),i.y=t.css("top").substring(0,t.css("top").indexOf("px")))),i}function getSrcElement(n){for(var t=n.target;t.nodeType!=1;)t=t.parentNode;return t}function isHandleClicked(n,t){if(n==t)return!0;while(t.parentNode!=null){if(t==n)return!0;t=t.parentNode}return!1}function DIF_begindrag(n,t){var i=DIF_getIframeId(t),f,o,u,r,e;if(i!=null&&DIF_handles[i]!=null&&!(DIF_handles[i].length<1)){for(f=!1,o=n.srcElement||getSrcElement(n),u=0;u<DIF_handles[i].length;u++)if(isHandleClicked(DIF_handles[i][u],o)){f=!0;break}if(!f)return!1;DIF_iframeBeingDragged=i;DIF_raiseSelectedIframe&&(DIF_iframeObjects[DIF_iframeBeingDragged].style.zIndex=DIF_highestZIndex++);DIF_dragging=!0;r=DIF_getEventPosition(n);DIF_iframeMouseDownLeft[DIF_iframeBeingDragged]=r.x;DIF_iframeMouseDownTop[DIF_iframeBeingDragged]=r.y;e=DIF_getObjectXY(DIF_iframeObjects[DIF_iframeBeingDragged]);DIF_pageMouseDownLeft[DIF_iframeBeingDragged]=e.x-0+r.x;DIF_pageMouseDownTop[DIF_iframeBeingDragged]=e.y-0+r.y}}function DIF_enddrag(){DIF_dragging=!1;DIF_iframeBeingDragged=""}function DIF_mouseMove(n){if(DIF_dragging){var t=DIF_getEventPosition(n);DIF_drag(t.x-DIF_pageMouseDownLeft[DIF_iframeBeingDragged],t.y-DIF_pageMouseDownTop[DIF_iframeBeingDragged])}}function DIF_iframemove(n){if(DIF_dragging){var t=DIF_getEventPosition(n);DIF_drag(t.x-DIF_iframeMouseDownLeft[DIF_iframeBeingDragged],t.y-DIF_iframeMouseDownTop[DIF_iframeBeingDragged])}}function DIF_drag(n,t){var s=DIF_getObjectXY(DIF_iframeObjects[DIF_iframeBeingDragged]),i=$cmsj(DIF_iframeObjects[DIF_iframeBeingDragged]).parent(),h=$cmsj(document),f=h.scrollLeft(),e=h.scrollTop(),r=s.x-0+n,u=s.y-0+t,o;if(!DIF_allowDragOffScreen){var c=$cmsj(window),l=c.width()-i.outerWidth()+f,a=c.height()-i.outerHeight()+e,v=f,y=e;r<v?r=v:r>l&&(r=l);u<y?u=y:u>a&&(u=a)}i.data("fullScreen")||(i.css("left",r+"px"),i.css("top",u+"px"),o={left:r-f,top:u-e},i.data("originalOffset",o),i.data("actualOffset",o),DIF_pageMouseDownLeft[DIF_iframeBeingDragged]+=n,DIF_pageMouseDownTop[DIF_iframeBeingDragged]+=t)}var DIF_dragging=!1,DIF_iframeBeingDragged="",DIF_iframeObjects={},DIF_iframeWindows={},DIF_iframeMouseDownLeft={},DIF_iframeMouseDownTop={},DIF_pageMouseDownLeft={},DIF_pageMouseDownTop={},DIF_handles={},DIF_highestZIndex=99,DIF_raiseSelectedIframe=!1,DIF_allowDragOffScreen=!1;Object.keys||(Object.keys=function(n){if(n!==Object(n))throw new TypeError("Object.keys called on non-object");var t=[];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(i);return t})