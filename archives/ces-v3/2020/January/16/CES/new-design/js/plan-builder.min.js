(function(){function e(i){switch(i){case n.HiddenDisabled:t.parent().addClass("is-hidden");t.parent().addClass("is-disabled");t.attr("aria-disabled","true");t.attr("disabled");break;case n.Disabled:t.parent().removeClass("is-hidden");t.parent().addClass("is-disabled");t.attr("aria-disabled","true");t.attr("disabled");break;case n.Enabled:t.parent().removeClass("is-hidden");t.parent().removeClass("is-disabled");t.removeAttr("aria-disabled");t.removeAttr("disabled")}}function h(t){switch(t){case n.HiddenDisabled:o.addClass("is-hidden");o.attr("aria-disabled","true");o.attr("disabled");break;case n.Disabled:o.removeClass("is-hidden");o.attr("aria-disabled","true");o.attr("disabled");break;case n.Enabled:o.removeClass("is-hidden");o.removeAttr("aria-disabled");o.removeAttr("disabled")}}function s(t){switch(t){case n.HiddenDisabled:f.addClass("is-hidden");f.addClass("plan-builder__submit--is-disabled");f.attr("aria-disabled","true");f.attr("disabled");break;case n.Disabled:f.removeClass("is-hidden");f.addClass("plan-builder__submit--is-disabled");f.attr("aria-disabled","true");f.attr("disabled");break;case n.Enabled:f.removeClass("is-hidden");f.removeClass("plan-builder__submit--is-disabled");f.removeAttr("aria-disabled");f.removeAttr("disabled")}}function l(){var n=$(".plan-builder").offset().top,t=$(".plan-builder__tool").offset().top;t<window.scrollY&&$("body").scrollTop(n-70)}function a(t){t.on("slid.bs.carousel",function(){var t=$(".plan-builder__checkbox[name=step1]:checked"),r=$(".plan-builder__radio[name=step2]:checked"),f=$(".plan-builder__radio[name=step3]:checked");i=$(".carousel-item.active").index()+1;l();i===1?(u.text(u.data("message-1")),h(n.HiddenDisabled),t===0?e(n.Disabled):e(n.Enabled)):i===2?(u.text(u.data("message-2")),r.length===0?(h(n.Enabled),e(n.Disabled)):(h(n.Enabled),e(n.Enabled),s(n.HiddenDisabled))):i===3&&(u.text(u.data("message-3")),f.length===0?(e(n.HiddenDisabled),s(n.Disabled)):(e(n.HiddenDisabled),s(n.Enabled)))})}function c(t){t.on("change",function(t){var h=$(".plan-builder__step-1"),l=$(".plan-builder__step-2"),a=$(".plan-builder__step-3"),f=$(".plan-builder__checkbox[name=step1]:checked"),o=$(".plan-builder__radio[name=step2]:checked"),v=$(".plan-builder__radio[name=step3]:checked");if(i===1&&f.length===0&&(u.text(u.data("message-1")),r.text(r.data("select-two")),e(n.Disabled)),i===1&&f.length===1&&(e(n.Disabled),r.text(r.data("select-one-more")),h.removeClass("plan-builder__step-1--disable-checkboxes")),i===1&&f.length>=2&&(h.addClass("plan-builder__step-1--disable-checkboxes"),u.text(u.data("message-1-final")),r.text(""),e(n.Enabled)),i===1&&f.length>2&&($(this).prop("checked",!1),t.preventDefault()),i===2&&o.length>0){if(o.val().toLowerCase()==="startup"){window.location.href=window.location.origin+planYourShowStartupUrl;return}r.text("");l.addClass("plan-builder__step-2--less-shadow-radio");s(n.HiddenDisabled);e(n.Disabled);$.get({url:"/api/industries/"+o.val()+"/sub",success:function(t){if(p(t))e(n.HiddenDisabled),s(n.Enabled);else{var i=document.getElementById("Step3OptionsTemplate").innerHTML,r=Handlebars.compile(i),u=r({subAreas:t});$(".plan-builder__step-3").html(u);c($(".plan-builder__step-3 input"));e(n.Enabled)}}})}i===3&&v.length>=1&&(u.text(u.data("message-3-final")),s(n.Enabled),r.text(""),a.addClass("plan-builder__step-3--less-shadow-radio"))})}function v(){$(".plan-builder__submit").on("click",function(n){var o;n.preventDefault();var s=$(".plan-builder__checkbox[name=step1]:checked"),h=$(".plan-builder__radio[name=step2]:checked"),t=$(".plan-builder__radio[name=step3]:checked"),u=[],f=[],e=[];return i===3&&t.length===0?(r.text(r.data("select-one")),!1):(s.each(function(){u.push($(this).val())}),h.each(function(){f.push($(this).val())}),t.each(function(){e.push($(this).val())}),o=window.location.origin+planYourShowResultsUrl+"?goals="+u.join(",")+"&topl="+f.join(",")+"&subl="+e.join(","),window.location.href=encodeURI(o),!1)})}function y(){var n=$("#plan-builder"),u=$(".plan-builder__tool input");t.parent().on("click",function(){var n=$(".plan-builder__checkbox[name=step1]:checked"),t=$(".plan-builder__radio[name=step2]:checked");i===1&&n.length===0&&r.text(r.data("select-two"));i===2&&t.length===0&&r.text(r.data("select-one"))});t.on("click",function(n){if(t.attr("aria-disabled"))return n.preventDefault(),!1});a(n);c(u);v()}function p(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}var i=1,u=$(".plan-builder__messaging"),r=$(".plan-builder__error"),o=$('[data-slide="prev"]'),t=$('[data-slide="next"]'),f=$(".plan-builder__submit"),n=Object.freeze({HiddenDisabled:1,Disabled:2,Enabled:3});$(window).on("load",function(){y()})})();