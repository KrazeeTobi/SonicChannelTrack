var nowDevice,event_detail_data,SpMax=1e3;function anchorScroll(){$('a[href^="#"]').not(".noscroll").click(function(){var e=$(this).attr("href"),i=$("#"==e||""==e?"body":e);if("fixed"==$("header").css("position"))var t=$("header").innerHeight();else t=0;var s=i.offset().top-t;return $("body , html").animate({scrollTop:s},500,"swing"),!1})}function resizeSet(){var e=deviceCheck();switch(e){case"sp":window.innerHeight?window.innerHeight:$(window).height()}if(e!=nowDevice){switch(colorbox_engage(),slick_engage(),e){case"sp":$.colorbox.resize({innerWidth:"95vw",innerHeight:"50vw"});break;case"pc":$.colorbox.resize({innerWidth:900,innerHeight:500})}colorbox_close()}nowDevice=deviceCheck(),$(".list_detail li .screen").removeAttr("style")}function deviceCheck(){return window.innerWidth<=SpMax?"sp":"pc"}function colorbox_engage(){if($("a.modal")[0]&&("pc"==deviceCheck()?$("a.modal").colorbox({maxWidth:"90%",opacity:.7,loop:!1}):"sp"==deviceCheck()&&$("a.modal").colorbox({width:"100%",innerHeight:"auto",maxWidth:"90%",opacity:.7,loop:!1})),$("a.iframe_colorbox")[0])switch(deviceCheck()){case"pc":$("a.iframe_colorbox").colorbox({iframe:!0,innerWidth:900,innerHeight:500,opacity:.8,loop:!1,fixed:!0,onClosed:function(){$("#cboxClose").removeClass("rev")},onComplete:function(){"sp"==deviceCheck()&&$("#cboxContent").addClass("iframe_colorbox"),$("#cboxClose").addClass("rev"),$("#cboxContent").focus()}});break;case"sp":$("a.iframe_colorbox").colorbox({iframe:!0,innerWidth:"95vw",innerHeight:"50vw",maxWidth:"95%",maxHeight:"90%",opacity:.8,loop:!1,fixed:!0,onClosed:function(){$("#colorbox , #cboxContent").removeClass("iframe_colorbox"),$("#cboxClose").removeClass("rev")},onComplete:function(){"sp"==deviceCheck()&&$("#colorbox , #cboxContent").addClass("iframe_colorbox"),$("#cboxClose").addClass("rev"),$("#cboxContent").focus()}})}if($("a.inline_modal")[0])switch(deviceCheck()){case"pc":$("a.inline_modal").colorbox({inline:!0,innerWidth:1024,innerHeight:"auto",maxHeight:"90%",opacity:.8,loop:!1,fixed:!0,onClosed:function(){$("#colorbox").removeClass("inline_modal"),$("#cboxClose").removeClass("rev").removeClass("inline_modal")},onComplete:function(){$("#colorbox").addClass("inline_modal"),$("#cboxClose").addClass("rev").addClass("inline_modal"),$("#cboxContent").focus()}});break;case"sp":$("a.inline_modal").colorbox({inline:!0,innerWidth:950,innerHeight:"auto",maxWidth:"95%",maxHeight:"90%",opacity:.8,loop:!1,fixed:!0,onClosed:function(){$("#colorbox").removeClass("inline_modal"),$("#cboxClose").removeClass("rev").removeClass("inline_modal")},onComplete:function(){$("#colorbox").addClass("inline_modal"),$("#cboxClose").addClass("rev").addClass("inline_modal"),$("#cboxContent").focus()}})}}function topBtn_engage(){var e=window.innerHeight?window.innerHeight:$(window).height(),i=$("body").innerHeight(),t=$(window).innerWidth(),s=$("#btn_gotop"),n=$("footer").offset(),a=98,o=68;"sp"==deviceCheck()&&(a=t/11.3,o=s.innerHeight()/2),$("footer")[0]&&($(this).scrollTop()>n.top-e+a?s.css("bottom",i-(n.top+(i-($(this).scrollTop()+e))+o)):s.css("bottom","")),0!=$(this).scrollTop()?100<$(this).scrollTop()?s.show():s.hide():"sp"!=deviceCheck()&&s.hide()}function colorbox_close(){"block"==$("#colorbox").css("display")&&$("#cboxOverlay").click()}function on_dropdown(){$(".language").on("click",function(){$(this).children("ul").slideToggle(350)})}$(function(){anchorScroll(),topBtn_engage(),nowDevice=deviceCheck(),colorbox_engage(),slick_engage(),on_dropdown(),action_kv(),do_character_change(),change_event_detail(),standby_event_detail(),load_list_news()}),$(window).on("load",function(){"top_page"==$("body").attr("id")&&$(".section_kv").addClass("action")}),$(window).on("orientationchange resize",function(){resizeSet(),topBtn_engage()}),$(window).on("scroll touchstart touchmove touchend",function(){topBtn_engage()}),$(window).on("orientationchange",function(){});var tag=document.createElement("script"),firstScriptTag=document.getElementsByTagName("script")[0];function onYouTubeIframeAPIReady(){new YT.Player("video",{width:"100%",height:"100%",videoId:"W5QrV9D15-s",playerVars:{controls:0,disablekb:0,fs:0,iv_load_policy:3,modestbranding:1,playsinline:1,rel:0,showinfo:0},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}function onPlayerReady(e){e.target.mute(),e.target.playVideo()}function onPlayerStateChange(e){e.data===YT.PlayerState.ENDED&&e.target.playVideo()}function slick_engage(){if($(".list_detail > li").each(function(){var e=$(this).attr("data-eventname");$(this).find(".image_slide")[0]&&($(this).find(".image_slide").find(".slick-list")[0]||$(this).find(".image_slide ul").slick({autoplay:!0,autoplaySpeed:3500,dots:!1,arrows:!1,draggable:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,asNavFor:"."+e+" .thumbs_slide ul"})),$(this).find(".thumbs_slide")[0]&&($(this).find(".thumbs_slide").find(".slick-list")[0]||$(this).find(".thumbs_slide ul").slick({centerMode:!0,centerPadding:"18.8%",autoplay:!0,autoplaySpeed:3500,dots:!1,arrows:!0,draggable:!1,infinite:!0,slidesToShow:3,slidesToScroll:1,asNavFor:"."+e+" .image_slide ul",focusOnSelect:!0,responsive:[{breakpoint:1001,settings:{centerPadding:"32.8%",draggable:!0,slidesToShow:1,slidesToScroll:1}}]}))}),$(".image_carousel")[0]){var i=deviceCheck();$(".image_carousel ul").each(function(){switch(i){case"pc":(e=$(this)).find(".slick-list")[0]&&e.slick("unslick"),e.slick({centerMode:!0,centerPadding:"16.7%",autoplay:!0,autoplaySpeed:3e3,dots:!1,arrows:!0,draggable:!1,infinite:!0,slidesToShow:3,slidesToScroll:1});break;case"sp":var e;(e=$(this)).find(".slick-list")[0]&&e.slick("unslick"),e.slick({centerMode:!0,centerPadding:"30.8%",autoplay:!0,autoplaySpeed:3e3,dots:!1,arrows:!0,draggable:!1,infinite:!0,slidesToShow:1,slidesToScroll:1})}})}"mode"==$("body").attr("id")&&$(".list_mode .m_mode_img .images").each(function(){$(this).find(".slick-list")[0]||$(this).find("ul").slick({autoplay:!0,autoplaySpeed:3e3,dots:!0,arrows:!1,draggable:!1,infinite:!0,slidesToShow:1,slidesToScroll:1})})}function scrollEffect(){if("top_page"==$("body").attr("id")){var e=e=window.innerHeight?window.innerHeight:$(window).height();adj=e/1.5;var i=$(".section_event .event_01").offset().top-adj,t=$(".section_event .event_02").offset().top-adj;$(window).scrollTop()>t&&$(window).scrollTop()<t+e&&$(".section_event .event_02").addClass("active"),$(window).scrollTop()>i&&$(window).scrollTop()<i+e&&$(".section_event .event_01").addClass("active")}}function standby_event_detail(){$("body#event_2020").hasClass("detail")?load_event_detail("event_2020","./assets/data/event_2020_detail.json?"+parseInt(Date.now()/3e5,10)):$("body#event_1964").hasClass("detail")?load_event_detail("event_1964","./assets/data/event_1964_detail.json?"+parseInt(Date.now()/3e5,10)):$("body#amusements").hasClass("detail")&&load_event_detail("amusements","./assets/data/amusements_detail.json?"+parseInt(Date.now()/3e5,10))}function load_event_detail(a,e){event_detail_json_url=e,$.when($.ajax({url:event_detail_json_url}).then(function(e){event_detail_data="string"==$.type(e)?JSON.parse(e):e;for(var i=location.hash,t=!1,s=0;s<$(".list_event li.on").length;s++)if($(".list_event li.on").eq(s).find("a").attr("href")==i){var n=i.replace("#event_","");append_event_detail(a,n),do_change_event_detail(i.slice(1),"none"),t=!0}t||($(".list_detail li.init").removeClass("init").addClass("action"),$(".list_detail li.action .screen").show(0));for(s=0;s<$(".list_event li.on").length;s++){n=$(".list_event li.on").eq(s).find("a").attr("href").replace("#event_","");append_event_detail(a,n)}})).done(function(){slick_engage()})}function append_event_detail(e,i){var t=event_detail_data.list_event_detail[i],s="";if(!$(".list_detail").find(".event_"+i)[0]){s=(s=s+'<li data-eventname="event_'+t.code+'" data-description="'+t.description+'" class="event_'+t.code+'">')+'<div class="title"><h2><img src="./assets/images/'+e+"/"+t.code+"/title_"+t.code+'.png" alt="'+t.name+'"></h2></div>',s+='<div class="screen"><div class="image_slide"><ul>';for(var n=0;n<t.thumbs;n++)num=n<=8?"0"+(n+1):n+1,s=s+'<li><img src="./assets/images/'+e+"/"+t.code+"/image_"+t.code+"_"+num+'.jpg" alt=""></li>';s+='</ul></div><div class="thumbs_slide"><ul>';for(n=0;n<t.thumbs;n++)num=n<=8?"0"+(n+1):n+1,s=s+'<li class="oo_hover_effect"><img class="oo_effect_scale" src="./assets/images/'+e+"/"+t.code+"/image_"+t.code+"_"+num+'.jpg" alt=""></li>';if(s=s+'</ul></div><div class="exp"><div class="m_section_inner"><div class="exp_inner"><div class="txt"><p>'+t.summary+"</p></div>","event_2020"==e&&(s=s+'<div class="obj"><img src="./assets/images/'+e+"/"+t.code+"/obj_"+t.code+'.png" alt=""></div>'),"on"==t.guest){s+='<div class="guest"><ul>';for(var a=0;a<t.guest_title.length;a++)num=a<=8?"0"+(a+1):n+1,s=s+'<li><h3><img src="./assets/images/'+e+"/"+t.code+"/title_guest_"+num+'.png" alt="'+t.guest_title[a]+'"></h3><div class="images"><img src="./assets/images/'+e+"/"+t.code+"/image_guest_"+num+'.jpg" alt=""></div></li>';s+="</ul></div>"}s+="</div>",s+="</li>",$(".list_detail").append(s),$img=$(".list_detail .event_"+t.code+" img"),$img.originSrc=$img.src,$img.src="",$img.bind("load",function(){$(this).addClass("done"),$(".list_detail.event_"+t.code+" img").length-$(".list_detail.event_"+t.code+" img.done").length<=1&&($(".event_"+t.code).addClass("standby"),$(".event_"+t.code+" > a").addClass("oo_hover_effect")),$(".list_detail > li").length==$(".list_detail > li.standby").length&&$(".list_detail").addClass("all_standby")}),$img.src=$img.originSrc}}function change_event_detail(){$(".list_event").find("a").on("click",function(){$(this).parent("li").hasClass("standby")&&!$(this).parents(".list_event").hasClass("wait")&&do_change_event_detail($(this).attr("href").slice(1),"scroll")})}function do_change_event_detail(e,i){if("scroll"==i){$(".list_detail li .screen").removeClass("stay"),$(".list_detail li.active .screen").removeClass("stay").css({height:$(".list_detail").innerHeight()-100}),$(".list_detail li.active .screen").innerHeight()<=500&&$(".list_detail li.active .screen").removeAttr("style"),$(".list_detail li."+e+" .screen").css({height:$(".list_detail li."+e+" .screen").innerHeight()}),$(".list_detail li."+e+" .screen").innerHeight()<=500&&$(".list_detail li."+e+" .screen").removeAttr("style");var t=15;-1<e.indexOf("amusements")&&(t=-1),$("body , html").animate({scrollTop:$("#section_detail").offset().top-t},250,"swing",function(){$(".list_detail li."+e).hasClass("active")||($(".list_event").addClass("wait"),$(".list_detail li.active .screen").on("transitionend",function(){$(this).hasClass("stay")||$(".list_event").removeClass("wait")}),$("body.detail main .section_list").css({marginTop:30}),$(".list_detail li."+e+" .screen").addClass("stay"),$(".list_detail li.active .screen").addClass("stay"),$(".list_detail li.active").delay(500).queue(function(){$("main").removeAttr("class").addClass(e),$(this).removeClass("active").removeClass("visible").removeClass("init").removeClass("action").dequeue()}),$(".list_detail li."+e).delay(500).queue(function(){$(this).find(".thumbs_slide").find(".slick-track").children("li").not(".slick-cloned").eq(0).click().dequeue(),$(this).addClass("visible").addClass("active").dequeue()}),$(".list_detail li."+e+".screen").delay(550).queue(function(){$(this).removeClass("stay").dequeue()}),$(".list_detail li .screen").delay(1100).queue(function(){$(this).removeClass("stay").dequeue()}),$("body.detail main .section_list").delay(1100).queue(function(){$(this).removeAttr("style").dequeue()}))})}else $(".list_detail li.active").removeClass("init").removeClass("active").removeClass("visible"),$(".list_detail li."+e).addClass("active").addClass("visible"),$(".list_detail li.active"),$("main").removeAttr("class").addClass(e);var s=$(".list_detail > li.active").attr("data-description"),n=location.href.replace(location.hash,"")+"#"+$(".list_detail > li.active").attr("data-eventname");$("meta").each(function(){"description"==$(this).attr("name")&&$(this).attr("content",s),"og:description"==$(this).attr("property")&&$(this).attr("content",s),"og:url"==$(this).attr("property")&&$(this).attr("content",n)})}function action_kv(){"top_page"==$("body").attr("id")&&do_kv()}function do_kv(){$img=$(".obj_kv"),$img.originSrc=$img.src,$img.src="",$img.bind("load",function(){$(this).addClass("done"),$(".obj_kv").length==$(".obj_kv.done").length&&$(".section_kv").addClass("action")}),$img.src=$img.originSrc}function do_character_change(){$(".list_character li.change").on("click",function(){$(this).removeClass("init"),$(this).toggleClass("app_3d"),$(this).toggleClass("app_2d")})}function load_list_news(){"top_page"==$("body").attr("id")&&(list_news_json_url="./assets/data/news.json?"+parseInt(Date.now()/3e5,10),$.when($.ajax({url:list_news_json_url}).then(function(e){"string"==$.type(e)?list_news_data=JSON.parse(e):list_news_data=e,$(".block_news .m_enclosure_inner").append("<dl>");for(var i=list_news_data.list_news.length-1;i>=list_news_data.list_news.length-(3<list_news_data.list_news.length?3:list_news_data.list_news.length)-0;i--)$(".block_news .m_enclosure_inner dl").append("<dt>"+list_news_data.list_news[i].date+"</dt>"),""!=list_news_data.list_news[i].link?$(".block_news .m_enclosure_inner dl").append('<dd><a href="'+list_news_data.list_news[i].link+'">'+list_news_data.list_news[i].summary+"</a></dd>"):$(".block_news .m_enclosure_inner dl").append("<dd>"+list_news_data.list_news[i].summary+"</dd>");$(".block_news .m_enclosure_inner").append("</dl>")})).done(function(){$(".block_news").removeClass("init")}))}tag.src="https://www.youtube.com/iframe_api",firstScriptTag.parentNode.insertBefore(tag,firstScriptTag),window.onYouTubeIframeAPIReady=onYouTubeIframeAPIReady;